<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ida.casemanager.items &mdash; IDA 0.01 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            IDA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">ida</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">IDA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">ida.casemanager.items</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for ida.casemanager.items</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">..core.basics</span> <span class="kn">import</span> <span class="n">dict_to_str</span><span class="p">,</span> <span class="n">map_inf_to_1</span><span class="p">,</span> <span class="n">map_inf_to_0</span>
<span class="kn">from</span> <span class="nn">..core.cleaners</span> <span class="kn">import</span> <span class="n">join_df_col_lists_by_semicolon</span><span class="p">,</span> <span class="n">parse_data</span><span class="p">,</span> <span class="n">html_words_cleaner</span><span class="p">,</span> <span class="n">is_int</span><span class="p">,</span> <span class="n">is_float</span><span class="p">,</span> <span class="n">is_date</span><span class="p">,</span> <span class="n">is_time</span><span class="p">,</span> <span class="n">is_datetime</span><span class="p">,</span> <span class="n">str_to_datetime</span>
<span class="kn">from</span> <span class="nn">..visualisation.visualise</span> <span class="kn">import</span> <span class="n">plot_timeline</span><span class="p">,</span> <span class="n">plot_date_range_timeline</span>
<span class="kn">from</span> <span class="nn">..text.textanalysis</span> <span class="kn">import</span> <span class="n">cosine_sim</span>
<span class="kn">from</span> <span class="nn">..text.information_extraction</span> <span class="kn">import</span> <span class="n">extract_names</span><span class="p">,</span> <span class="n">extract_countries</span><span class="p">,</span> <span class="n">extract_cities</span><span class="p">,</span> <span class="n">extract_cities</span><span class="p">,</span> <span class="n">extract_languages</span>
<span class="kn">from</span> <span class="nn">..location.geolocation</span> <span class="kn">import</span> <span class="n">coordinates_distance</span><span class="p">,</span> <span class="n">lookup_coordinates</span><span class="p">,</span> <span class="n">lookup_location</span><span class="p">,</span> <span class="n">get_location_coordinates</span><span class="p">,</span> <span class="n">normalised_coordinates_distance</span><span class="p">,</span> <span class="n">normalised_coordinates_distance_inverse</span><span class="p">,</span> <span class="n">normalised_locations_distance</span><span class="p">,</span> <span class="n">normalised_locations_distance_inverse</span>
<span class="kn">from</span> <span class="nn">..location.chronolocation</span> <span class="kn">import</span> <span class="n">time_difference</span><span class="p">,</span> <span class="n">normalised_time_difference</span><span class="p">,</span> <span class="n">normalised_time_difference_inverse</span>
<span class="kn">from</span> <span class="nn">..internet.webanalysis</span> <span class="kn">import</span> <span class="n">get_ip_geocode</span><span class="p">,</span> <span class="n">get_ip_coordinates</span><span class="p">,</span> <span class="n">get_ip_physical_location</span><span class="p">,</span> <span class="n">lookup_ip_coordinates</span><span class="p">,</span> <span class="n">lookup_whois</span><span class="p">,</span> <span class="n">is_registered_domain</span><span class="p">,</span> <span class="n">domain_whois</span><span class="p">,</span> <span class="n">ip_whois</span><span class="p">,</span> <span class="n">regex_check_then_open_url</span>
<span class="kn">from</span> <span class="nn">..internet.scrapers</span> <span class="kn">import</span> <span class="n">scrape_url</span><span class="p">,</span> <span class="n">scrape_url_links</span>
<span class="kn">from</span> <span class="nn">..internet.crawlers</span> <span class="kn">import</span> <span class="n">crawl_web</span><span class="p">,</span> <span class="n">fetch_sitemap</span><span class="p">,</span> <span class="n">crawl_site</span><span class="p">,</span> <span class="n">correct_link_errors</span>
<span class="kn">from</span> <span class="nn">..socmed.sherlock_interpreter</span> <span class="kn">import</span> <span class="n">search_username</span>
<span class="kn">from</span> <span class="nn">..importers.pdf</span> <span class="kn">import</span> <span class="n">read_pdf</span><span class="p">,</span> <span class="n">read_pdf_url</span>
<span class="kn">from</span> <span class="nn">.defaults_manager</span> <span class="kn">import</span> <span class="n">get_default_case</span>
<span class="kn">from</span> <span class="nn">.obj_properties</span> <span class="kn">import</span> <span class="n">CaseObjectProperties</span>
<span class="kn">from</span> <span class="nn">.obj_superclasses</span> <span class="kn">import</span> <span class="n">CaseObject</span><span class="p">,</span> <span class="n">CaseObjectSet</span>
<span class="kn">from</span> <span class="nn">.relationships</span> <span class="kn">import</span> <span class="n">CaseRelation</span><span class="p">,</span> <span class="n">CaseRelationSet</span><span class="p">,</span> <span class="n">SourceFileOf</span>
<span class="kn">from</span> <span class="nn">.files</span> <span class="kn">import</span> <span class="n">stat_result</span><span class="p">,</span> <span class="n">CaseFile</span><span class="p">,</span> <span class="n">CaseFileSet</span>
<span class="kn">from</span> <span class="nn">.casespecial</span> <span class="kn">import</span> <span class="n">CaseSpecial</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">import</span> <span class="nn">itertools</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">from</span> <span class="nn">Levenshtein</span> <span class="kn">import</span> <span class="n">distance</span> <span class="k">as</span> <span class="n">lev</span>


<div class="viewcode-block" id="CaseItem"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem">[docs]</a><span class="k">class</span> <span class="nc">CaseItem</span><span class="p">(</span><span class="n">CaseSpecial</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a CaseItem object. It represents a piece of material or evidence associated with a case.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    item_id : str</span>
<span class="sd">        ID used for retrieving item. Defaults to requesting user input.</span>
<span class="sd">    parent_obj_path : str</span>
<span class="sd">        if relationship is an attribute, object path of the parent object. Defaults to None.</span>
<span class="sd">    data : object</span>
<span class="sd">        data associated with item. Defaults to None.</span>
<span class="sd">    metadata : object</span>
<span class="sd">        item&#39;s metadata. Defaults to None.</span>
<span class="sd">    information : object</span>
<span class="sd">        information associated with item. Defaults to None.</span>
<span class="sd">    lookup_whois : bool</span>
<span class="sd">        whether to run WhoIs lookup on item metadata. Defaults to False.</span>
<span class="sd">    keywords : dict</span>
<span class="sd">        keywords associated with item. Defaults to an empty dictionary.</span>
<span class="sd">    links : list</span>
<span class="sd">        links associated with item. Defaults to an empty list.</span>
<span class="sd">    references : list</span>
<span class="sd">        references associated with item. Defaults to an empty list.</span>
<span class="sd">    contains : list</span>
<span class="sd">        objects contained by item. Defaults to an empty list.</span>
<span class="sd">    user_assessments : dict</span>
<span class="sd">        user notes and assessments. Defaults to an empty dictionary.</span>
<span class="sd">    </span>
<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    properties : CaseObjectProperties</span>
<span class="sd">        metadata for CaseItem object.</span>
<span class="sd">    metadata : pandas.DataFrame</span>
<span class="sd">        a dataframe of metadata associated with the item.</span>
<span class="sd">    data : pandas.DataFrame</span>
<span class="sd">        a dataframe of data associated with the item.</span>
<span class="sd">    information : pandas.DataFrame</span>
<span class="sd">        a dataframe of information associated with the item.</span>
<span class="sd">    whois : WhoisResult</span>
<span class="sd">        a WhoisResult object containing Whois data associated with the item.</span>
<span class="sd">    links : list</span>
<span class="sd">        a list of links associated with the item.</span>
<span class="sd">    references : list</span>
<span class="sd">        a list of references associated with the item.</span>
<span class="sd">    contains : list</span>
<span class="sd">        a list of content associated with the item.</span>
<span class="sd">    user_assessments : dict</span>
<span class="sd">        a dictionary of information assigned by the user.</span>
<span class="sd">    relations : CaseRelationSet</span>
<span class="sd">        a CaseRelationSet object of relations associated with the item in a case.</span>
<span class="sd">    </span>
<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">        * Intended to be assigned as an attribute of a CaseItemSet within a Case object.</span>
<span class="sd">        * Subclass of CaseSpecial class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                 <span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> 
                 <span class="n">parent_obj_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                 <span class="n">data</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                 <span class="n">metadata</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                 <span class="n">information</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                 <span class="n">lookup_whois</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> 
                 <span class="n">keywords</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> 
                 <span class="n">links</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span> 
                 <span class="n">references</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span> 
                 <span class="n">contains</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span> 
                 <span class="n">user_assessments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises CaseItem instance.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_id : str</span>
<span class="sd">            ID used for retrieving item. Defaults to requesting user input.</span>
<span class="sd">        parent_obj_path : str</span>
<span class="sd">            if relationship is an attribute, object path of the parent object. Defaults to None.</span>
<span class="sd">        data : object</span>
<span class="sd">            data associated with item. Defaults to None.</span>
<span class="sd">        metadata : object</span>
<span class="sd">            item&#39;s metadata. Defaults to None.</span>
<span class="sd">        information : object</span>
<span class="sd">            information associated with item. Defaults to None.</span>
<span class="sd">        lookup_whois : bool</span>
<span class="sd">            whether to run WhoIs lookup on item metadata. Defaults to False.</span>
<span class="sd">        keywords : dict</span>
<span class="sd">            keywords associated with item. Defaults to an empty dictionary.</span>
<span class="sd">        links : list</span>
<span class="sd">            links associated with item. Defaults to an empty list.</span>
<span class="sd">        references : list</span>
<span class="sd">            references associated with item. Defaults to an empty list.</span>
<span class="sd">        contains : list</span>
<span class="sd">            objects contained by item. Defaults to an empty list.</span>
<span class="sd">        user_assessments : dict</span>
<span class="sd">            user notes and assessments. Defaults to an empty dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Requesting item ID from user input if none provided</span>
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>
        
        <span class="c1"># Inheriting methods and attributes from CaseSpecial class</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj_name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">,</span> <span class="n">obj_type</span> <span class="o">=</span> <span class="s1">&#39;CaseItem&#39;</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="n">parent_obj_path</span><span class="p">)</span>
        
        <span class="c1"># Setting item properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="n">CaseObjectProperties</span><span class="p">(</span><span class="n">obj_name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">,</span> <span class="n">obj_type</span> <span class="o">=</span> <span class="s1">&#39;CaseItem&#39;</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="n">parent_obj_path</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="c1"># Setting item ID attribute. If current ID is None, retrieving item variable string name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_id</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_id</span>
        
        <span class="c1"># Initialising data dataframe</span>
        <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        
        <span class="c1"># Initialising metadata dataframe</span>
        <span class="k">if</span> <span class="n">metadata</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">])</span>                  
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span>
        
        <span class="c1"># Initialising information dataframe</span>
        <span class="k">if</span> <span class="n">information</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">information</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">information</span><span class="p">)</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">information</span> <span class="o">=</span> <span class="n">information</span>
        
        <span class="c1"># Running WhoIs lookup if requested</span>
        <span class="k">if</span> <span class="n">lookup_whois</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">whois</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_whois</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">whois</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="c1"># Assigning links, references, contents, and user assessments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">links</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">references</span> <span class="o">=</span> <span class="n">references</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">=</span> <span class="n">contains</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_assessments</span> <span class="o">=</span>  <span class="n">user_assessments</span>
        
        <span class="c1"># Updating properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        

    <span class="c1"># Methods for editing and retrieving item properties</span>
    
<div class="viewcode-block" id="CaseItem.update_properties"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.update_properties">[docs]</a>    <span class="k">def</span> <span class="nf">update_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates CaseItem&#39;s properties.</span>
<span class="sd">        </span>
<span class="sd">        Updates</span>
<span class="sd">        -------</span>
<span class="sd">            * obj_id</span>
<span class="sd">            * obj_size</span>
<span class="sd">            * item_id</span>
<span class="sd">            * data_count</span>
<span class="sd">            * metadata_count</span>
<span class="sd">            * information_count</span>
<span class="sd">            * links_count</span>
<span class="sd">            * references_count</span>
<span class="sd">            * contents_count</span>
<span class="sd">            * last_changed</span>
<span class="sd">            * hash</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Retrieving object ID code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        
        <span class="c1"># Retrieving item ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="c1"># Updating data count</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;data&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">data_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">data_count</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="c1"># Updating metadata count</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;metadata&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">metadata_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">metadata_count</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="c1"># Updating information count</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;information&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">information_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">information_count</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="c1"># Updating links count</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;links&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">links_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">links_count</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="c1"># Updating references count</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;references&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">references</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">references_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">references</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">references_count</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="c1"># Updating contents count</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;contains&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">contents_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contains</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">contents_count</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="c1"># Updating object size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_size</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sizeof__</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39; bytes&#39;</span>
        
        <span class="c1"># Updating last changed time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">update_last_changed</span><span class="p">()</span>
        
        <span class="c1"># Updating hash code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__hash__</span><span class="p">()</span></div>
    
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines how CaseItems are represented in string form.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span>
    


    <span class="c1"># Methods for checking if data and objects are attributes of an item set or case object</span>
    
<div class="viewcode-block" id="CaseItem.in_itemset"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.in_itemset">[docs]</a>    <span class="k">def</span> <span class="nf">in_itemset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itemset</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if item is part of an inputted item set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Retrieving item ID</span>
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="c1"># Checking if item ID is in item set</span>
        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">itemset</span><span class="p">,</span> <span class="n">item_id</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItem.in_case"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.in_case">[docs]</a>    <span class="k">def</span> <span class="nf">in_case</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">case</span> <span class="o">=</span> <span class="s1">&#39;default_case&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if item is part of an inputted case.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Returning default case if no case provided</span>
        <span class="k">if</span> <span class="n">case</span> <span class="o">==</span> <span class="s1">&#39;default_case&#39;</span><span class="p">:</span>
            <span class="n">case</span> <span class="o">=</span> <span class="n">get_default_case</span><span class="p">()</span>
        
        <span class="c1"># Retrieving item ID</span>
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="c1"># Checking if item ID is in case</span>
        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">case</span><span class="o">.</span><span class="n">items</span><span class="p">,</span> <span class="n">item_id</span><span class="p">)</span></div>

    <span class="c1"># Methods for adding and editing an item&#39;s data</span>
    
<div class="viewcode-block" id="CaseItem.add_id"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_id">[docs]</a>    <span class="k">def</span> <span class="nf">add_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds ID to item if no valid ID set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Adding ID if none present or current ID is not a string</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_id</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_id</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_name_str</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
    
<div class="viewcode-block" id="CaseItem.add_data"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_data">[docs]</a>    <span class="k">def</span> <span class="nf">add_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_type</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">data_format</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">raw_data</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds single data entry to an item&#39;s data dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Requesting data type from user if none provided</span>
        <span class="k">if</span> <span class="n">data_type</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">data_type</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Data type: &#39;</span><span class="p">)</span>
        
        <span class="c1"># Requesting data format from user if none provided</span>
        <span class="k">if</span> <span class="n">data_format</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">data_format</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Data format: &#39;</span><span class="p">)</span>
        
        <span class="c1"># Requesting raw data (if text) from user if none provided</span>
        <span class="k">if</span> <span class="n">raw_data</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">raw_data</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Raw data: &#39;</span><span class="p">)</span>
        
        <span class="c1"># Calculating index position to add data to</span>
        <span class="n">index_pos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        
        <span class="c1"># Adding data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">size</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.add_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">add_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">metadata_entry</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds single metadata entry to an item&#39;s metadata dataframe; adds custom metadata category if one given doesn&#39;t exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Requesting metadata category from user if none provided</span>
        <span class="k">if</span> <span class="n">metadata_category</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">metadata_category</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Category: &#39;</span><span class="p">)</span>
        
        <span class="c1"># Requesting metadata entry from user if none provided</span>
        <span class="k">if</span> <span class="n">metadata_entry</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">metadata_entry</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Entry: &#39;</span><span class="p">)</span>
        
        <span class="c1"># If the metadata category already exists, overwriting existing metadata</span>
        <span class="k">if</span> <span class="n">metadata_category</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>

            <span class="n">top_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">metadata_category</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
                <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;None&#39;</span><span class="p">)</span>
                <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_entry</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">updated_entry</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">],</span> <span class="n">metadata_entry</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">updated_entry</span>
        
         <span class="c1"># If the metadata category doesn&#39;t exist, adding new category</span>
        <span class="k">else</span><span class="p">:</span> 

            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_category</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_entry</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.add_metadata_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_metadata_df">[docs]</a>    <span class="k">def</span> <span class="nf">add_metadata_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata_df</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates a new metadata dataframe to an item&#39;s existing metadata dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">metadata_df</span><span class="p">)</span> <span class="o">!=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;This method requires a DataFrame&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span> <span class="n">metadata_df</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        

<div class="viewcode-block" id="CaseItem.replace_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.replace_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">replace_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata_df</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Replaces an item&#39;s metadata with a dictionary.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">metadata_df</span><span class="p">)</span> <span class="o">!=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Input must be dataframe&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata_df</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="CaseItem.add_address"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_address">[docs]</a>    <span class="k">def</span> <span class="nf">add_address</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a metadata entry under the category &#39;address&#39;; appends to any existing addresses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Address: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;address&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>

            <span class="n">top_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span>
                <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;None&#39;</span><span class="p">)</span>
                <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">address</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
                    <span class="n">updated_entry</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">],</span> <span class="n">address</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">updated_entry</span>
                    
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">top_index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span> 

            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;address&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">address</span>
                                                  
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        

<div class="viewcode-block" id="CaseItem.add_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_info">[docs]</a>    <span class="k">def</span> <span class="nf">add_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">info_category</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">suppress_warnings</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a single information entry to object.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">info</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Information entry: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">info_category</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">info_category</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Category: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">info_category</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
            <span class="ow">and</span> <span class="p">(</span><span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
           <span class="p">):</span>
            <span class="k">if</span> <span class="n">suppress_warnings</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;This entry is a duplicate of an information entry. Do you wish to proceed? (Yes / No): &#39;</span><span class="p">)</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;yes&#39;</span>

            <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pos</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info_category</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pos</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="k">else</span><span class="p">:</span> 

            <span class="n">pos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pos</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info_category</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pos</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.add_info_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_info_df">[docs]</a>    <span class="k">def</span> <span class="nf">add_info_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_info_df</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a new information dataframe to an item&#39;s existing information dataframe.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_info_dict</span><span class="p">)</span> <span class="o">!=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;This method requires a DataFrame&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">information</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">,</span> <span class="n">new_info_df</span><span class="p">])</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        

<div class="viewcode-block" id="CaseItem.add_link"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_link">[docs]</a>    <span class="k">def</span> <span class="nf">add_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a link to an item&#39;s list of links.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">link</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Link: &#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        

<div class="viewcode-block" id="CaseItem.add_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_links">[docs]</a>    <span class="k">def</span> <span class="nf">add_links</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">links_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a list of links to an item.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">links_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">links_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Links: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">links_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">links_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">links_list</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">+</span> <span class="n">links_list</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
        

<div class="viewcode-block" id="CaseItem.add_reference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_reference">[docs]</a>    <span class="k">def</span> <span class="nf">add_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reference</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a reference to an item&#39;s list of references.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">reference</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Reference: &#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">references</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        

<div class="viewcode-block" id="CaseItem.add_references"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_references">[docs]</a>    <span class="k">def</span> <span class="nf">add_references</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">references_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds list of references to an item.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">references_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">references_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;References: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">references_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">references_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">references_list</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">references</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">references</span> <span class="o">+</span> <span class="n">references_list</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
    
<div class="viewcode-block" id="CaseItem.add_content"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_content">[docs]</a>    <span class="k">def</span> <span class="nf">add_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a content entry to an item&#39;s list of contents.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">content</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Content: &#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">contains</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.add_contents"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_contents">[docs]</a>    <span class="k">def</span> <span class="nf">add_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content_list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds list of contents to an item.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">content_list</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">content_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Contents: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">content_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">content_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">content_list</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">+</span> <span class="n">content_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
        
<div class="viewcode-block" id="CaseItem.add_pdf_data"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.add_pdf_data">[docs]</a>    <span class="k">def</span> <span class="nf">add_pdf_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads PDF file and adds to item data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Reading and parsing PDF file</span>
        <span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">read_pdf</span><span class="p">(</span><span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="p">)</span>
        
        <span class="c1"># Adding data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="n">index_pos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;PDF&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;full_text&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;full_text&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;full_text&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;links&#39;</span><span class="p">]</span></div>
    

    <span class="c1"># Methods for creating or updating an item from other variables</span>
    
<div class="viewcode-block" id="CaseItem.from_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.from_dict">[docs]</a>    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_dict</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates CaseItem from dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="s1">&#39;data&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;information&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;metadata&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;other&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;whois&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;links&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;references&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;contains&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;keywords&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;user_assessments&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
           <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;JSON does not contain any of the necessary fields: &quot;data&quot;, &quot;metadata&quot;, &quot;information&quot;, &quot;other&quot;, &quot;whois&quot;, &quot;links&quot;, &quot;references&quot;, &quot;contains&quot;, &quot;keywords&quot;, or &quot;user_assessments&quot;&#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;information&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">information</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;information&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">][</span><span class="s1">&#39;links&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">references</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">][</span><span class="s1">&#39;references&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">][</span><span class="s1">&#39;contains&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;whois&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">whois</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;whois&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;links&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;links&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;references&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">references</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;references&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;contains&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;contains&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>  
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;user_assessments&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">user_assessments</span> <span class="o">=</span> <span class="n">item_dict</span><span class="p">[</span><span class="s1">&#39;user_assessments&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        

    <span class="c1"># Methods for importing files and adding to item</span>
    
<div class="viewcode-block" id="CaseItem.import_json"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.import_json">[docs]</a>    <span class="k">def</span> <span class="nf">import_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates CaseItem from JSON file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">item_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">item_dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">source_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span>
        <span class="n">target_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">item_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;item_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">item_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;item_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.import_metadata_csv"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.import_metadata_csv">[docs]</a>    <span class="k">def</span> <span class="nf">import_metadata_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds metadata from CSV file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_address</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>  
        
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="o">!=</span> <span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;CSV columns are incorrect. The CSV should be formatted as: &quot;Metadata&quot;, &quot;Category&quot;&#39;</span><span class="p">)</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span> <span class="n">df</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">path_obj</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">source_path</span> <span class="o">=</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;__&#39;</span> <span class="o">+</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">target_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">metadata_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;metadata_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">metadata_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;metadata_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
    
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="CaseItem.import_data_csv"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.import_data_csv">[docs]</a>    <span class="k">def</span> <span class="nf">import_data_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds data from CSV file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_address</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>  
        
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="o">!=</span> <span class="p">[</span><span class="s2">&quot;Datatype&quot;</span><span class="p">,</span> <span class="s2">&quot;Format&quot;</span><span class="p">,</span> <span class="s2">&quot;Stored as&quot;</span><span class="p">,</span> <span class="s2">&quot;Size (bytes)&quot;</span><span class="p">,</span> <span class="s2">&quot;Raw data&quot;</span><span class="p">,</span> <span class="s2">&quot;Parsed data&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;CSV columns are incorrect. The CSV should be formatted as: &quot;Datatype&quot;, &quot;Format&quot;, &quot;Stored as&quot;, &quot;Size (bytes)&quot;, &quot;Raw data&quot;, &quot;Parsed data&quot;&#39;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">df</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">path_obj</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">source_path</span> <span class="o">=</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;__&#39;</span> <span class="o">+</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">target_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">data_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;data_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">data_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;data_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.import_info_csv"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.import_info_csv">[docs]</a>    <span class="k">def</span> <span class="nf">import_info_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds information from CSV file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_address</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>  
        
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="o">!=</span> <span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;CSV columns are incorrect. The CSV should be formatted as: &quot;Label&quot;, &quot;Category&quot;&#39;</span><span class="p">)</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">,</span> <span class="n">df</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">path_obj</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">source_path</span> <span class="o">=</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;__&#39;</span> <span class="o">+</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">target_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">info_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;info_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">info_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;info_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
        
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="CaseItem.import_other_csv"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.import_other_csv">[docs]</a>    <span class="k">def</span> <span class="nf">import_other_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds links, references, and contents from CSV file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_address</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">:</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>  
        
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="o">!=</span> <span class="p">[</span><span class="s1">&#39;links&#39;</span><span class="p">,</span> <span class="s1">&#39;references&#39;</span><span class="p">,</span> <span class="s1">&#39;contents&#39;</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;CSV columns are incorrect. The CSV should be formatted as: &quot;links&quot;, &quot;references&quot;, &quot;contents&quot;, &quot;other&quot;&#39;</span><span class="p">)</span>
    
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;links&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">references</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;references&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;contents&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kc">None</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">path_obj</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span>
        <span class="n">source_path</span> <span class="o">=</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;__&#39;</span> <span class="o">+</span> <span class="n">path_obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">target_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_name</span> <span class="o">+</span> <span class="s1">&#39;.links&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">other_source</span> <span class="o">=</span> <span class="n">SourceFileOf</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;other_source&#39;</span><span class="p">,</span> 
                                                                    <span class="n">source_obj_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="p">,</span>
                                                                  <span class="n">target_obj_path</span> <span class="o">=</span> <span class="n">target_path</span><span class="p">,</span>
                                                                <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">relations</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.import_item_csvs"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.import_item_csvs">[docs]</a>    <span class="k">def</span> <span class="nf">import_item_csvs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds data, metadata, information, links, references, and contents from folder of CSV files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
        
        <span class="n">metadata_address</span> <span class="o">=</span> <span class="n">folder_address</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="s1">&#39;metadata.csv&#39;</span>
        <span class="n">info_address</span> <span class="o">=</span> <span class="n">folder_address</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="s1">&#39;information.csv&#39;</span>
        <span class="n">data_address</span> <span class="o">=</span> <span class="n">folder_address</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="s1">&#39;data.csv&#39;</span>
        <span class="n">other_address</span> <span class="o">=</span> <span class="n">folder_address</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="s1">&#39;other.csv&#39;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">import_metadata_csv</span><span class="p">(</span><span class="n">file_address</span> <span class="o">=</span> <span class="n">metadata_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">metadata_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_data_csv</span><span class="p">(</span><span class="n">file_address</span> <span class="o">=</span> <span class="n">data_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">data_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_info_csv</span><span class="p">(</span><span class="n">file_address</span> <span class="o">=</span> <span class="n">info_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">info_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_other_csv</span><span class="p">(</span><span class="n">file_address</span> <span class="o">=</span> <span class="n">other_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span><span class="n">other_address</span><span class="p">)</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        

    <span class="c1"># Methods for exporting data from item</span>
    
<div class="viewcode-block" id="CaseItem.export_txt"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.export_txt">[docs]</a>    <span class="k">def</span> <span class="nf">export_txt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_file</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports item as pickled .txt file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">new_file</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">file_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File name: &#39;</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">file_name</span>
            
        <span class="k">if</span> <span class="n">new_file</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File path: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="s1">&#39;.case_item&#39;</span> <span class="o">!=</span> <span class="n">file_address</span><span class="p">[</span><span class="o">-</span><span class="mi">9</span><span class="p">:]:</span>
            <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span> <span class="o">+</span> <span class="s1">&#39;.case_item&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_address</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> </div>


<div class="viewcode-block" id="CaseItem.export_excel"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.export_excel">[docs]</a>    <span class="k">def</span> <span class="nf">export_excel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_file</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports item as Excel (.xlsx) file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">new_file</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">file_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File name: &#39;</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">file_name</span>
            
        <span class="k">if</span> <span class="n">new_file</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File path: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="s1">&#39;.xlsx&#39;</span> <span class="o">!=</span> <span class="n">file_address</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]:</span>
            <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span> <span class="o">+</span> <span class="s1">&#39;.xlsx&#39;</span>
        
        <span class="n">metadata_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">join_df_col_lists_by_semicolon</span><span class="p">(</span><span class="n">metadata_df</span><span class="p">)</span>

        <span class="n">info_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">join_df_col_lists_by_semicolon</span><span class="p">(</span><span class="n">info_df</span><span class="p">)</span>

        <span class="n">data_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">join_df_col_lists_by_semicolon</span><span class="p">(</span><span class="n">data_df</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">whois_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">whois</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">join_df_col_lists_by_semicolon</span><span class="p">(</span><span class="n">whois_df</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        
<span class="c1">#         links_df = self.links.astype(str).replace(&#39;NaT&#39;, None).replace(&#39;None&#39;, None)</span>
<span class="c1">#         join_df_col_lists_by_semicolon(links_df)</span>
        
<span class="c1">#         refs_df = self.references.astype(str).replace(&#39;NaT&#39;, None).replace(&#39;None&#39;, None)</span>
<span class="c1">#         join_df_col_lists_by_semicolon(refs_df)</span>
        
<span class="c1">#         contents_df = self.contains.astype(str).replace(&#39;NaT&#39;, None).replace(&#39;None&#39;, None)</span>
<span class="c1">#         join_df_col_lists_by_semicolon(contents_df)</span>
        
<span class="c1">#         assessments_df = self.user_assessments.astype(str).replace(&#39;NaT&#39;, None).replace(&#39;None&#39;, None)</span>
<span class="c1">#         join_df_col_lists_by_semicolon(assessments_df)</span>

        
        <span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="n">file_address</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>  
            
            <span class="n">metadata_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Metadata&#39;</span><span class="p">)</span>
            <span class="n">data_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Data&#39;</span><span class="p">)</span>
            <span class="n">info_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Information&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">whois_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;WhoIs&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span></div>
            
<span class="c1">#             links_df.to_excel(writer, sheet_name=&#39;Links&#39;)</span>
<span class="c1">#             refs_df.to_excel(writer, sheet_name=&#39;References&#39;)</span>
<span class="c1">#             contents_df.to_excel(writer, sheet_name=&#39;Contents&#39;)</span>
<span class="c1">#             assessments_df.to_excel(writer, sheet_name=&#39;User assessments&#39;)</span>


<div class="viewcode-block" id="CaseItem.export_csv_folder"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.export_csv_folder">[docs]</a>    <span class="k">def</span> <span class="nf">export_csv_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">folder_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports item as a folder of CSV files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">metadata_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">join_df_col_lists_by_semicolon</span><span class="p">(</span><span class="n">metadata_df</span><span class="p">)</span>

        <span class="n">info_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">join_df_col_lists_by_semicolon</span><span class="p">(</span><span class="n">info_df</span><span class="p">)</span>

        <span class="n">data_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">join_df_col_lists_by_semicolon</span><span class="p">(</span><span class="n">data_df</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">whois_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">whois</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">join_df_col_lists_by_semicolon</span><span class="p">(</span><span class="n">whois_df</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">whois_df</span> <span class="o">=</span> <span class="kc">None</span>
        
<span class="c1">#         links_df = self.links.astype(str).replace(&#39;NaT&#39;, None).replace(&#39;None&#39;, None)</span>
<span class="c1">#         join_df_col_lists_by_semicolon(links_df)</span>
        
<span class="c1">#         refs_df = self.references.astype(str).replace(&#39;NaT&#39;, None).replace(&#39;None&#39;, None)</span>
<span class="c1">#         join_df_col_lists_by_semicolon(refs_df)</span>
        
<span class="c1">#         contents_df = self.contains.astype(str).replace(&#39;NaT&#39;, None).replace(&#39;None&#39;, None)</span>
<span class="c1">#         join_df_col_lists_by_semicolon(contents_df)</span>
        
<span class="c1">#         assessments_df = self.user_assessments.astype(str).replace(&#39;NaT&#39;, None).replace(&#39;None&#39;, None)</span>
<span class="c1">#         join_df_col_lists_by_semicolon(assessments_df)</span>
    
        <span class="n">dfs_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;item_metadata&#39;</span><span class="p">:</span> <span class="n">metadata_df</span><span class="p">,</span>
                    <span class="s1">&#39;item_data&#39;</span><span class="p">:</span> <span class="n">data_df</span><span class="p">,</span> 
                    <span class="s1">&#39;item_information&#39;</span><span class="p">:</span> <span class="n">info_df</span><span class="p">,</span>
                    <span class="s1">&#39;item_whois&#39;</span><span class="p">:</span> <span class="n">whois_df</span>
<span class="c1">#                     &#39;Links&#39;: links_df,</span>
<span class="c1">#                     &#39;References&#39;: refs_df,</span>
<span class="c1">#                     &#39;Contents&#39;: contents_df,</span>
<span class="c1">#                     &#39;User assessments&#39;: assessments_df</span>
                    <span class="p">}</span>
        
        <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder address: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">folder_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">folder_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder name: &#39;</span><span class="p">)</span>
        
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_address</span><span class="p">,</span> <span class="n">folder_name</span><span class="p">)</span> 
        
        <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> 

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">dfs_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">item</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">dfs_dict</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span></div>
          
<div class="viewcode-block" id="CaseItem.save_as"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.save_as">[docs]</a>    <span class="k">def</span> <span class="nf">save_as</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports item as a file type selected by user.</span>
<span class="sd">        </span>
<span class="sd">        File type options:</span>
<span class="sd">            * case</span>
<span class="sd">            * txt</span>
<span class="sd">            * pickle</span>
<span class="sd">            * xlsx</span>
<span class="sd">            * csv</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">file_type</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File type: &#39;</span><span class="p">)</span>
        
        <span class="n">file_type</span> <span class="o">=</span> <span class="n">file_type</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        
        <span class="k">if</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;case&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;txt&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;pickle&#39;</span><span class="p">):</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">export_txt</span><span class="p">(</span><span class="n">new_file</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span><span class="p">)</span>
        
        
        <span class="k">if</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;excel&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;xlsx&#39;</span><span class="p">):</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">export_excel</span><span class="p">(</span><span class="n">new_file</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span><span class="p">)</span>
        
        
        <span class="k">if</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;csv&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;csvs&#39;</span><span class="p">):</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">export_csv_folder</span><span class="p">(</span><span class="n">folder_address</span> <span class="o">=</span> <span class="n">file_address</span><span class="p">,</span> <span class="n">folder_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="p">)</span></div>

            

    <span class="c1"># Methods for deleting data from item</span>
    
<div class="viewcode-block" id="CaseItem.delete_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">delete_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;metadata&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.delete_metadata_by_category"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_metadata_by_category">[docs]</a>    <span class="k">def</span> <span class="nf">delete_metadata_by_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item metadata in an inputted category.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Category to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">category</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">indexes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.delete_data"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_data">[docs]</a>    <span class="k">def</span> <span class="nf">delete_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.delete_data_by_datatype"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_data_by_datatype">[docs]</a>    <span class="k">def</span> <span class="nf">delete_data_by_datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datatype</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item data of an inputted datatype.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">datatype</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Datatype to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">datatype</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">indexes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.delete_data_by_format"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_data_by_format">[docs]</a>    <span class="k">def</span> <span class="nf">delete_data_by_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_format</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item data of an inputted format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">data_format</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">data_format</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Format to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">data_format</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">indexes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.delete_rawdata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_rawdata">[docs]</a>    <span class="k">def</span> <span class="nf">delete_rawdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rawdata</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item rawdata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">rawdata</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">rawdata</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Raw data to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">rawdata</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">indexes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.delete_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_info">[docs]</a>    <span class="k">def</span> <span class="nf">delete_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;information&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">information</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.delete_info_by_category"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_info_by_category">[docs]</a>    <span class="k">def</span> <span class="nf">delete_info_by_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item informatiion in an inputted category.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Category to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">category</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">information</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">indexes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItem.delete_info_by_label"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.delete_info_by_label">[docs]</a>    <span class="k">def</span> <span class="nf">delete_info_by_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item information with a specific label.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Labels to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">label</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">information</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">indexes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    

<div class="viewcode-block" id="CaseItem.clear"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itemset</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">case</span> <span class="o">=</span> <span class="s1">&#39;default_case&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all item attributes and returns a new item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():</span>
            <span class="n">is_global</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">del</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">item_id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">is_global</span> <span class="o">=</span> <span class="kc">False</span>
            
        <span class="n">new_item</span> <span class="o">=</span> <span class="n">CaseItem</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">():</span>
            <span class="n">is_local</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">del</span> <span class="nb">locals</span><span class="p">()[</span><span class="n">item_id</span><span class="p">]</span>
            <span class="nb">locals</span><span class="p">()[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_item</span>
        
        <span class="k">if</span> <span class="n">itemset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">itemset</span> <span class="o">==</span> <span class="n">CaseItemSet</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_itemset</span><span class="p">(</span><span class="n">itemset</span> <span class="o">=</span> <span class="n">itemset</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">itemset</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span>
            <span class="n">itemset</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">new_item</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">in_case</span><span class="p">(</span><span class="n">case</span> <span class="o">=</span> <span class="n">case</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">case</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span>
            <span class="k">case</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">new_item</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">is_global</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">del</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">item_id</span><span class="p">]</span>
            
        <span class="k">return</span> <span class="n">new_item</span></div>

    <span class="c1"># Methods for retrieving data from item</span>
    
<div class="viewcode-block" id="CaseItem.get_id"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_id</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_id</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;__&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_id</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_id</span></div>

<div class="viewcode-block" id="CaseItem.get_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>

        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_category</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">select_by_category</span><span class="p">:</span>
                <span class="n">masked</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">masked</span><span class="p">,</span> <span class="n">output</span><span class="p">])</span>
            
            <span class="n">df</span> <span class="o">=</span> <span class="n">output</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItem.get_geolocation_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_geolocation_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_geolocation_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s geolocation metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>

        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;location&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;region&#39;</span><span class="p">)]</span>
        
        <span class="k">return</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]]</span></div>

    
<div class="viewcode-block" id="CaseItem.get_metadata_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_metadata_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s metadata as a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span>
        
        <span class="n">output_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="n">output_dict</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">entry</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">entry</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
            
        <span class="k">return</span> <span class="n">output_dict</span></div>
    
    
<div class="viewcode-block" id="CaseItem.get_metadata_series"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_metadata_series">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s metadata as a Pandas series.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="n">metadata_series</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">metadata_series</span></div>
    
    
<div class="viewcode-block" id="CaseItem.get_metadata_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_metadata_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s metadata as a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">))</span></div>
    

<div class="viewcode-block" id="CaseItem.get_metadata_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_metadata_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s metadata as a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="CaseItem.created_at"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.created_at">[docs]</a>    <span class="k">def</span> <span class="nf">created_at</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s created at metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.uploaded_at"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.uploaded_at">[docs]</a>    <span class="k">def</span> <span class="nf">uploaded_at</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s uploaded at metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;uploaded_at&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="CaseItem.last_changed_at"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.last_changed_at">[docs]</a>    <span class="k">def</span> <span class="nf">last_changed_at</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s last changed at metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;last_changed_at&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.get_time_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_time_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_time_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all time metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">created_at</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">uploaded_at</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_changed_at</span><span class="p">()])</span></div>
    
    
<div class="viewcode-block" id="CaseItem.get_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span>

        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_category</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">select_by_category</span><span class="p">:</span>
                <span class="n">masked</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">masked</span><span class="p">,</span> <span class="n">output</span><span class="p">])</span>
            
            <span class="n">df</span> <span class="o">=</span> <span class="n">output</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItem.get_info_series"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_info_series">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s information as a Pandas series.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="CaseItem.get_info_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_info_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s information as a list of tuples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.get_info_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_info_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s information as a set of tuples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_info_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span></div>
    
<div class="viewcode-block" id="CaseItem.get_info_categories"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_info_categories">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_categories</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all information categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="CaseItem.get_info_categories_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_info_categories_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_categories_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all information categories as a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.get_info_categories_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_info_categories_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_categories_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all information categories as a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">])</span></div>
    
    
<div class="viewcode-block" id="CaseItem.get_data"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">select_by_format</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">data</span>

        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_type</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">select_by_type</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_type</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_type</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">select_by_type</span><span class="p">:</span>
                <span class="n">masked</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">masked</span><span class="p">,</span> <span class="n">output</span><span class="p">])</span>
            
            <span class="n">df</span> <span class="o">=</span> <span class="n">output</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_format</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">select_by_format</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_format</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_format</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">select_by_format</span><span class="p">:</span>
                <span class="n">masked</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">masked</span><span class="p">,</span> <span class="n">output</span><span class="p">])</span>
            
            <span class="n">df</span> <span class="o">=</span> <span class="n">output</span>
        
        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItem.get_rawdata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_rawdata">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all raw data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="CaseItem.get_rawdata_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_rawdata_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all raw data as a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rawdata</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.get_rawdata_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_rawdata_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all raw data as a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rawdata</span><span class="p">())</span></div>
    
<div class="viewcode-block" id="CaseItem.get_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_links">[docs]</a>    <span class="k">def</span> <span class="nf">get_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s links.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span></div>
    
<div class="viewcode-block" id="CaseItem.get_links_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_links_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s links as a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.get_refs"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_refs">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s references.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">references</span></div>
    
<div class="viewcode-block" id="CaseItem.get_refs_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_refs_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s references as a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">references</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">references</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.get_contents"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_contents">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s contents.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains</span></div>
    
<div class="viewcode-block" id="CaseItem.get_contents_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_contents_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s contents as a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contains</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.get_address"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_address">[docs]</a>    <span class="k">def</span> <span class="nf">get_address</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns address metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;Address&#39;</span><span class="p">,</span> <span class="s1">&#39;ADDRESS&#39;</span><span class="p">],</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
        
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>
    
    
<div class="viewcode-block" id="CaseItem.get_url"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_url">[docs]</a>    <span class="k">def</span> <span class="nf">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns URL metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;URL&#39;</span><span class="p">],</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>

        <span class="n">result_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="k">return</span> <span class="n">result</span></div>

    
<div class="viewcode-block" id="CaseItem.get_coordinates_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_coordinates_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_coordinates_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns coordinates metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>
        
        <span class="n">series</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">][</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">series</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">series</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseItem.get_location_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_location_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_location_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns location metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>
        
        <span class="n">series</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;location&#39;</span><span class="p">][</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">series</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">series</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseItem.get_ip_address_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_ip_address_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_ip_address_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns IP address metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>
        
        <span class="n">series</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ip_address&#39;</span><span class="p">][</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">series</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">series</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
    <span class="c1"># Methods for searching item data</span>
    
<div class="viewcode-block" id="CaseItem.search_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.search_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">search_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches metadata for inputted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">metadata_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        <span class="n">category_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">metadata_result</span><span class="p">,</span> <span class="n">category_result</span><span class="p">])</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">result</span></div>
    
<div class="viewcode-block" id="CaseItem.search_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.search_info">[docs]</a>    <span class="k">def</span> <span class="nf">search_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches information for inputted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">labels_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        <span class="n">category_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">labels_result</span><span class="p">,</span> <span class="n">category_result</span><span class="p">])</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">result</span></div>
    
<div class="viewcode-block" id="CaseItem.search_data"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.search_data">[docs]</a>    <span class="k">def</span> <span class="nf">search_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches data for inputted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
            
        <span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        
        <span class="k">def</span> <span class="nf">df_to_str</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">df_to_str</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        
        <span class="n">datatypes_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        <span class="n">formats_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        <span class="n">rawdata_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        <span class="n">parsed_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">datatypes_result</span><span class="p">,</span> <span class="n">formats_result</span><span class="p">,</span> <span class="n">rawdata_result</span><span class="p">,</span> <span class="n">parsed_result</span><span class="p">])</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">result</span></div>
    
    
<div class="viewcode-block" id="CaseItem.search_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.search_links">[docs]</a>    <span class="k">def</span> <span class="nf">search_links</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches links for inputted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
            
        <span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">all_links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span>
        
        
        <span class="k">if</span> <span class="n">all_links</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">all_links</span> <span class="k">if</span> <span class="n">search_query</span> <span class="ow">in</span> <span class="n">i</span><span class="p">]</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">No links found&#39;</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.search_refs"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.search_refs">[docs]</a>    <span class="k">def</span> <span class="nf">search_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches references for inputted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
            
        <span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">all_refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">references</span>
        
        
        <span class="k">if</span> <span class="n">all_refs</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">all_refs</span> <span class="k">if</span> <span class="n">search_query</span> <span class="ow">in</span> <span class="n">i</span><span class="p">]</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">No references found&#39;</span><span class="p">)</span></div>
        
        
<div class="viewcode-block" id="CaseItem.search_contents"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.search_contents">[docs]</a>    <span class="k">def</span> <span class="nf">search_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches contents for inputted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
            
        <span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">all_contents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains</span>
        
        <span class="k">if</span> <span class="n">all_contents</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">all_contents</span> <span class="k">if</span> <span class="n">search_query</span> <span class="ow">in</span> <span class="n">i</span><span class="p">]</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">No contents found&#39;</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.search"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.search">[docs]</a>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches item for inputted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
            
        <span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">metadata_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_metadata</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span>
        <span class="n">metadata_res</span> <span class="o">=</span> <span class="n">metadata_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;metadata&#39;</span>
        
        <span class="n">info_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_info</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span>
        <span class="n">info_res</span> <span class="o">=</span> <span class="n">info_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;information&#39;</span>
        <span class="n">info_res</span> <span class="o">=</span> <span class="n">info_res</span><span class="p">[[</span><span class="s1">&#39;Result&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]]</span>
        
        <span class="n">data_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_data</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Raw data: &#39;</span> <span class="o">+</span>  <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, Parsed data: &#39;</span> <span class="o">+</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span>   
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; (format: &#39;</span> <span class="o">+</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
        <span class="n">data_res</span> <span class="o">=</span> <span class="n">data_res</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Datatype&#39;</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>
        
        <span class="n">links_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_links</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">links_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">])</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">links_list</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;link&#39;</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;links&#39;</span>
        
        <span class="n">refs_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_refs</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">refs_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">])</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">refs_list</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reference&#39;</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;references&#39;</span>
        
        <span class="n">contents_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_contents</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">contents_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">])</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contents_list</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;content&#39;</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;contents&#39;</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">metadata_res</span><span class="p">,</span> <span class="n">data_res</span><span class="p">,</span> <span class="n">info_res</span><span class="p">,</span> <span class="n">links_res</span><span class="p">,</span> <span class="n">refs_res</span><span class="p">,</span> <span class="n">contents_res</span><span class="p">])</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[[</span><span class="s1">&#39;Result&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]]</span>
        
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>
    
    
    <span class="c1"># Methods for raw data and handling the results</span>
    
<div class="viewcode-block" id="CaseItem.parse_rawdata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.parse_rawdata">[docs]</a>    <span class="k">def</span> <span class="nf">parse_rawdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">append_to_item</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses item&#39;s rawdata. Adds to data set by default.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        append_to_item : bool</span>
<span class="sd">            whether to add parsed data to item data set.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : list or pandas.Series</span>
<span class="sd">            parsed data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">parsed_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
            <span class="n">datatype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Datatype&#39;</span><span class="p">]</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">]</span>
            <span class="n">parsed</span> <span class="o">=</span> <span class="n">parse_data</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="n">ignore_case</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">parsed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parsed</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">append_to_item</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parsed_list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">parsed_list</span></div>
    
    
<div class="viewcode-block" id="CaseItem.extract_links_from_html"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.extract_links_from_html">[docs]</a>    <span class="k">def</span> <span class="nf">extract_links_from_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">append_to_item</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts links from HTML data. Adds to data set by default.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        append_to_item : bool</span>
<span class="sd">            whether to add extracted links to item data set.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        extracted_links : list</span>
<span class="sd">            extracted links.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="s1">&#39;html&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">():</span>

            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">]</span>
            <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
            <span class="n">href_select</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>
            <span class="n">current_url</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;url&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
            <span class="n">extracted_links</span> <span class="o">=</span> <span class="p">[</span><span class="n">correct_link_errors</span><span class="p">(</span><span class="n">source_domain</span> <span class="o">=</span> <span class="n">current_url</span><span class="p">,</span> <span class="n">url</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">href_select</span> <span class="k">if</span> <span class="s1">&#39;href&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">attrs</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">append_to_item</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>

                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">)</span> <span class="o">!=</span> <span class="n">List</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
                
                <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">+</span> <span class="n">extracted_links</span>

            <span class="k">return</span> <span class="n">extracted_links</span></div>
            


<div class="viewcode-block" id="CaseItem.data_entry_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.data_entry_words">[docs]</a>    <span class="k">def</span> <span class="nf">data_entry_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves words from parsed data entry. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        index_pos : int</span>
<span class="sd">            dataframe index to retrieve text from.</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        words_list : list</span>
<span class="sd">            list of words.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">index_pos</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Data entry does not exist&#39;</span><span class="p">)</span>
        
        <span class="n">parsed_rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parsed_rows</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_rawdata</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="s1">&#39;words&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            
            <span class="n">words_list</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index_pos</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">][</span><span class="s1">&#39;words&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">clean</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">words_list</span> <span class="o">=</span> <span class="n">html_words_cleaner</span><span class="p">(</span><span class="n">words_list</span><span class="p">)</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">words_list</span> <span class="o">=</span> <span class="p">[]</span>
        
        
        <span class="k">return</span> <span class="n">words_list</span></div>
    
    
<div class="viewcode-block" id="CaseItem.data_entry_word_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.data_entry_word_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">data_entry_word_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns word frequencies from parsed data entry. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        index_pos : int</span>
<span class="sd">            dataframe index to retrieve text from.</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.Series</span>
<span class="sd">            words sorted by frequency.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">words_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_entry_words</span><span class="p">(</span><span class="n">index_pos</span> <span class="o">=</span> <span class="n">index_pos</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">words_list</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="CaseItem.data_entry_word_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.data_entry_word_stats">[docs]</a>    <span class="k">def</span> <span class="nf">data_entry_word_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns word frequency statistics from parsed data entry. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        index_pos : int</span>
<span class="sd">            dataframe index to retrieve text from.</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.Series</span>
<span class="sd">            word frequency statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_entry_word_frequencies</span><span class="p">(</span><span class="n">index_pos</span> <span class="o">=</span> <span class="n">index_pos</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.data_entry_most_frequent_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.data_entry_most_frequent_words">[docs]</a>    <span class="k">def</span> <span class="nf">data_entry_most_frequent_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mi">15</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns most frequent words from parsed data entry. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        index_pos : int</span>
<span class="sd">            dataframe index to retrieve text from.</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text.</span>
<span class="sd">        top : int</span>
<span class="sd">            how many results to return</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.Series</span>
<span class="sd">            words sorted by frequency.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_entry_word_frequencies</span><span class="p">(</span><span class="n">index_pos</span> <span class="o">=</span> <span class="n">index_pos</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">number</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.get_all_text"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_all_text">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all parsed text from item. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : dict</span>
<span class="sd">            dictionary containing full text, sentences, and words.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">parsed_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">parsed_set</span><span class="o">==</span> <span class="p">{</span><span class="s1">&#39;None&#39;</span><span class="p">})</span> <span class="ow">or</span> <span class="p">(</span><span class="n">parsed_set</span><span class="o">==</span> <span class="p">{</span><span class="kc">None</span><span class="p">}):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_rawdata</span><span class="p">()</span>
        
        <span class="n">text_lol</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="p">((</span><span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;text&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">keys</span><span class="p">()))]</span>
        <span class="n">text_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">text_lol</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">text_list</span> <span class="o">=</span> <span class="n">text_list</span> <span class="o">+</span> <span class="n">i</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">text_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        
        <span class="n">text_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">text_list</span> <span class="k">if</span> <span class="p">(</span>
                                        <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span> 
                                        <span class="ow">and</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
                                        <span class="ow">and</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                                        <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                                        <span class="p">)]</span>
        
        <span class="n">sentences_lol</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;sentences&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="p">((</span><span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;sentences&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">keys</span><span class="p">()))]</span>
        <span class="n">sentences_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sentences_lol</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">sentences_list</span> <span class="o">=</span> <span class="n">sentences_list</span> <span class="o">+</span> <span class="n">i</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">sentences_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        
        <span class="n">sentences_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sentences_list</span> <span class="k">if</span> <span class="p">(</span>
                                        <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span> 
                                        <span class="ow">and</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
                                        <span class="ow">and</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                                        <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                                        <span class="p">)]</span>
        
        <span class="n">list_of_wordlists</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">i</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="p">(</span>
                                                                        <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> 
                                                                        <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">)</span> 
                                                                        <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;words&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                                                                        <span class="p">)</span>
                        <span class="p">]</span>
    
        <span class="n">words_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">list_of_wordlists</span><span class="p">:</span>
            <span class="n">words_list</span> <span class="o">=</span> <span class="n">words_list</span> <span class="o">+</span> <span class="n">i</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="n">text_list</span><span class="p">,</span> <span class="s1">&#39;sentences&#39;</span><span class="p">:</span> <span class="n">sentences_list</span><span class="p">,</span> <span class="s1">&#39;words&#39;</span><span class="p">:</span> <span class="n">words_list</span><span class="p">}</span>
        
        
        <span class="k">return</span> <span class="n">result</span></div>
    
    
<div class="viewcode-block" id="CaseItem.get_all_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_all_words">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all parsed words from item. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        words_list : list</span>
<span class="sd">            list of words.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">parsed_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">parsed_set</span><span class="o">==</span> <span class="p">{</span><span class="s1">&#39;None&#39;</span><span class="p">})</span> <span class="ow">or</span> <span class="p">(</span><span class="n">parsed_set</span><span class="o">==</span> <span class="p">{</span><span class="kc">None</span><span class="p">}):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_rawdata</span><span class="p">()</span>
            
        <span class="n">list_of_lists</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">i</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="p">(</span>
                                                                        <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> 
                                                                        <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">)</span> 
                                                                        <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;words&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                                                                        <span class="p">)</span>
                        <span class="p">]</span>
    
        <span class="n">words_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">list_of_lists</span><span class="p">:</span>
            <span class="n">words_list</span> <span class="o">=</span> <span class="n">words_list</span> <span class="o">+</span> <span class="n">i</span>
    
        <span class="k">return</span> <span class="n">words_list</span></div>
    
    

    <span class="c1"># Methods for retrieving word stats</span>
    
<div class="viewcode-block" id="CaseItem.get_word_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_word_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_word_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns word frequencies from item&#39;s data. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            dataframe of word frequencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">),</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;word&#39;</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
    
<div class="viewcode-block" id="CaseItem.get_word_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_word_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_word_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns word frequency statistics from item&#39;s data. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            dataframe of word frequencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_frequencies</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItem.get_most_frequent_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_most_frequent_words">[docs]</a>    <span class="k">def</span> <span class="nf">get_most_frequent_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mi">15</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns most frequent words from item&#39;s data. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text.</span>
<span class="sd">        top : int</span>
<span class="sd">            how many results to return.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            dataframe of word frequencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_frequencies</span><span class="p">(</span><span class="n">clean</span><span class="o">=</span><span class="n">clean</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">top</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.get_words_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_words_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_words_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item&#39;s words with repeats removed. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : set</span>
<span class="sd">            set of words.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">))</span></div>
    
    <span class="c1"># Methods for extracting information from raw text and adding it to info set</span>
    
<div class="viewcode-block" id="CaseItem.extract_names"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.extract_names">[docs]</a>    <span class="k">def</span> <span class="nf">extract_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names_source</span> <span class="o">=</span> <span class="s1">&#39;all_personal_names&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts names from text data. Uses list of all personal names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        names_source : str or list</span>
<span class="sd">            key for names corpus to use; or names corpus as list. Defaults to &#39;all_personal names&#39;.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        names : list</span>
<span class="sd">            extracted names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_rawdata</span><span class="p">()</span>
            <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>

        <span class="n">names</span> <span class="o">=</span> <span class="n">extract_names</span><span class="p">(</span><span class="n">words</span> <span class="o">=</span> <span class="n">words</span><span class="p">,</span> <span class="n">source</span> <span class="o">=</span> <span class="n">names_source</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">names</span></div>
    

<div class="viewcode-block" id="CaseItem.infer_names"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.infer_names">[docs]</a>    <span class="k">def</span> <span class="nf">infer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names_source</span> <span class="o">=</span> <span class="s1">&#39;all_personal_names&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies names from text data and adds to item information. Uses list of all personal names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        names_source : str or list</span>
<span class="sd">            key for names corpus to use; or names corpus as list. Defaults to &#39;all_personal names&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_names</span><span class="p">(</span><span class="n">names_source</span> <span class="o">=</span> <span class="n">names_source</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_info</span><span class="p">(</span><span class="n">info</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="n">info_category</span> <span class="o">=</span> <span class="s1">&#39;names&#39;</span><span class="p">,</span> <span class="n">suppress_warnings</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="CaseItem.extract_countries"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.extract_countries">[docs]</a>    <span class="k">def</span> <span class="nf">extract_countries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts country names from text data. Uses list of all country names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of country names corpus to use; or country names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        countries : list</span>
<span class="sd">            extracted country names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_rawdata</span><span class="p">()</span>
            <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>

        <span class="n">countries</span> <span class="o">=</span> <span class="n">extract_countries</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">countries</span></div>
    

<div class="viewcode-block" id="CaseItem.infer_countries"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.infer_countries">[docs]</a>    <span class="k">def</span> <span class="nf">infer_countries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies country names from text data and adds to item information. Uses list of all country names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of country names corpus to use; or country names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">countries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_countries</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">countries</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_info</span><span class="p">(</span><span class="n">info</span> <span class="o">=</span> <span class="n">c</span><span class="p">,</span> <span class="n">info_category</span> <span class="o">=</span> <span class="s1">&#39;countries&#39;</span><span class="p">,</span> <span class="n">suppress_warnings</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="CaseItem.extract_cities"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.extract_cities">[docs]</a>    <span class="k">def</span> <span class="nf">extract_cities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts city names from text data. Uses list of all city names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of city names corpus to use; or city names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cities : list</span>
<span class="sd">            extracted city names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_rawdata</span><span class="p">()</span>
            <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>

        <span class="n">cities</span> <span class="o">=</span> <span class="n">extract_cities</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cities</span></div>
    

<div class="viewcode-block" id="CaseItem.infer_cities"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.infer_cities">[docs]</a>    <span class="k">def</span> <span class="nf">infer_cities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies city names from text data and adds to item information. Uses list of all city names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of city names corpus to use; or city names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">cities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_cities</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cities</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_info</span><span class="p">(</span><span class="n">info</span> <span class="o">=</span> <span class="n">c</span><span class="p">,</span> <span class="n">info_category</span><span class="o">=</span> <span class="s1">&#39;cities&#39;</span><span class="p">,</span> <span class="n">suppress_warnings</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="CaseItem.extract_languages"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.extract_languages">[docs]</a>    <span class="k">def</span> <span class="nf">extract_languages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts language names from text data. Uses list of all language names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of language names corpus to use; or language names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        languages : list</span>
<span class="sd">            extracted language names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_rawdata</span><span class="p">()</span>
            <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>

        <span class="n">languages</span> <span class="o">=</span> <span class="n">extract_languages</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">languages</span></div>
    

<div class="viewcode-block" id="CaseItem.infer_languages"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.infer_languages">[docs]</a>    <span class="k">def</span> <span class="nf">infer_languages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies language names from text data and adds to item information. Uses list of all language names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of language names corpus to use; or language names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">languages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_languages</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_info</span><span class="p">(</span><span class="n">info</span> <span class="o">=</span> <span class="n">l</span><span class="p">,</span> <span class="n">info_category</span> <span class="o">=</span> <span class="s1">&#39;languages&#39;</span><span class="p">,</span> <span class="n">suppress_warnings</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></div>
    

    <span class="c1"># Methods for analysing time differences between item and other items</span>
    
<div class="viewcode-block" id="CaseItem.created_changed_time_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.created_changed_time_difference">[docs]</a>    <span class="k">def</span> <span class="nf">created_changed_time_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the time difference between date-time created and last changed.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        time_difference : datetime.timedelta</span>
<span class="sd">            time difference.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Item has no created date-time&#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;last_changed_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="n">dt1</span>
            
        <span class="k">return</span> <span class="n">time_difference</span><span class="p">(</span><span class="n">dt1</span><span class="p">,</span> <span class="n">dt2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItem.created_uploaded_time_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.created_uploaded_time_difference">[docs]</a>    <span class="k">def</span> <span class="nf">created_uploaded_time_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the time difference between date-time uploaded and last changed.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        time_difference : datetime.timedelta</span>
<span class="sd">            time difference.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Item has no created date-time&#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;uploaded_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="n">dt1</span>
            
        <span class="k">return</span> <span class="n">time_difference</span><span class="p">(</span><span class="n">dt1</span><span class="p">,</span> <span class="n">dt2</span><span class="p">)</span></div>
    
    

<div class="viewcode-block" id="CaseItem.plot_metadata_timeline"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.plot_metadata_timeline">[docs]</a>    <span class="k">def</span> <span class="nf">plot_metadata_timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;months&#39;</span><span class="p">,</span> <span class="n">intervals</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">date_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a plot of the item&#39;s date-time metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">plot</span> <span class="o">=</span> <span class="s1">&#39;metadata&#39;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        
        <span class="n">names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="n">dates</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        
        <span class="n">plot_timeline</span><span class="p">(</span><span class="n">dates</span> <span class="o">=</span> <span class="n">dates</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="n">names</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">plot</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">,</span> <span class="n">intervals</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">,</span> <span class="n">date_format</span> <span class="o">=</span> <span class="n">date_format</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">colour</span><span class="p">)</span></div>
        
    

    <span class="c1"># Methods for analysing distance between item and other items</span>
    
<div class="viewcode-block" id="CaseItem.coordinates_distance"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.coordinates_distance">[docs]</a>    <span class="k">def</span> <span class="nf">coordinates_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the geographic distance between item and another item using their coordinates.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item : CaseItem</span>
<span class="sd">            case item to compare with.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit for measurement.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        coordinates_distance : int</span>
<span class="sd">            distance in unit specified by user; defaults to &#39;kilometers&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">first_item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        <span class="n">first_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">first_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item_id</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>
        
        <span class="n">second_item_id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        <span class="n">second_coordinates</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">second_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item_id</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">coordinates_distance</span><span class="p">(</span><span class="n">first_coordinates</span><span class="p">,</span> <span class="n">second_coordinates</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItem.locations_distance"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.locations_distance">[docs]</a>    <span class="k">def</span> <span class="nf">locations_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the geographic distance between item and another item using their locations.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item : CaseItem</span>
<span class="sd">            case item to compare with.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit for measurement.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        coordinates_distance : int</span>
<span class="sd">            distance in unit specified by user; defaults to &#39;kilometers&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">first_item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        <span class="n">first_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">first_location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item_id</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>
        
        <span class="n">second_item_id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        <span class="n">second_location</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">second_location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item_id</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>
        
        <span class="n">first_coordinates</span> <span class="o">=</span> <span class="n">get_location_coordinates</span><span class="p">(</span><span class="n">first_location</span><span class="p">)</span>
        <span class="n">second_coordinates</span> <span class="o">=</span> <span class="n">get_location_coordinates</span><span class="p">(</span><span class="n">second_location</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">coordinates_distance</span><span class="p">(</span><span class="n">first_coordinates</span> <span class="o">=</span> <span class="n">first_coordinates</span><span class="p">,</span> <span class="n">second_coordinates</span> <span class="o">=</span> <span class="n">second_coordinates</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>

    

    <span class="c1"># Methods for web crawling and website analysis</span>
    
<div class="viewcode-block" id="CaseItem.crawl_web_from_url"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.crawl_web_from_url">[docs]</a>    <span class="k">def</span> <span class="nf">crawl_web_from_url</span><span class="p">(</span>
                            <span class="bp">self</span><span class="p">,</span>
                            <span class="n">visit_limit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> 
                            <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                            <span class="n">required_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">case_sensitive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                            <span class="n">ignore_urls</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">ignore_domains</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                            <span class="n">be_polite</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="n">full</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="n">output_as</span> <span class="o">=</span> <span class="s1">&#39;dataframe&#39;</span>
                            <span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs web crawl from item&#39;s URL metadata.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ---------- </span>
<span class="sd">        visit_limit : int</span>
<span class="sd">            how many URLs the crawler should visit before it stops.</span>
<span class="sd">        excluded_url_terms : list</span>
<span class="sd">            list of strings; link will be ignored if it contains any string in list.</span>
<span class="sd">        required_keywords : list</span>
<span class="sd">            list of keywords which sites must contain to be crawled.</span>
<span class="sd">        excluded_keywords : list</span>
<span class="sd">            list of keywords which sites must *not* contain to be crawled.</span>
<span class="sd">        case_sensitive : bool</span>
<span class="sd">            whether or not to ignore string characters&#39; case.</span>
<span class="sd">        ignore_urls : list</span>
<span class="sd">            list of URLs to ignore.</span>
<span class="sd">        ignore_domains : list</span>
<span class="sd">            list of domains to ignore.</span>
<span class="sd">        be_polite : bool</span>
<span class="sd">            whether respect websites&#39; permissions for crawlers.</span>
<span class="sd">        full : bool</span>
<span class="sd">            whether to run a full scrape on each site. This takes longer.</span>
<span class="sd">        output_as : str</span>
<span class="sd">            the format to output results in. Defaults to a pandas.DataFrame.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : object</span>
<span class="sd">            an object containing the results of a crawl.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">seed_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
        
        <span class="n">output</span> <span class="o">=</span> <span class="n">crawl_web</span><span class="p">(</span>
                            <span class="n">seed_urls</span> <span class="o">=</span> <span class="n">seed_url</span><span class="p">,</span>
                            <span class="n">visit_limit</span> <span class="o">=</span> <span class="n">visit_limit</span><span class="p">,</span> 
                            <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="n">excluded_url_terms</span><span class="p">,</span>
                            <span class="n">required_keywords</span> <span class="o">=</span> <span class="n">required_keywords</span><span class="p">,</span> 
                            <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="n">excluded_keywords</span><span class="p">,</span> 
                            <span class="n">case_sensitive</span> <span class="o">=</span> <span class="n">case_sensitive</span><span class="p">,</span>
                            <span class="n">ignore_urls</span> <span class="o">=</span> <span class="n">ignore_urls</span><span class="p">,</span> 
                            <span class="n">ignore_domains</span> <span class="o">=</span> <span class="n">ignore_domains</span><span class="p">,</span>
                            <span class="n">be_polite</span> <span class="o">=</span> <span class="n">be_polite</span><span class="p">,</span>
                            <span class="n">full</span> <span class="o">=</span> <span class="n">full</span><span class="p">,</span>
                            <span class="n">output_as</span> <span class="o">=</span> <span class="n">output_as</span>
                            <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">output</span></div>
    
<div class="viewcode-block" id="CaseItem.crawl_web"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.crawl_web">[docs]</a>    <span class="k">def</span> <span class="nf">crawl_web</span><span class="p">(</span>
                            <span class="bp">self</span><span class="p">,</span>
                            <span class="n">crawl_from</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span>
                            <span class="n">visit_limit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> 
                            <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                            <span class="n">required_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">case_sensitive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                            <span class="n">ignore_urls</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">ignore_domains</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                            <span class="n">be_polite</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="n">full</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="n">output_as</span> <span class="o">=</span> <span class="s1">&#39;dataframe&#39;</span>
                            <span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs web crawl from URL or list of URLs.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ---------- </span>
<span class="sd">        crawl_from : str or list</span>
<span class="sd">            one or more URLs from which to crawl. Defaults to requesting user input.</span>
<span class="sd">        visit_limit : int</span>
<span class="sd">            how many URLs the crawler should visit before it stops.</span>
<span class="sd">        excluded_url_terms : list</span>
<span class="sd">            list of strings; link will be ignored if it contains any string in list.</span>
<span class="sd">        required_keywords : list</span>
<span class="sd">            list of keywords which sites must contain to be crawled.</span>
<span class="sd">        excluded_keywords : list</span>
<span class="sd">            list of keywords which sites must *not* contain to be crawled.</span>
<span class="sd">        case_sensitive : bool</span>
<span class="sd">            whether or not to ignore string characters&#39; case.</span>
<span class="sd">        ignore_urls : list</span>
<span class="sd">            list of URLs to ignore.</span>
<span class="sd">        ignore_domains : list</span>
<span class="sd">            list of domains to ignore.</span>
<span class="sd">        be_polite : bool</span>
<span class="sd">            whether respect websites&#39; permissions for crawlers.</span>
<span class="sd">        full : bool</span>
<span class="sd">            whether to run a full scrape on each site. This takes longer.</span>
<span class="sd">        output_as : str</span>
<span class="sd">            the format to output results in. Defaults to a pandas.DataFrame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : object</span>
<span class="sd">            an object containing the results of a crawl.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">crawl_from</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">crawl_from</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Metadata entry to crawl from: &#39;</span><span class="p">)</span>
        
        <span class="n">seed_urls</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">crawl_from</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        
        <span class="n">output</span> <span class="o">=</span> <span class="n">crawl_web</span><span class="p">(</span>
                            <span class="n">seed_urls</span> <span class="o">=</span> <span class="n">seed_urls</span><span class="p">,</span>
                            <span class="n">visit_limit</span> <span class="o">=</span> <span class="n">visit_limit</span><span class="p">,</span> 
                            <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="n">excluded_url_terms</span><span class="p">,</span>
                            <span class="n">required_keywords</span> <span class="o">=</span> <span class="n">required_keywords</span><span class="p">,</span> 
                            <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="n">excluded_keywords</span><span class="p">,</span> 
                            <span class="n">case_sensitive</span> <span class="o">=</span> <span class="n">case_sensitive</span><span class="p">,</span>
                            <span class="n">ignore_urls</span> <span class="o">=</span> <span class="n">ignore_urls</span><span class="p">,</span> 
                            <span class="n">ignore_domains</span> <span class="o">=</span> <span class="n">ignore_domains</span><span class="p">,</span>
                            <span class="n">be_polite</span> <span class="o">=</span> <span class="n">be_polite</span><span class="p">,</span>
                            <span class="n">full</span> <span class="o">=</span> <span class="n">full</span><span class="p">,</span>
                            <span class="n">output_as</span> <span class="o">=</span> <span class="n">output_as</span>
                            <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">output</span></div>
    
    
<div class="viewcode-block" id="CaseItem.crawl_web_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.crawl_web_links">[docs]</a>    <span class="k">def</span> <span class="nf">crawl_web_links</span><span class="p">(</span>
                            <span class="bp">self</span><span class="p">,</span>
                            <span class="n">visit_limit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> 
                            <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                            <span class="n">required_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">case_sensitive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                            <span class="n">ignore_urls</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                            <span class="n">ignore_domains</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                            <span class="n">be_polite</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="n">full</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="n">output_as</span> <span class="o">=</span> <span class="s1">&#39;dataframe&#39;</span>
                            <span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs web crawl from item&#39;s links.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ---------- </span>
<span class="sd">        visit_limit : int</span>
<span class="sd">            how many URLs the crawler should visit before it stops.</span>
<span class="sd">        excluded_url_terms : list</span>
<span class="sd">            list of strings; link will be ignored if it contains any string in list.</span>
<span class="sd">        required_keywords : list</span>
<span class="sd">            list of keywords which sites must contain to be crawled.</span>
<span class="sd">        excluded_keywords : list</span>
<span class="sd">            list of keywords which sites must *not* contain to be crawled.</span>
<span class="sd">        case_sensitive : bool</span>
<span class="sd">            whether or not to ignore string characters&#39; case.</span>
<span class="sd">        ignore_urls : list</span>
<span class="sd">            list of URLs to ignore.</span>
<span class="sd">        ignore_domains : list</span>
<span class="sd">            list of domains to ignore.</span>
<span class="sd">        be_polite : bool</span>
<span class="sd">            whether respect websites&#39; permissions for crawlers.</span>
<span class="sd">        full : bool</span>
<span class="sd">            whether to run a full scrape on each site. This takes longer.</span>
<span class="sd">        output_as : str</span>
<span class="sd">            the format to output results in. Defaults to a pandas.DataFrame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : object</span>
<span class="sd">            an object containing the results of a crawl.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">seed_urls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span>
        
        <span class="n">output</span> <span class="o">=</span> <span class="n">crawl_web</span><span class="p">(</span>
                            <span class="n">seed_urls</span> <span class="o">=</span> <span class="n">seed_urls</span><span class="p">,</span>
                            <span class="n">visit_limit</span> <span class="o">=</span> <span class="n">visit_limit</span><span class="p">,</span> 
                            <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="n">excluded_url_terms</span><span class="p">,</span>
                            <span class="n">required_keywords</span> <span class="o">=</span> <span class="n">required_keywords</span><span class="p">,</span> 
                            <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="n">excluded_keywords</span><span class="p">,</span> 
                            <span class="n">case_sensitive</span> <span class="o">=</span> <span class="n">case_sensitive</span><span class="p">,</span>
                            <span class="n">ignore_urls</span> <span class="o">=</span> <span class="n">ignore_urls</span><span class="p">,</span> 
                            <span class="n">ignore_domains</span> <span class="o">=</span> <span class="n">ignore_domains</span><span class="p">,</span>
                            <span class="n">be_polite</span> <span class="o">=</span> <span class="n">be_polite</span><span class="p">,</span>
                            <span class="n">full</span> <span class="o">=</span> <span class="n">full</span><span class="p">,</span>
                            <span class="n">output_as</span> <span class="o">=</span> <span class="n">output_as</span>
                            <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">output</span></div>
    
    
<div class="viewcode-block" id="CaseItem.fetch_sitemap"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.fetch_sitemap">[docs]</a>    <span class="k">def</span> <span class="nf">fetch_sitemap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches item URL&#39;s sitemap.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : list</span>
<span class="sd">            list of fetched URLs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">fetch_sitemap</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.crawl_site_contents"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.crawl_site_contents">[docs]</a>    <span class="k">def</span> <span class="nf">crawl_site_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs internal site crawl on item&#39;s URL metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">crawl_site</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>
    
    
    
<div class="viewcode-block" id="CaseItem.fetch_site_contents"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.fetch_site_contents">[docs]</a>    <span class="k">def</span> <span class="nf">fetch_site_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">append_to_item</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches list of item URL&#39;s website contents.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        append_to_item : bool</span>
<span class="sd">            whether to append to item&#39;s contents set.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        contents : list</span>
<span class="sd">            list of URLs contained by website.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;http://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;www.&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        
        <span class="n">site_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_sitemap</span><span class="p">()</span>
        <span class="n">site_map_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">site_map</span><span class="p">)</span>
        
        <span class="n">site_crawl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crawl_site_contents</span><span class="p">()</span>
        <span class="n">site_crawl_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">site_crawl</span><span class="p">)</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                        <span class="n">site_map_set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">site_crawl_set</span><span class="p">)</span>
                        <span class="p">)</span>
        
        <span class="n">contents</span> <span class="o">=</span> <span class="p">[</span><span class="n">link</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">result</span> <span class="k">if</span> <span class="p">(</span><span class="n">source</span> <span class="ow">in</span> <span class="n">link</span><span class="p">)]</span>
        
        <span class="k">if</span> <span class="n">append_to_item</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">contents</span> <span class="o">=</span> <span class="n">contents</span>
        
        <span class="k">return</span> <span class="n">contents</span></div>
        
<div class="viewcode-block" id="CaseItem.fix_links_str"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.fix_links_str">[docs]</a>    <span class="k">def</span> <span class="nf">fix_links_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if item links are stored as a string; if yes, converts to a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">links</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">links</span> <span class="o">=</span> <span class="n">links</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">links</span></div>
    
    
<div class="viewcode-block" id="CaseItem.scrape_url"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.scrape_url">[docs]</a>    <span class="k">def</span> <span class="nf">scrape_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Scrapes data from item URL&#39;s site.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result</span>
<span class="sd">            site data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">scrape_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItem.scrape_url_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.scrape_url_links">[docs]</a>    <span class="k">def</span> <span class="nf">scrape_url_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Scrapes links from item URL&#39;s site.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        links : list</span>
<span class="sd">            list of links.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
        <span class="n">links</span> <span class="o">=</span> <span class="n">scrape_url_links</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">links</span></div>
    
    
<div class="viewcode-block" id="CaseItem.extract_links_from_source"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.extract_links_from_source">[docs]</a>    <span class="k">def</span> <span class="nf">extract_links_from_source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts links from item data. </span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of language names corpus to use; or language names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        languages : list</span>
<span class="sd">            extracted language names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">current_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;url&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">if</span> <span class="s1">&#39;html&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]:</span>
            
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;html&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">]</span>
            <span class="n">current_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;url&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
            
            
            <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">scraped_data</span><span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">],</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
            <span class="n">href_select</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>  
            <span class="n">links</span> <span class="o">=</span> <span class="p">{</span><span class="n">correct_link_errors</span><span class="p">(</span><span class="n">source_domain</span> <span class="o">=</span> <span class="n">current_url</span><span class="p">,</span> <span class="n">url</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">href_select</span> <span class="k">if</span> <span class="s1">&#39;href&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">attrs</span><span class="p">}</span>
       
            
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="s1">&#39;text&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]:</span>
            
                <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">]</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="p">(</span><span class="s1">&#39;https://&#39;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;http://&#39;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;www.&#39;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.co&#39;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.gov&#39;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.gov&#39;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">)</span>
                    <span class="p">):</span>
            
                    <span class="c1"># Cleaning text</span>
                    <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; /&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; :&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;{&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;^&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>

                    <span class="c1"># Splitting text into strings</span>
                    <span class="n">text_split</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

                    <span class="c1"># Extracting potential links</span>
                    <span class="n">links_res</span> <span class="o">=</span> <span class="p">[</span>
                            <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">text_split</span> <span class="k">if</span> <span class="p">(</span>
                                                    <span class="p">(</span><span class="s1">&#39;https:&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> 
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;http:&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> 
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;www.&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.com&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.org&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.net&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.io&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.co.uk&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.co&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                                                    <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;.gov&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
                                                    <span class="p">)</span>
                                    <span class="p">]</span>
            
                    <span class="c1"># Cleaning links</span>
                    <span class="n">links</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;source:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;See:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;vSee:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;Abstract&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;Guard.iii&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">links_res</span><span class="p">}</span>
                    <span class="n">links</span> <span class="o">=</span> <span class="p">{</span><span class="n">correct_link_errors</span><span class="p">(</span><span class="n">source_domain</span> <span class="o">=</span> <span class="n">current_url</span><span class="p">,</span> <span class="n">url</span> <span class="o">=</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">links</span><span class="p">}</span>
       
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No text or html data found&#39;</span><span class="p">)</span>
            
        <span class="n">links</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">links</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">links</span></div>
                
        
    <span class="c1"># Methods for analysing and looking up IP address data, coordinates metadata, and location metadata</span>
    
<div class="viewcode-block" id="CaseItem.get_ip_metadata_geocode"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_ip_metadata_geocode">[docs]</a>    <span class="k">def</span> <span class="nf">get_ip_metadata_geocode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns geocode associated with IP address metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ip_address_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ip</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s1"> does not have IP address metadata&#39;</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">get_ip_geocode</span><span class="p">(</span><span class="n">ip_address</span> <span class="o">=</span> <span class="n">ip</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseItem.get_ip_metadata_coordinates"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_ip_metadata_coordinates">[docs]</a>    <span class="k">def</span> <span class="nf">get_ip_metadata_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns coordinates associated with IP address metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ip_address_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ip</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s1"> does not have IP address metadata&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">get_ip_coordinates</span><span class="p">(</span><span class="n">ip_address</span> <span class="o">=</span> <span class="n">ip</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItem.get_ip_metadata_physical_location"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.get_ip_metadata_physical_location">[docs]</a>    <span class="k">def</span> <span class="nf">get_ip_metadata_physical_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns location associated with IP address metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ip_address_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ip</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s1"> does not have IP address metadata&#39;</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">get_ip_physical_location</span><span class="p">(</span><span class="n">ip_address</span> <span class="o">=</span> <span class="n">ip</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseItem.lookup_coordinates_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.lookup_coordinates_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_coordinates_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;Google Maps&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Launches search for coordinates associated with IP address metadata in default browser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Coordinates must be strings or lists&#39;</span><span class="p">)</span>

        <span class="n">latitude</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">longitude</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lookup_coordinates</span><span class="p">(</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">site</span> <span class="o">=</span> <span class="n">site</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Lookup failed. Please check </span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s2">&#39;s coordinates metadata&quot;</span><span class="p">)</span></div>
            
<div class="viewcode-block" id="CaseItem.lookup_ip_metadata_location"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.lookup_ip_metadata_location">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_ip_metadata_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;Google Maps&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Launches search for location associated with IP address metadata in default browser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        <span class="n">ip_address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ip_address_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ip_address</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s1"> does not have IP address metadata&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lookup_ip_coordinates</span><span class="p">(</span><span class="n">ip_address</span> <span class="o">=</span> <span class="n">ip_address</span><span class="p">,</span> <span class="n">site</span> <span class="o">=</span> <span class="n">site</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Lookup failed. Please check </span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s2">&#39;s IP address metadata&quot;</span><span class="p">)</span></div>

            
<div class="viewcode-block" id="CaseItem.lookup_location_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.lookup_location_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_location_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;Google Maps&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Launches search for location associated with item&#39;s location metadata in default browser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lookup_location</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="n">location</span><span class="p">,</span> <span class="n">site</span> <span class="o">=</span> <span class="n">site</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Lookup failed. Please check </span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s2">&#39;s location metadata&quot;</span><span class="p">)</span></div>
            
    
<div class="viewcode-block" id="CaseItem.lookup_domain"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.lookup_domain">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs WhoIs lookup on item&#39;s domain metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;domain&#39;</span><span class="p">)</span>
        <span class="n">ip_address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ip_address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">domain</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">domain_splitter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">())</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">domain</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">ip_address</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">domain_from_ip</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">dom_loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;domain&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dom_loc</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">domain</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">ip_address</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">domain</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">ip_address</span> <span class="o">=</span> <span class="n">ip_from_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
            <span class="n">ip_loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ip_address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ip_loc</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ip_address</span>
            
        <span class="k">return</span> <span class="n">lookup_whois</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItem.domain_metadata_is_registered"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.domain_metadata_is_registered">[docs]</a>    <span class="k">def</span> <span class="nf">domain_metadata_is_registered</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks whether the item&#39;s `domain_name` metadata is registered.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;domain&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">domain</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        
        <span class="k">return</span> <span class="n">is_registered_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItem.lookup_ip"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.lookup_ip">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_ip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs WhoIs lookup on item&#39;s IP address metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>
        <span class="n">ip_address</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ip_address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">ip_address</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;domain&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="kc">None</span>
            
            <span class="k">if</span> <span class="n">domain</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ip_address</span> <span class="o">=</span> <span class="n">ip_from_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
            
                <span class="n">cat_loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ip_address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cat_loc</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ip_address</span>
        
        <span class="k">return</span> <span class="n">lookup_whois</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItem.lookup_whois"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.lookup_whois">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_whois</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">append_to_item</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs WhoIs lookup on item&#39;s internet metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>
        <span class="n">address</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;url&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;domain&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">ip_address</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ip_address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">address</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">address</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">):</span>
            
            <span class="n">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">lookup_domain</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;http://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">lookup_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">result</span> <span class="o">=</span> <span class="n">lookup_ip</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">pass</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">domain</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">):</span>
                
                <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;http://&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">lookup_domain</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">lookup_ip</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
            
            <span class="k">elif</span> <span class="p">(</span><span class="n">ip_address</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">):</span>
                
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">lookup_ip</span><span class="p">(</span><span class="n">ip_address</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
        
            
        <span class="k">if</span> <span class="n">append_to_item</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">whois</span> <span class="o">=</span> <span class="n">result</span>
        
        <span class="k">return</span> <span class="n">result</span></div>

    <span class="c1"># Methods for looking up item links and addresses</span>
    
<div class="viewcode-block" id="CaseItem.lookup_url"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.lookup_url">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens item&#39;s URL in default browser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">regex_check_then_open_url</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">address</span><span class="p">)</span></div>


<div class="viewcode-block" id="CaseItem.lookup_link"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.lookup_link">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link_index</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens item link in default browser. Takes an index.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_links_str</span><span class="p">()</span>
        <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">[</span><span class="n">link_index</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">link</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This function requires one or more valid links&#39;</span><span class="p">))</span>
        
        <span class="n">link</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">regex_check_then_open_url</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">link</span><span class="p">)</span></div>

            
<div class="viewcode-block" id="CaseItem.open_all_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.open_all_links">[docs]</a>    <span class="k">def</span> <span class="nf">open_all_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens all item links in default browser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_links_str</span><span class="p">()</span>
        <span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span>
        <span class="n">links_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">links_len</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lookup_link</span><span class="p">(</span><span class="n">link_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItem.filter_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.filter_links">[docs]</a>    <span class="k">def</span> <span class="nf">filter_links</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                    <span class="n">contains_any_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                    <span class="n">contains_all_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="n">not_containing_any_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="n">not_containing_all_kwds</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects item links based on provided criteria.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        contains_any_kwds : list</span>
<span class="sd">            links must contain any of these strings.</span>
<span class="sd">        contains_all_kwds : list</span>
<span class="sd">            links must contain all of these strings.</span>
<span class="sd">        not_containing_any_kwds : list</span>
<span class="sd">            links must not contain any of these strings.</span>
<span class="sd">        not_containing_all_kwds : list</span>
<span class="sd">            links must not contain all of these strings.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        selected_links : list</span>
<span class="sd">            selected links.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_links_str</span><span class="p">()</span>
        
        <span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span>
        
        <span class="n">selected_links</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
            
            <span class="n">any_kwds</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">all_kwds</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">not_any_kwds</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">not_all_kwds</span> <span class="o">=</span> <span class="kc">True</span>
            
            <span class="k">if</span> <span class="n">contains_any_kwds</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">any_kwds</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">contains_any_kwds</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">link</span><span class="p">:</span>
                        <span class="n">any_kwds</span> <span class="o">=</span> <span class="kc">True</span>
            
            <span class="k">if</span> <span class="n">contains_all_kwds</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">all_kwds</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">contains_all_kwds</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">link</span><span class="p">:</span>
                        <span class="n">all_kwds</span> <span class="o">=</span> <span class="kc">False</span>
            
            <span class="k">if</span> <span class="n">not_containing_any_kwds</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">not_any_kwds</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">not_containing_any_kwds</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">link</span><span class="p">:</span>
                        <span class="n">not_any_kwds</span> <span class="o">=</span> <span class="kc">False</span>
            
            <span class="k">if</span> <span class="n">not_containing_all_kwds</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">not_all_kwds</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">not_containing_all_kwds</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">link</span><span class="p">:</span>
                        <span class="n">not_any_kwds</span> <span class="o">=</span> <span class="kc">True</span>
            
            <span class="k">if</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">any_kwds</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
                <span class="ow">and</span> <span class="p">(</span><span class="n">all_kwds</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
                <span class="ow">and</span> <span class="p">(</span><span class="n">not_any_kwds</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
                <span class="ow">and</span> <span class="p">(</span><span class="n">not_all_kwds</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
                <span class="p">):</span>
            
                <span class="n">selected_links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">selected_links</span></div>
    
    
    
<div class="viewcode-block" id="CaseItem.open_filtered_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItem.open_filtered_links">[docs]</a>    <span class="k">def</span> <span class="nf">open_filtered_links</span><span class="p">(</span>
                            <span class="bp">self</span><span class="p">,</span> 
                            <span class="n">contains_any_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">contains_all_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">not_containing_any_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">not_containing_all_kwds</span> <span class="o">=</span> <span class="kc">None</span>
                             <span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects and opens item links based on provided criteria in default browser.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        contains_any_kwds : list</span>
<span class="sd">            links must contain any of these strings.</span>
<span class="sd">        contains_all_kwds : list</span>
<span class="sd">            links must contain all of these strings.</span>
<span class="sd">        not_containing_any_kwds : list</span>
<span class="sd">            links must not contain any of these strings.</span>
<span class="sd">        not_containing_all_kwds : list</span>
<span class="sd">            links must not contain all of these strings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">filtered_links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_links</span><span class="p">(</span>
                              <span class="n">contains_any_kwds</span> <span class="o">=</span> <span class="n">contains_any_kwds</span><span class="p">,</span> 
                              <span class="n">contains_all_kwds</span> <span class="o">=</span> <span class="n">contains_all_kwds</span><span class="p">,</span>
                              <span class="n">not_containing_any_kwds</span> <span class="o">=</span> <span class="n">not_containing_any_kwds</span><span class="p">,</span>
                             <span class="n">not_containing_all_kwds</span> <span class="o">=</span> <span class="n">not_containing_all_kwds</span>
                             <span class="p">)</span>
        
        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">filtered_links</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">regex_check_then_open_url</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">link</span><span class="p">)</span></div></div>

<span class="c1"># Functions for assigning the results of PDF parsing to item</span>

<div class="viewcode-block" id="parsed_pdf_to_item"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.parsed_pdf_to_item">[docs]</a><span class="k">def</span> <span class="nf">parsed_pdf_to_item</span><span class="p">(</span><span class="n">parsed_pdf</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates CaseItem from parsed PDF reader result. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">item_id</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
    <span class="n">item</span> <span class="o">=</span> <span class="n">CaseItem</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
    
    <span class="n">item</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;document&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">]</span>
    <span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;PDF&#39;</span><span class="p">,</span> <span class="s1">&#39;format&#39;</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;attached_metadata&#39;</span><span class="p">][</span><span class="s1">&#39;/CreationDate&#39;</span><span class="p">],</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">],</span> <span class="s1">&#39;created_at&#39;</span><span class="p">]</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;attached_metadata&#39;</span><span class="p">][</span><span class="s1">&#39;/ModDate&#39;</span><span class="p">],</span> <span class="s1">&#39;last_changed_at&#39;</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">item</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;last_changed_at&#39;</span><span class="p">]</span>
    
    <span class="n">item</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span>
    <span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;PDF&#39;</span>
    <span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;full_text&#39;</span><span class="p">])</span>
    <span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;full_text&#39;</span><span class="p">])</span>
    <span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;full_text&#39;</span><span class="p">]</span>
    <span class="n">item</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="n">item</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">[</span><span class="s1">&#39;links&#39;</span><span class="p">]</span>
    
    <span class="k">return</span> <span class="n">item</span></div>

<div class="viewcode-block" id="pdf_to_item"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.pdf_to_item">[docs]</a><span class="k">def</span> <span class="nf">pdf_to_item</span><span class="p">(</span><span class="n">file_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates CaseItem from PDF file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">read_pdf</span><span class="p">(</span><span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="p">)</span>
    <span class="n">item</span> <span class="o">=</span> <span class="n">parsed_pdf_to_item</span><span class="p">(</span><span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">item</span></div>

<div class="viewcode-block" id="pdf_url_to_item"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.pdf_url_to_item">[docs]</a><span class="k">def</span> <span class="nf">pdf_url_to_item</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates CaseItem from PDF URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">read_pdf_url</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="p">)</span>
    <span class="n">item</span> <span class="o">=</span> <span class="n">parsed_pdf_to_item</span><span class="p">(</span><span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">item</span></div>

<div class="viewcode-block" id="CaseItemSet"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet">[docs]</a><span class="k">class</span> <span class="nc">CaseItemSet</span><span class="p">(</span><span class="n">CaseObjectSet</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This is a collection of CaseItems. </span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    obj_name : str</span>
<span class="sd">        ID used for item set.</span>
<span class="sd">    parent_obj_path : str</span>
<span class="sd">        if item set is an attribute, object path of the parent object. Defaults to None.</span>
<span class="sd">    items : list</span>
<span class="sd">        iterable of CaseItems to assign to CaseItemSet.</span>
<span class="sd">    </span>
<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">        * Subclass of CaseObjectSet class.</span>
<span class="sd">        * Intended to assigned to all Case objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_name</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises CaseItemSet instance.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj_name : str</span>
<span class="sd">            ID used for item set.</span>
<span class="sd">        parent_obj_path : str</span>
<span class="sd">            if item set is an attribute, object path of the parent object. Defaults to None.</span>
<span class="sd">        items : list</span>
<span class="sd">            iterable of CaseItems to assign to CaseItemSet.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Inheriting methods and attributes from CaseObjectSet class</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj_name</span> <span class="o">=</span> <span class="n">obj_name</span><span class="p">,</span> <span class="n">obj_type</span> <span class="o">=</span> <span class="s1">&#39;CaseItemSet&#39;</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="n">parent_obj_path</span><span class="p">)</span>
        
        <span class="c1"># Setting item properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="n">CaseObjectProperties</span><span class="p">(</span><span class="n">obj_name</span> <span class="o">=</span> <span class="n">obj_name</span><span class="p">,</span> <span class="n">obj_type</span> <span class="o">=</span> <span class="s1">&#39;CaseItemSet&#39;</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="n">parent_obj_path</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="c1"># If only one item is provided, wrapping as list</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">==</span> <span class="n">CaseItem</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">items</span><span class="p">]</span>
        
        <span class="c1"># Adding items if provided</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        
        <span class="c1"># Updating properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
    
    
    <span class="c1"># Methods for editing and retrieving item set properties</span>
    
<div class="viewcode-block" id="CaseItemSet.update_properties"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.update_properties">[docs]</a>    <span class="k">def</span> <span class="nf">update_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates CaseItemSet&#39;s properties.</span>
<span class="sd">        </span>
<span class="sd">        Updates</span>
<span class="sd">        -------</span>
<span class="sd">            * obj_id</span>
<span class="sd">            * obj_size</span>
<span class="sd">            * items</span>
<span class="sd">            * item_count</span>
<span class="sd">            * last_changed</span>
<span class="sd">            * hash</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">item_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_size</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sizeof__</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39; bytes&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">update_last_changed</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__hash__</span><span class="p">()</span></div>
        
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines how CaseItemSets are represented in string form.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">contents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">output</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Item count: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">item_count</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">&#39;</span>
        
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">output</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;[</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="si">}</span><span class="s1">] </span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            
        <span class="k">return</span> <span class="n">output</span>
    
            
    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adding CaseItem to collection using a key name.</span>
<span class="sd">        </span>
<span class="sd">        WARNING: will not allow user to set &#39;properties&#39; attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">!=</span> <span class="n">CaseItem</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Key value assignment requires a CaseItem object&#39;</span><span class="p">)</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes CaseItem in collection using its key.</span>
<span class="sd">        </span>
<span class="sd">        WARNING: will not allow user to delete collection&#39;s &#39;properties&#39; attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;properties&#39;</span><span class="p">:</span>
            
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        

<div class="viewcode-block" id="CaseItemSet.count_items"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.count_items">[docs]</a>    <span class="k">def</span> <span class="nf">count_items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of CaseItems in the collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span></div>
    
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function for controlling addition operations on CaseItemSets.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * CaseItemSets can only have CaseItems or other CaseItemSets added to them.</span>
<span class="sd">            * Adding a CaseItem to a set will add that item to the set&#39;s collection of items.</span>
<span class="sd">            * Adding a CaseItemSet to another CaseItemSet will produce a new CaseItemSet that includes both sets&#39; items. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">new_item_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">==</span> <span class="n">CaseItem</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">CaseItem</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">):</span>
        
            <span class="n">new_item_set</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">new_item_set</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">new_item_set</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">==</span> <span class="n">CaseItemSet</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">CaseItemSet</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">):</span>
            
            <span class="n">contents</span> <span class="o">=</span> <span class="n">new_item_set</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
            
            <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">item_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">:</span>
                    <span class="n">new_item_set</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span> <span class="o">+</span> <span class="s1">&#39;_copy&#39;</span>
                    <span class="n">new_item_set</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
                    
            <span class="n">new_item_set</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">new_item_set</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span><span class="si">}</span><span class="s1"> objects cannot be added to CaseItemSets.&#39;</span><span class="p">)</span>


    <span class="c1"># Methods for adding items to item set</span>
    
<div class="viewcode-block" id="CaseItemSet.add_blank_item"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.add_blank_item">[docs]</a>    <span class="k">def</span> <span class="nf">add_blank_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a blank item to the item set. Returns the item.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_id : str</span>
<span class="sd">            the item&#39;s ID. This will become its attribute name.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        item : CaseItem</span>
<span class="sd">            the new blank item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">item_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;item_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item_code</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;New item ID: &#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">CaseItem</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span></div>
    
    
    
<div class="viewcode-block" id="CaseItemSet.add_item"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.add_item">[docs]</a>    <span class="k">def</span> <span class="nf">add_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an item to the item set. Returns the item.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item : CaseItem</span>
<span class="sd">            the item to be added. Defaults to None; this adds a blank item.</span>
<span class="sd">        item_id : str</span>
<span class="sd">            the item&#39;s ID. This will become its attribute name. Defaults to None.</span>
<span class="sd">            If none set, tries to retrieve details from item&#39;s properties.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        item : CaseItem</span>
<span class="sd">            the added item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_blank_item</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">!=</span> <span class="n">CaseItem</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Item must be of type &quot;CaseItem&quot;&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Item is already in items&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span> <span class="o">+</span> <span class="s2">&quot;.copy&quot;</span>
        
        <span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_path</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_name</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span></div>
    
    
    <span class="c1"># Methods for deleting items from item set</span>
    
<div class="viewcode-block" id="CaseItemSet.delete_item"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_item">[docs]</a>    <span class="k">def</span> <span class="nf">delete_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">CaseItem</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">item_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes an item from the item set. Takes either an item or an item ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">item_id</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
        
        <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
    
<div class="viewcode-block" id="CaseItemSet.delete_all"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_all">[docs]</a>    <span class="k">def</span> <span class="nf">delete_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all items from the item set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
            
    
<div class="viewcode-block" id="CaseItemSet.delete_all_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_all_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">delete_all_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all metadata from items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_metadata</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
            
        
<div class="viewcode-block" id="CaseItemSet.delete_metadata_category"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_metadata_category">[docs]</a>    <span class="k">def</span> <span class="nf">delete_metadata_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all metadata from items if tagged with a specified category.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Category to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_metadata_by_category</span><span class="p">(</span><span class="n">category</span> <span class="o">=</span> <span class="n">category</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
            
        
    
<div class="viewcode-block" id="CaseItemSet.delete_all_data"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_all_data">[docs]</a>    <span class="k">def</span> <span class="nf">delete_all_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all data from items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_data</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
    
<div class="viewcode-block" id="CaseItemSet.delete_datatype"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_datatype">[docs]</a>    <span class="k">def</span> <span class="nf">delete_datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datatype</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all instances of a specified data type from items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">datatype</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Datatype to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_data_by_datatype</span><span class="p">(</span><span class="n">datatype</span> <span class="o">=</span> <span class="n">datatype</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.delete_data_format"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_data_format">[docs]</a>    <span class="k">def</span> <span class="nf">delete_data_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_format</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all instances of a specified data format from items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">data_format</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">data_format</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Data format to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_data_by_format</span><span class="p">(</span><span class="n">data_format</span> <span class="o">=</span> <span class="n">data_format</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.delete_rawdata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_rawdata">[docs]</a>    <span class="k">def</span> <span class="nf">delete_rawdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rawdata</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all raw data from items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">rawdata</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">rawdata</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Raw data to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_if_rawdata</span><span class="p">(</span><span class="n">data_format</span> <span class="o">=</span> <span class="n">rawdata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
    
<div class="viewcode-block" id="CaseItemSet.delete_all_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_all_info">[docs]</a>    <span class="k">def</span> <span class="nf">delete_all_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all information from items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span> 
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_info</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.delete_info_category"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_info_category">[docs]</a>    <span class="k">def</span> <span class="nf">delete_info_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all information from items if tagged with a specified category.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Category to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_info_by_category</span><span class="p">(</span><span class="n">category</span> <span class="o">=</span> <span class="n">category</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.delete_info_label"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.delete_info_label">[docs]</a>    <span class="k">def</span> <span class="nf">delete_info_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all information from items if it matches an inputted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Labels to delete: &#39;</span><span class="p">)</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">delete_info_by_label</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    

    <span class="c1"># Methods for retrieving items and data from item set</span>
    
<div class="viewcode-block" id="CaseItemSet.get_item"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_item">[docs]</a>    <span class="k">def</span> <span class="nf">get_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an item if given its ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">item_id</span><span class="si">}</span><span class="s1">&quot; not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span></div>
    

<div class="viewcode-block" id="CaseItemSet.get_all_data"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all data from all items. Can choose to return only a specified data type.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_type : str or None</span>
<span class="sd">            specifies a datatype to return. Defaults to None; all data types returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">concat_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
                <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
                <span class="n">concat_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

            <span class="n">concat_df</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">concat_list</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_type</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">select_by_type</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_type</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_type</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">select_by_type</span><span class="p">:</span>
                    <span class="n">masked</span> <span class="o">=</span> <span class="n">concat_df</span><span class="p">[</span><span class="n">concat_df</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>
                    <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">masked</span><span class="p">,</span> <span class="n">output_df</span><span class="p">])</span>
                <span class="n">concat_df</span> <span class="o">=</span> <span class="n">output_df</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">concat_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">])</span>
        
        <span class="k">return</span> <span class="n">concat_df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_all_datatypes"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_datatypes">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_datatypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all data type names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">()[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_datatypes_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_datatypes_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_datatypes_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all data type names as a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_datatypes</span><span class="p">())</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_datatypes_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_datatypes_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_datatypes_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the frequency counts of all data types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_datatypes</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_datatypes_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_datatypes_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_datatypes_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for all data types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_datatypes_frequencies</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_data_formats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_data_formats">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_data_formats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all data format names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">()[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_data_formats_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_data_formats_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_formats_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all data format names as a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_data_formats</span><span class="p">())</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_data_formats_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_data_formats_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_formats_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the frequency counts of all data types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data_formats</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_data_formats_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_data_formats_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_formats_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for all data types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_formats_frequencies</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_data_sizes"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_data_sizes">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_data_sizes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all data entry sizes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">sizes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">()[</span><span class="s1">&#39;Size (bytes)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sizes</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_data_size_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_data_size_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_size_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequencies for data sizes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data_sizes</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_data_size_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_data_size_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_size_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for data sizes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data_sizes</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_rawdata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_rawdata">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_rawdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all raw data entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">(</span><span class="n">select_by_type</span> <span class="o">=</span> <span class="n">select_by_type</span><span class="p">)[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_rawdata_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_rawdata_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all raw data entries as a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_rawdata</span><span class="p">(</span><span class="n">select_by_type</span> <span class="o">=</span> <span class="n">select_by_type</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_rawdata_list_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_rawdata_list_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_list_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of raw data entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rawdata_list</span><span class="p">(</span><span class="n">select_by_type</span> <span class="o">=</span> <span class="n">select_by_type</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_rawdata_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_rawdata_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all raw data entries as a dictionary, where keys are items and values are entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_data_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="n">data_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_rawdata_list</span><span class="p">()</span>
            <span class="n">all_data_dict</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_list</span>

        <span class="k">return</span> <span class="n">all_data_dict</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_rawdata_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_rawdata_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the set of unique raw data entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_rawdata</span><span class="p">(</span><span class="n">select_by_type</span> <span class="o">=</span> <span class="n">select_by_type</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_rawdata_set_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_rawdata_set_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_set_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the set of unique raw data entries as a dictionary, where keys are items and values are entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">data_set_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="n">data_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_rawdata_set</span><span class="p">()</span>
            <span class="n">data_set_dict</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_set</span>

        <span class="k">return</span> <span class="n">data_set_dict</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_rawdata_set_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_rawdata_set_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_set_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of unique raw data entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rawdata_set</span><span class="p">(</span><span class="n">select_by_type</span> <span class="o">=</span> <span class="n">select_by_type</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_rawdata_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_rawdata_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for unique raw data entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_rawdata</span><span class="p">(</span><span class="n">select_by_type</span> <span class="o">=</span> <span class="n">select_by_type</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_rawdata_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_rawdata_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_rawdata_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for unique raw data entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rawdata_frequencies</span><span class="p">(</span><span class="n">select_by_type</span> <span class="o">=</span> <span class="n">select_by_type</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_data_sets"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_data_sets">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_data_sets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns unique raw data from all items as a list of sets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="n">set_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_rawdata_set</span><span class="p">())</span>
        
        <span class="k">return</span> <span class="n">set_list</span></div>
        
<div class="viewcode-block" id="CaseItemSet.get_data_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_data_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of raw data sets from all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data_sets</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_list</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">set_intersection</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">set_intersection</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="nb">set</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_data_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_data_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of raw data sets from all items.</span>
<span class="sd">        </span>
<span class="sd">        i.e., all raw data entries which are only in one set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data_sets</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_list</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    
        <span class="k">return</span> <span class="n">diff</span></div>
    
<div class="viewcode-block" id="CaseItemSet.data_sets_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.data_sets_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">data_sets_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between raw data sets from all items.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many entries are shared by all versus the total number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data_sets</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_list</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
            <span class="n">set_intersection</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">set_intersection</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            
        <span class="n">ratio</span> <span class="o">=</span>  <span class="nb">len</span><span class="p">(</span><span class="n">set_intersection</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_union</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ratio</span></div>
        
    

<div class="viewcode-block" id="CaseItemSet.get_all_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all metadata from all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_metadata_dfs_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>

            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
            <span class="n">all_metadata_dfs_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

        <span class="n">all_metadata_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_metadata_dfs_list</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">all_metadata_df</span> <span class="o">=</span> <span class="n">all_metadata_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">all_metadata_df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary of metadata from all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_metadata_dict</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_category</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            
            <span class="n">metadata_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_list</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span>
            <span class="n">all_metadata_dict</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_list</span>
            
        <span class="k">return</span> <span class="n">all_metadata_dict</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_nested_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_nested_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_nested_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns metadata from all items as a dictionary of dictionaries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : dict</span>
<span class="sd">            a dictionary where each key is an item and each value is itself a dictionary containing metadata categories and values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_metadata_dict</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">all_metadata_dict</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_dict</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">all_metadata_dict</span></div>
        
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_series"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_series">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all metadata from all items as a Pandas series.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]))</span>

        <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all metadata values from all items. Does not return metadata categories.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a set of all unique metadata values from all items. Does not return metadata categories.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for all combinations of metadata categories and values.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)[[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for all combinations of metadata categories and values.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_frequencies</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_metadata_sets"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_metadata_sets">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_metadata_sets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns unique metadata values from all items as a list of sets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_set</span><span class="p">()</span> <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()]</span></div>
        
<div class="viewcode-block" id="CaseItemSet.get_metadata_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of metadata sets from all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata_sets</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of metadata sets from all items.</span>
<span class="sd">        </span>
<span class="sd">        i.e., all metadata entries which are only in one set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata_sets</span><span class="p">()</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">diff</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_metadata_sets_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_sets_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_sets_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between metadata sets from all items.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many metadata entries are shared by all versus the total number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata_sets</span><span class="p">()</span>
        <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="n">set_intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_intersect</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">set_union</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseItemSet.get_metadata_categories"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_categories">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_categories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all metadata categories from all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty metadata categories. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="CaseItemSet.get_metadata_category_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_category_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_category_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for all metadata categories.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty metadata categories. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_categories</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>

<div class="viewcode-block" id="CaseItemSet.get_metadata_category_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_metadata_category_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_metadata_category_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for all metadata categories.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty metadata categories. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_category_frequencies</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_addresses"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_addresses">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_addresses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all address metadata entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None results. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_address_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_address_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_address_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all address metadata entries as a list.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None results. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_addresses</span><span class="p">(</span><span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span></div>

<div class="viewcode-block" id="CaseItemSet.get_address_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_address_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_address_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the set of unique address metadata entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None results. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_addresses</span><span class="p">(</span><span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">])</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_address_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_address_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_address_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary address metadata entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None results. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">addresses</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">addresses</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_address</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="n">addresses</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_urls_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_urls_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_urls_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all URL metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_urls</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
            <span class="n">all_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">all_urls</span></div>

<div class="viewcode-block" id="CaseItemSet.get_urls_metadata_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_urls_metadata_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_urls_metadata_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the set of unique URL metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_urls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_urls_metadata</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">all_urls</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseItemSet.get_urls_metadata_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_urls_metadata_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_urls_metadata_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary containing all URL metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">urls_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
            <span class="n">urls_dict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>

        <span class="k">return</span> <span class="n">urls_dict</span></div>

<div class="viewcode-block" id="CaseItemSet.get_item_domain_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_item_domain_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_item_domain_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an item&#39;s domain metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;domain&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
            
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_domain_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_domain_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_domain_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all domain metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">domains</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">,</span> <span class="s1">&#39;domain&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item_domain_metadata</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
            <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_id</span><span class="p">,</span> <span class="n">domain</span><span class="p">]</span>
            <span class="n">domains</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="k">return</span> <span class="n">domains</span></div>
    
    

<div class="viewcode-block" id="CaseItemSet.get_all_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all information from all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies an information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">concat_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">information</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
            <span class="n">concat_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

        <span class="n">concat_df</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">concat_list</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_category</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">select_by_category</span><span class="p">:</span>
                    <span class="n">masked</span> <span class="o">=</span> <span class="n">concat_df</span><span class="p">[</span><span class="n">concat_df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>
                    <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">masked</span><span class="p">,</span> <span class="n">output_df</span><span class="p">])</span>
                <span class="n">concat_df</span> <span class="o">=</span> <span class="n">output_df</span>
            
        <span class="k">return</span> <span class="n">concat_df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_series"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_series">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all information entries as a Pandas series.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies an information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_info</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;combined&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all information entries as a list of tuples.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies an information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all information entries as dictionary.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies an information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_info_dict</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_category</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            
            <span class="n">all_info_dict</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_list</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">all_info_dict</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_info_count"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_count">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns number of information entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_info_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns set of unique information entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_info_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_set_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_set_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_set_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of unique information entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_repeated_info_count"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_repeated_info_count">[docs]</a>    <span class="k">def</span> <span class="nf">get_repeated_info_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of repeated information entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">unique_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_set_size</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span>
        <span class="n">all_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_count</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">all_count</span> <span class="o">-</span> <span class="n">unique_count</span></div>

    
<div class="viewcode-block" id="CaseItemSet.get_info_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the frequency counts for information entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">series</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_series</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span>
        <span class="n">frequencies</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">frequencies</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_info_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for information entries.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_frequencies</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_categories"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_categories">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_categories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all information categories from all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a category to return. Defaults to None: information from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty information entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_info</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_frequencies_by_category"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_frequencies_by_category">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_frequencies_by_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the frequency counts for information categories and labels.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_info</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)[[</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]]</span>
        <span class="n">frequencies</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">frequencies</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_stats_by_category"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_stats_by_category">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_stats_by_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for information categories and labels.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a information category to return. Defaults to None: returns information from all categories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_frequencies_by_category</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_info_category_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_category_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_category_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for all information categories.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a category to return. Defaults to None: all categories are returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_categories</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span>
        <span class="n">frequencies</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">frequencies</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_category_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_category_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_category_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for all information categories.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a category to return. Defaults to None: all categories are returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_category_frequencies</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of information sets from all items.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any information entries which are found in all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">()</span> <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()]</span>
        <span class="k">return</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of information sets from all items.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any information entries which are *not* found in all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">()</span> <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()]</span>
        <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="n">set_intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">set_union</span> <span class="o">-</span> <span class="n">set_intersect</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_info_sets_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_info_sets_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_sets_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between information sets from all items.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many information entries are found in all versus the total number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">()</span> <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()]</span>
        <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="n">set_intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_intersect</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">set_union</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="CaseItemSet.get_all_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_words">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all words parsed from all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">out_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="s1">&#39;found_in&#39;</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">words_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="s1">&#39;found_in&#39;</span><span class="p">])</span>
            <span class="n">words_df</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">(</span><span class="n">clean</span><span class="o">=</span><span class="n">clean</span><span class="p">)</span>
            <span class="n">words_df</span><span class="p">[</span><span class="s1">&#39;found_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
            <span class="n">out_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">out_df</span><span class="p">,</span> <span class="n">words_df</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">out_df</span></div>
    

<div class="viewcode-block" id="CaseItemSet.get_words_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_words_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_words_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the set of unique words parsed from all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)[</span><span class="s1">&#39;word&#39;</span><span class="p">])</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_words_set_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_words_set_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_words_set_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of unique words parsed from all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_words_set</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">))</span></div>
    

<div class="viewcode-block" id="CaseItemSet.get_all_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_links">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all links found in items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Link&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">])</span>
        
        <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">item_ids</span><span class="p">:</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">fix_links_str</span><span class="p">()</span>
            <span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">links</span>
            
            <span class="k">if</span> <span class="n">links</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Link&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
            
        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_links_list"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_links_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all links as a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">links_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_links</span><span class="p">()</span>
        <span class="n">links</span> <span class="o">=</span> <span class="n">links_df</span><span class="p">[</span><span class="s1">&#39;Link&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="n">links</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_links_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_links_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the set of unique links found in items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_links</span><span class="p">()[</span><span class="s1">&#39;Link&#39;</span><span class="p">])</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_link_sets"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_link_sets">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_link_sets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the unique links found in each item as a list of sets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_links_set</span><span class="p">()</span> <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()]</span></div>
        
<div class="viewcode-block" id="CaseItemSet.get_links_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_links_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersection of all items&#39; link sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any links shared by all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_link_sets</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_links_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_links_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of all items&#39; link sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any links *not* shared by all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_link_sets</span><span class="p">()</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">diff</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_link_sets_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_link_sets_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">get_link_sets_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between all items&#39; link sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many links are found in all versus the total number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_link_sets</span><span class="p">()</span>
        <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="n">set_intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_intersect</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">set_union</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_links_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_links_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns links as a dictionary.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Dictiionary structure:</span>
<span class="sd">            * keys: item IDs</span>
<span class="sd">            * values: link lists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_links_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">links</span>
            <span class="n">all_links_dict</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">links</span>

        <span class="k">return</span> <span class="n">all_links_dict</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_links_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_links_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for links.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_links</span><span class="p">()[</span><span class="s1">&#39;Link&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_links_frequencies_detailed"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_links_frequencies_detailed">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_frequencies_detailed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for links with detail on where each link was found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_links</span><span class="p">()</span>

        <span class="n">freqs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_links</span><span class="p">()[</span><span class="s1">&#39;Link&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="n">links_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">freqs</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Link&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">,</span> <span class="s1">&#39;Frequency&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links_set</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Link&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">link</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">freqs</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">link</span><span class="p">]</span>
            <span class="n">found_in</span> <span class="o">=</span> <span class="n">all_links</span><span class="p">[</span><span class="n">all_links</span><span class="p">[</span><span class="s1">&#39;Link&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">link</span><span class="p">][</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
            <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_links_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_links_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_links_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for links.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_links_frequencies</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="CaseItemSet.get_all_refs"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_refs">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all references found in items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Reference&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">])</span>
        
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            
            
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">references</span>
            
            <span class="k">if</span> <span class="n">refs</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Reference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ref</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
            
        <span class="k">return</span> <span class="n">df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_refs_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_refs_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the set of unique references found in items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_refs</span><span class="p">()[</span><span class="s1">&#39;Reference&#39;</span><span class="p">])</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_refs_sets"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_refs_sets">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_refs_sets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the unique references found in each item as a list of sets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_refs_set</span><span class="p">()</span> <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()]</span></div>
        
<div class="viewcode-block" id="CaseItemSet.get_refs_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_refs_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersection of all items&#39; references sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any references shared by all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_refs_sets</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_refs_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_refs_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of all items&#39; references sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any references *not* shared by all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_refs_sets</span><span class="p">()</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">diff</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_refs_sets_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_refs_sets_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs_sets_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between all items&#39; references sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many references are found in all versus the total number of unique references.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_refs_sets</span><span class="p">()</span>
        <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="n">set_intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_intersect</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">set_union</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_refs_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_refs_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns references as a dictionary.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Dictionary structure:</span>
<span class="sd">            * keys: item IDs</span>
<span class="sd">            * values: references lists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_refs_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">references</span>
            <span class="n">all_refs_dict</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">refs</span>

        <span class="k">return</span> <span class="n">all_refs_dict</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_refs_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_refs_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for references.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_refs</span><span class="p">()[</span><span class="s1">&#39;Reference&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_refs_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_refs_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_refs_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for references.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_refs_frequencies</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    

<div class="viewcode-block" id="CaseItemSet.get_all_contents"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_contents">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all contents entries found in items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Content&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">])</span>
        
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            
            
            <span class="n">contents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span>
            <span class="k">if</span> <span class="n">contents</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Content&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
                    <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
            
        <span class="k">return</span> <span class="n">df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_contents_set"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_contents_set">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the set of unique contents entries found in items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_contents</span><span class="p">()[</span><span class="s1">&#39;Content&#39;</span><span class="p">])</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_contents_sets"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_contents_sets">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_contents_sets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the unique contents entries found in each item as a list of sets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_contents_set</span><span class="p">()</span> <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()]</span></div>
        
<div class="viewcode-block" id="CaseItemSet.get_contents_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_contents_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersection of all items&#39; contents sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any contents entries shared by all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_contents_sets</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_contents_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_contents_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of all items&#39; contents sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any contents entries *not* shared by all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_contents_sets</span><span class="p">()</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">diff</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_contents_sets_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_contents_sets_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents_sets_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between all items&#39; contents sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many contents entries are found in all versus the total number of unique references.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">set_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_contents_sets</span><span class="p">()</span>
        <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="n">set_intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_intersect</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">set_union</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_contents_dict"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_contents_dict">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns item contents as a dictionary.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Dictionary structure:</span>
<span class="sd">            * keys: item IDs</span>
<span class="sd">            * values: references lists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_contents_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span>
            <span class="n">all_contents_dict</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">contents</span>

        <span class="k">return</span> <span class="n">all_contents_dict</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_contents_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_contents_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for contents entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_contents</span><span class="p">()[</span><span class="s1">&#39;Content&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_contents_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_contents_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_contents_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for contents entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_contents_frequencies</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    

<div class="viewcode-block" id="CaseItemSet.get_word_count"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_word_count">[docs]</a>    <span class="k">def</span> <span class="nf">get_word_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of words found in parsed data across all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_word_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_word_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">get_word_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency counts for all words found in parsed data across all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">freqs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;word&#39;</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_word_frequencies_detailed"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_word_frequencies_detailed">[docs]</a>    <span class="k">def</span> <span class="nf">get_word_frequencies_detailed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns detailed breakdown of frequency counts for all words found in parsed data across all items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            a dataframe featuring:</span>
<span class="sd">                * word (index)</span>
<span class="sd">                * found_in: a list of item IDs where the word was found</span>
<span class="sd">                * found_in_count: how many items in which the word was found</span>
<span class="sd">                * frequency_per_item: the mean number of times each item contained the word</span>
<span class="sd">                * breakdown: a dictionary recording the number of times each item contained the word</span>
<span class="sd">         &quot;&quot;&quot;</span>
        
        <span class="n">all_words_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span>
        <span class="n">freqs_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_frequencies</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span>
        <span class="n">freqs_df</span><span class="p">[</span><span class="s1">&#39;found_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">freqs_df</span><span class="p">[</span><span class="s1">&#39;found_in_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">freqs_df</span><span class="p">[</span><span class="s1">&#39;frequency_per_item&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">freqs_df</span><span class="p">[</span><span class="s1">&#39;breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">freqs_df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="n">item_ids_masked</span> <span class="o">=</span> <span class="n">all_words_df</span><span class="p">[</span><span class="n">all_words_df</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">word</span><span class="p">][</span><span class="s1">&#39;found_in&#39;</span><span class="p">]</span>
            <span class="n">item_ids_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">item_ids_masked</span><span class="p">)</span>
            <span class="n">item_ids_dict</span> <span class="o">=</span> <span class="n">item_ids_masked</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="n">freqs_df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">word</span><span class="p">,</span> <span class="s1">&#39;found_in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_ids_set</span>
            <span class="n">freqs_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">word</span><span class="p">,</span> <span class="s1">&#39;found_in_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_ids_set</span><span class="p">)</span>
            <span class="n">freqs_df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">word</span><span class="p">,</span> <span class="s1">&#39;breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_ids_dict</span>

        <span class="n">freqs_df</span><span class="p">[</span><span class="s1">&#39;frequency_per_item&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">freqs_df</span><span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">freqs_df</span><span class="p">[</span><span class="s1">&#39;found_in_count&#39;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">freqs_df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.word_mean_frequencies"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.word_mean_frequencies">[docs]</a>    <span class="k">def</span> <span class="nf">word_mean_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the mean number of times each word in items&#39; parsed data occurred per item.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_frequencies_detailed</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)[</span><span class="s1">&#39;frequency_per_item&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_most_frequent_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_most_frequent_words">[docs]</a>    <span class="k">def</span> <span class="nf">get_most_frequent_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mi">15</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the most frequently occurring words.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        top : int</span>
<span class="sd">            how many words to return.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_frequencies</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.highest_frequency_per_item_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.highest_frequency_per_item_words">[docs]</a>    <span class="k">def</span> <span class="nf">highest_frequency_per_item_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="mi">15</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the most frequently occurring words per item.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        top : int</span>
<span class="sd">            how many words to return.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">word_mean_frequencies</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_word_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_word_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_word_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for all words found in items&#39; parsed data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_frequencies</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.get_word_stats_detailed"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_word_stats_detailed">[docs]</a>    <span class="k">def</span> <span class="nf">get_word_stats_detailed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns detailed frequency statistics for all words found in items&#39; parsed data.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            a dataframe featuring descriptive statistics for:</span>
<span class="sd">                * frequency: the number of times a word appeared across the item set.</span>
<span class="sd">                * found_in_count: how many items in which a word was found.</span>
<span class="sd">                * frequency_per_item: the mean number of times each item contained a word.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="n">frequencies_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_frequencies_detailed</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;found_in_count&#39;</span><span class="p">,</span> <span class="s1">&#39;frequency_per_item&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">frequencies_df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.rawdata_with_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_with_words">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_with_words</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dataframe displaying items&#39; raw data entries and the words extracted from them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">()</span>
        <span class="n">masked_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;txt&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;text&#39;</span><span class="p">)]</span>

        <span class="n">words_list</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">i</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">masked_df</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="k">if</span> <span class="p">(</span>
                                                                                <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">)</span> 
                                                                                <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;words&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
                        <span class="p">]</span>
        
        <span class="n">word_counts</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">words_list</span><span class="p">]</span>
        
        <span class="n">masked_df</span><span class="p">[</span><span class="s1">&#39;Words&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">words_list</span>
        <span class="n">masked_df</span><span class="p">[</span><span class="s1">&#39;Word count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">word_counts</span>

        <span class="n">masked_df</span> <span class="o">=</span> <span class="n">masked_df</span><span class="p">[[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">,</span> <span class="s1">&#39;Words&#39;</span><span class="p">,</span> <span class="s1">&#39;Word count&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]]</span>

        <span class="k">return</span> <span class="n">masked_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Word count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="CaseItemSet.get_repeated_words_count"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_repeated_words_count">[docs]</a>    <span class="k">def</span> <span class="nf">get_repeated_words_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of times words were repeated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_count</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_words_set_size</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_words_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_words_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">get_words_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersection of all items&#39; word sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any words shared by all items.</span>
<span class="sd">            </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">get_words_set</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">]</span>
        <span class="n">set_intersection</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">set_intersection</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_words_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_words_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">get_words_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of all items&#39; word sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any words *not* shared by all items.</span>
<span class="sd">            </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">get_words_set</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">]</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">diff</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_word_sets_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_word_sets_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">get_word_sets_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between all items&#39; word sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many words are found in all versus the total number of unique words.</span>
<span class="sd">            </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        clean : bool</span>
<span class="sd">            whether to clean text when parsing. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">get_words_set</span><span class="p">(</span><span class="n">clean</span> <span class="o">=</span> <span class="n">clean</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">]</span>
        <span class="n">set_intersection</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>
        <span class="n">set_union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_intersection</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">set_union</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.add_instagram_user_posts"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.add_instagram_user_posts">[docs]</a>    <span class="k">def</span> <span class="nf">add_instagram_user_posts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves an Instagram user&#39;s posts from a username and adds to the Case.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        username : str</span>
<span class="sd">            username to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">posts</span> <span class="o">=</span> <span class="n">fetch_user_posts</span><span class="p">(</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span>
        
            <span class="n">shortcode</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">shortcode</span>
            <span class="n">caption</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">caption</span>
            <span class="n">hashtags</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">caption_hashtags</span>
            <span class="n">comment_count</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">comments</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">date</span>
            <span class="n">date_local</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">date_local</span>
            <span class="n">date_utc</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">date_utc</span>
            <span class="n">is_video</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">is_video</span>
            <span class="n">likes_count</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">likes</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">location</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">url</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">title</span>
            <span class="n">mediacount</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">mediacount</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">owner_id</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">owner_username</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="n">shortcode</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;__&#39;</span><span class="p">)</span>
        
            <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">shortcode</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;shortcode&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">date</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">date_local</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;date_local&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">date_utc</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;date_utc&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">likes_count</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;likes_count&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">url</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;url&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">location</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;location&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;title&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">mediacount</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;mediacount&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;user_id&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">username</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;username&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">username</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;author&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">data_type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">data_format</span> <span class="o">=</span> <span class="s1">&#39;str&#39;</span><span class="p">,</span> <span class="n">raw_data</span> <span class="o">=</span> <span class="n">caption</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">data_type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">data_format</span> <span class="o">=</span> <span class="s1">&#39;str&#39;</span><span class="p">,</span> <span class="n">raw_data</span> <span class="o">=</span> <span class="n">hashtags</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">data_type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">data_format</span> <span class="o">=</span> <span class="s1">&#39;str&#39;</span><span class="p">,</span> <span class="n">raw_data</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;comment count: </span><span class="si">{</span><span class="n">comment_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">data_type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">data_format</span> <span class="o">=</span> <span class="s1">&#39;str&#39;</span><span class="p">,</span> <span class="n">raw_data</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;likes count: </span><span class="si">{</span><span class="n">likes_count</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        
            <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="CaseItemSet.items_from_username_search"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.items_from_username_search">[docs]</a>    <span class="k">def</span> <span class="nf">items_from_username_search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs an Sherlock search on username and adds the results as CaseItems to the Case.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        username : str</span>
<span class="sd">            username to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">search_username</span><span class="p">(</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>

            <span class="n">site</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;response_text&#39;</span><span class="p">]</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;url_user&#39;</span><span class="p">]</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">domain_splitter</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="n">url_to_valid_attr_name</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;url_user&#39;</span><span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">url</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;URL&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">domain</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;domain&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata_entry</span> <span class="o">=</span> <span class="n">site</span><span class="p">,</span> <span class="n">metadata_category</span> <span class="o">=</span> <span class="s1">&#39;site&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">data_type</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">data_format</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">raw_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">)</span></div>
        
    
    <span class="c1"># Methods for comparing items</span>
    
<div class="viewcode-block" id="CaseItemSet.rawdata_cosine"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_cosine">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_cosine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span><span class="p">:</span> <span class="n">CaseItem</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span><span class="p">:</span> <span class="n">CaseItem</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the cosine similarity of two items&#39; sets of raw data based on word frequencies.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span>
        <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cosine_sim</span><span class="p">([</span><span class="n">joined1</span><span class="p">,</span> <span class="n">joined2</span><span class="p">])</span></div>

    
<div class="viewcode-block" id="CaseItemSet.rawdata_set_pair"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_set_pair">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_set_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns two items&#39; raw data sets as a tuple.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve from.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        
        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">data_source1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            
            <span class="n">ds1_split</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data_source1</span><span class="p">:</span>
                <span class="n">ds1_split</span> <span class="o">=</span> <span class="n">ds1_split</span> <span class="o">+</span> <span class="n">i</span>
            <span class="n">data_source1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">ds1_split</span><span class="p">)</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data_source1</span>  <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            
            <span class="n">data_source2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            
            <span class="n">ds2_split</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data_source2</span><span class="p">:</span>
                <span class="n">ds2_split</span> <span class="o">=</span> <span class="n">ds2_split</span> <span class="o">+</span> <span class="n">i</span>
            <span class="n">data_source2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">ds2_split</span><span class="p">)</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data_source2</span>  <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">data_source1</span><span class="p">,</span> <span class="n">data_source2</span><span class="p">)</span></div>
        
    
    
<div class="viewcode-block" id="CaseItemSet.rawdata_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of two items&#39; raw data sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any raw data sets shared by both items.</span>
<span class="sd">    </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.rawdata_intersect_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_intersect_size">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_intersect_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the intersect of two items&#39; raw data sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of raw data sets shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rawdata_intersect</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.rawdata_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of two items&#39; raw data sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any raw data sets *not* shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.rawdata_symmetric_difference_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_symmetric_difference_size">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_symmetric_difference_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the symmetric difference of two items&#39; raw data sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of raw data sets *not* shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rawdata_symmetric_difference</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">))</span></div>

    
<div class="viewcode-block" id="CaseItemSet.rawdata_jaccard_sim"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_jaccard_sim">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_jaccard_sim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between two items&#39;raw data sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many raw data entries are found in both versus the total number of entries.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">intersect_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data_source2</span><span class="p">))</span>
        <span class="n">union_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">data_source2</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span> 
            <span class="k">return</span> <span class="n">intersect_size</span> <span class="o">/</span> <span class="n">union_size</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></div>

        
<div class="viewcode-block" id="CaseItemSet.rawdata_comparison_series"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.rawdata_comparison_series">[docs]</a>    <span class="k">def</span> <span class="nf">rawdata_comparison_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all comparisons between two items&#39; sets of raw data as a Pandas series.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Disjunctive&#39;</span><span class="p">,</span> <span class="s1">&#39;Disjunctive size&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_cosine</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;N/A&#39;</span>

        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Set similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_jaccard_sim</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_intersect</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Intersect size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_intersect_size</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Disjunctive&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_symmetric_difference</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Disjunctive size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_symmetric_difference_size</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">series</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_rawdata_comparisons"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_rawdata_comparisons">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_rawdata_comparisons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compares items&#39; raw data for all combinations of two items. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First item&#39;</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Disjunctive&#39;</span><span class="p">,</span> <span class="s1">&#39;Disjunctive size&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            
            <span class="n">item_1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;First item&#39;</span><span class="p">]</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Disjunctive&#39;</span><span class="p">,</span> <span class="s1">&#39;Disjunctive size&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawdata_comparison_series</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Disjunctive&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Disjunctive&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;Set similarity&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.text_cosine"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.text_cosine">[docs]</a>    <span class="k">def</span> <span class="nf">text_cosine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the cosine similarity of two items&#39; text based on word frequencies.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare. Defaults to requesting from user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare. Defaults to requesting from user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">get_all_text</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">get_all_text</span><span class="p">()</span>

        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;. &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span>
        <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;. &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cosine_sim</span><span class="p">([</span><span class="n">joined1</span><span class="p">,</span> <span class="n">joined2</span><span class="p">])</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.text_levenshtein"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.text_levenshtein">[docs]</a>    <span class="k">def</span> <span class="nf">text_levenshtein</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the levenshtein distance between two items&#39; text.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare. Defaults to requesting from user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare. Defaults to requesting from user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">get_all_text</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">get_all_text</span><span class="p">()</span>

        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;. &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span>
        <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;. &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">lev</span><span class="p">(</span><span class="n">joined1</span><span class="p">,</span> <span class="n">joined2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.words_pair_list_to_str"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_pair_list_to_str">[docs]</a>    <span class="k">def</span> <span class="nf">words_pair_list_to_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns two items&#39;parsed words lists as a tuple containing two strings of words.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve from. Defaults to requesting from user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve from. Defaults to requesting from user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">data_source1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
            <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        
        
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">data_source2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;    &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">regex</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
            <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        
        <span class="k">return</span> <span class="p">(</span><span class="n">joined1</span><span class="p">,</span> <span class="n">joined2</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.words_cosine"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_cosine">[docs]</a>    <span class="k">def</span> <span class="nf">words_cosine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the cosine similarity of two items&#39; parsed words based on word frequencies.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare. Defaults to requesting from user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare. Defaults to requesting from user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">pair</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_pair_list_to_str</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cosine_sim</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.words_levenshtein"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_levenshtein">[docs]</a>    <span class="k">def</span> <span class="nf">words_levenshtein</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the levenshtein distance between two items&#39; parsed word sets.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare. Defaults to requesting from user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare. Defaults to requesting from user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">pair</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_pair_list_to_str</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">lev</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.words_set_pair"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_set_pair">[docs]</a>    <span class="k">def</span> <span class="nf">words_set_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns two items&#39; parsed word sets as a tuple.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve from.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        
        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">get_words_set</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">get_words_set</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">data_source1</span><span class="p">,</span> <span class="n">data_source2</span><span class="p">)</span></div>
        
    
    
<div class="viewcode-block" id="CaseItemSet.words_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">words_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of two items&#39; parsed word sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any words shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.words_intersect_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_intersect_size">[docs]</a>    <span class="k">def</span> <span class="nf">words_intersect_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the intersect of two items&#39; parsed word sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of words shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">words_intersect</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.words_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">words_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of two items&#39; parsed word sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any words *not* shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.words_symmetric_difference_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_symmetric_difference_size">[docs]</a>    <span class="k">def</span> <span class="nf">words_symmetric_difference_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the symmetric difference of two items&#39; parsed word sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of words *not* shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">words_symmetric_difference</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">))</span></div>

    
<div class="viewcode-block" id="CaseItemSet.words_set_sim"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_set_sim">[docs]</a>    <span class="k">def</span> <span class="nf">words_set_sim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between two items&#39; parsed words sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many words are found in both versus the total number of words found.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">intersect_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data_source2</span><span class="p">))</span>
        <span class="n">union_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">data_source2</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span> 
            <span class="k">return</span> <span class="n">intersect_size</span> <span class="o">/</span> <span class="n">union_size</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></div>
        

<div class="viewcode-block" id="CaseItemSet.words_comparison_series"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.words_comparison_series">[docs]</a>    <span class="k">def</span> <span class="nf">words_comparison_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all comparisons between two items&#39; parsed words as a Pandas series.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_cosine</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;N/A&#39;</span>

            
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_levenshtein</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Set similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_set_sim</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_intersect</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Intersect size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_intersect_size</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_symmetric_difference</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Difference size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_symmetric_difference_size</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">series</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_words_comparisons"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_words_comparisons">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_words_comparisons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_by</span> <span class="o">=</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compares items&#39; parsed words for all combinations of two items. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First item&#39;</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            
            <span class="n">item_1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;First item&#39;</span><span class="p">]</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">words_comparison_series</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="n">sort_by</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.infer_names"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.infer_names">[docs]</a>    <span class="k">def</span> <span class="nf">infer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names_source</span> <span class="o">=</span> <span class="s1">&#39;all_personal_names&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies personal names from items&#39; text data and appends to information sets. Uses list of all personal names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        names_source : str or list</span>
<span class="sd">            corpus of names corpus to use; or names corpus as list. Defaults to &#39;all_personal_names&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">infer_names</span><span class="p">(</span><span class="n">names_source</span> <span class="o">=</span> <span class="n">names_source</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="CaseItemSet.infer_countries"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.infer_countries">[docs]</a>    <span class="k">def</span> <span class="nf">infer_countries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies country names from items&#39; text data and appends to information sets. Uses list of all language names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of country names corpus to use; or country names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">infer_countries</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseItemSet.infer_cities"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.infer_cities">[docs]</a>    <span class="k">def</span> <span class="nf">infer_cities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies city names from items&#39; text data and appends to information sets. Uses list of all city names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of city names corpus to use; or city names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">infer_cities</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="CaseItemSet.infer_languages"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.infer_languages">[docs]</a>    <span class="k">def</span> <span class="nf">infer_languages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies language names from items&#39; text data and appends to information sets. Uses list of all language names by default. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of language names corpus to use; or language names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">infer_languages</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.infer_all_info_categories"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.infer_all_info_categories">[docs]</a>    <span class="k">def</span> <span class="nf">infer_all_info_categories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="s1">&#39;all_personal_names&#39;</span><span class="p">,</span> <span class="n">language</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies potential information from items&#39; text data and appends to information sets. Parses data if not parsed.</span>
<span class="sd">        </span>
<span class="sd">        Looks for:</span>
<span class="sd">            * personal names</span>
<span class="sd">            * country names</span>
<span class="sd">            * city names</span>
<span class="sd">            * language names</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        names : str or list</span>
<span class="sd">            corpus of names corpus to use; or names corpus as list. Defaults to &#39;all_personal_names&#39;.</span>
<span class="sd">        language : str or list</span>
<span class="sd">            language of city names corpus to use; or city names corpus as list. Defaults to &#39;all&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">infer_names</span><span class="p">(</span><span class="n">names_source</span> <span class="o">=</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infer_countries</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infer_cities</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infer_languages</span><span class="p">(</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.metadata_pair_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_pair_df">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_pair_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns two items&#39; metadata entries a pandas.DataFrame.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve from.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">df1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)</span>
        <span class="n">df1</span><span class="p">[</span><span class="n">item_1</span><span class="p">]</span> <span class="o">=</span> <span class="n">df1</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">df1</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="n">df2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)</span>
        <span class="n">df2</span><span class="p">[</span><span class="n">item_2</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">df2</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">df1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseItemSet.metadata_category_levenshteins"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_category_levenshteins">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_category_levenshteins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the levenshtein distance between metadata data entries for each category in two items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">input_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_pair_df</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">])</span>
        
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">input_df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            
            <span class="n">m1</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">input_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">category</span><span class="p">,</span> <span class="n">item_1</span><span class="p">])</span>
            <span class="n">m2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">input_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">category</span><span class="p">,</span> <span class="n">item_2</span><span class="p">])</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="n">m1</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">m2</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">):</span>
                
                <span class="k">if</span> <span class="n">m1</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">m1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

                <span class="k">if</span> <span class="n">m2</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">m2</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

                <span class="n">distance</span> <span class="o">=</span> <span class="n">lev</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">)</span>
                
                <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">output_df</span><span class="p">)</span>
                <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">category</span>
                <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span>
        
        <span class="k">return</span> <span class="n">output_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.metadata_mean_levenshteins"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_mean_levenshteins">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_mean_levenshteins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the mean levenshtein distance between metadata data entries for each category in two items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_category_levenshteins</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)[</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="CaseItemSet.metadata_list_pair"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_list_pair">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_list_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns two items&#39; metadata lists as a tuple.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve from.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        
        
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        
        <span class="k">return</span> <span class="p">(</span><span class="n">joined1</span><span class="p">,</span> <span class="n">joined2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.metadata_cosine"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_cosine">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_cosine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the cosine similarity of two items&#39; metadata lists based on word frequencies.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">pair</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_list_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cosine_sim</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.metadata_set_pair"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_set_pair">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_set_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns two items&#39; metadata sets as a tuple.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve from.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        
        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_set</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_set</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">data_source1</span><span class="p">,</span> <span class="n">data_source2</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.metadata_union"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_union">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the union of two items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., all metadata entries in either item.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.metadata_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of two items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any metadata shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.metadata_intersect_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_intersect_size">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_intersect_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the intersect of two items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of metadata entries shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata_intersect</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.metadata_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of two items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any metadata *not* shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.metadata_symmetric_difference_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_symmetric_difference_size">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_symmetric_difference_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the symmetric difference of two items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of metadata entries *not* shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata_symmetric_difference</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">))</span></div>

    
<div class="viewcode-block" id="CaseItemSet.metadata_set_sim"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_set_sim">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_set_sim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between two items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many metadata entries are found in both versus the total number of metadata entries found.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">intersect_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data_source2</span><span class="p">))</span>
        <span class="n">union_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">data_source2</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span> 
            <span class="k">return</span> <span class="n">intersect_size</span> <span class="o">/</span> <span class="n">union_size</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></div>
        

<div class="viewcode-block" id="CaseItemSet.metadata_comparison_series"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_comparison_series">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_comparison_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all comparisons between two items&#39; metadata entries as a Pandas series.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_cosine</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;N/A&#39;</span>
            
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Mean levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_mean_levenshteins</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Set similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_set_sim</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_intersect</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Intersect size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_intersect_size</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_symmetric_difference</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Difference size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_symmetric_difference_size</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">series</span></div>
    
<div class="viewcode-block" id="CaseItemSet.all_metadata_unions"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.all_metadata_unions">[docs]</a>    <span class="k">def</span> <span class="nf">all_metadata_unions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the unions of all metadata sets from all cominations of two items as a pandas.DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First item&#39;</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Union&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            
            <span class="n">item_1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;First item&#39;</span><span class="p">]</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">]</span>
            <span class="n">union</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_union</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
            <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Union&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">union</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">union</span><span class="p">)</span>
            
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Size&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_metadata_comparisons"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_metadata_comparisons">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_metadata_comparisons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_by</span> <span class="o">=</span> <span class="s1">&#39;Cosine similarity&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compares items&#39; metadata for all combinations of two items. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First item&#39;</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean levenshtein distance&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            
            <span class="n">item_1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;First item&#39;</span><span class="p">]</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean levenshtein distance&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_comparison_series</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="n">sort_by</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.info_list_pair"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_list_pair">[docs]</a>    <span class="k">def</span> <span class="nf">info_list_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns two items&#39; information lists as a tuple.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve from.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">joined1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        
        
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">joined2</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        
        <span class="k">return</span> <span class="p">(</span><span class="n">joined1</span><span class="p">,</span> <span class="n">joined2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.info_cosine"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_cosine">[docs]</a>    <span class="k">def</span> <span class="nf">info_cosine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the cosine similarity of two items&#39; information entries based on word frequencies.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to compare.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">pair</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_list_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cosine_sim</span><span class="p">([</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.info_set_pair"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_set_pair">[docs]</a>    <span class="k">def</span> <span class="nf">info_set_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns two items&#39; information sets as a tuple.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve from.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve from.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        
        <span class="n">data_source1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_1</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">()</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_2</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">data_source1</span><span class="p">,</span> <span class="n">data_source2</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="CaseItemSet.info_union"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_union">[docs]</a>    <span class="k">def</span> <span class="nf">info_union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the union of two items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., all information entries in either item.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.info_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">info_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of two items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any information shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.info_intersect_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_intersect_size">[docs]</a>    <span class="k">def</span> <span class="nf">info_intersect_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the intersect of two items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of information entries shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">info_intersect</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.info_symmetric_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_symmetric_difference">[docs]</a>    <span class="k">def</span> <span class="nf">info_symmetric_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of two items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., any information *not* shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">data_source1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">data_source2</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.info_symmetric_difference_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_symmetric_difference_size">[docs]</a>    <span class="k">def</span> <span class="nf">info_symmetric_difference_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the symmetric difference of two items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of information entries *not* shared by both items.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">info_symmetric_difference</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">))</span></div>

    
<div class="viewcode-block" id="CaseItemSet.info_set_sim"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_set_sim">[docs]</a>    <span class="k">def</span> <span class="nf">info_set_sim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between two items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many information entries are found in both versus the total number of information entries found.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">sets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_set_pair</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">data_source1</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">data_source2</span> <span class="o">=</span> <span class="n">sets</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">intersect_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">data_source2</span><span class="p">))</span>
        <span class="n">union_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_source1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">data_source2</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span> 
            <span class="k">return</span> <span class="n">intersect_size</span> <span class="o">/</span> <span class="n">union_size</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></div>
        

<div class="viewcode-block" id="CaseItemSet.info_comparison_series"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_comparison_series">[docs]</a>    <span class="k">def</span> <span class="nf">info_comparison_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all comparisons between two items&#39; information entries as a Pandas series.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_1 : str</span>
<span class="sd">            first item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        item_2 : str</span>
<span class="sd">            second item to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_1</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">item_2</span><span class="si">}</span><span class="s1"> not found in items&#39;</span><span class="p">)</span>

        <span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_cosine</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;N/A&#39;</span>
        
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Set similarity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_set_sim</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_intersect</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Intersect size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_intersect_size</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_symmetric_difference</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>
        <span class="n">series</span><span class="p">[</span><span class="s1">&#39;Difference size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_symmetric_difference_size</span><span class="p">(</span><span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">series</span></div>
    
<div class="viewcode-block" id="CaseItemSet.get_all_info_comparisons"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_info_comparisons">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_info_comparisons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_by</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compares items&#39; information entries for all combinations of two items. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First item&#39;</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean levenshtein distance&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            
            <span class="n">item_1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;First item&#39;</span><span class="p">]</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Cosine similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Set similarity&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect&#39;</span><span class="p">,</span> <span class="s1">&#39;Intersect size&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference&#39;</span><span class="p">,</span> <span class="s1">&#39;Difference size&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean levenshtein distance&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_comparison_series</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>

        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Intersect&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Difference&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        
        
        <span class="k">if</span> <span class="n">sort_by</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">sort_by</span><span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.all_info_unions"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.all_info_unions">[docs]</a>    <span class="k">def</span> <span class="nf">all_info_unions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the unions of all metadata sets from all cominations of two items as a pandas.DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First item&#39;</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Union&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            
            <span class="n">item_1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;First item&#39;</span><span class="p">]</span>
            <span class="n">item_2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Second item&#39;</span><span class="p">]</span>
            <span class="n">union</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_union</span><span class="p">(</span><span class="n">item_1</span> <span class="o">=</span> <span class="n">item_1</span><span class="p">,</span> <span class="n">item_2</span> <span class="o">=</span> <span class="n">item_2</span><span class="p">)</span>
            <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Union&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">union</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;Size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">union</span><span class="p">)</span>
            
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Size&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseItemSet.info_levenshteins"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.info_levenshteins">[docs]</a>    <span class="k">def</span> <span class="nf">info_levenshteins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the levenshtein distance between all combinations of information labels, organised by category. Returns a pandas.DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">categories</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_info_categories</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_category</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">select_by_category</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">select_by_category</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">categories</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Select_by_category must be a list or sting&#39;</span><span class="p">)</span>


        <span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">categories</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">select_by_category</span><span class="p">]</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;First label&#39;</span><span class="p">,</span> <span class="s1">&#39;First frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Second label&#39;</span><span class="p">,</span> <span class="s1">&#39;Second frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">])</span>
        
        <span class="n">all_info_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_info</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>

            <span class="n">info_df</span> <span class="o">=</span> <span class="n">all_info_df</span><span class="p">[</span><span class="n">all_info_df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">category</span><span class="p">]</span>
            <span class="n">info_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">info_df</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">])</span>

            <span class="n">category_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">info_set</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First label&#39;</span><span class="p">,</span> <span class="s1">&#39;Second label&#39;</span><span class="p">])</span>
            <span class="n">category_df</span><span class="p">[</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">np</span> <span class="o">=</span> <span class="n">category_df</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">np</span><span class="p">:</span>

                <span class="n">series</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_info_frequencies</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">category</span><span class="p">)</span>

                <span class="n">first</span> <span class="o">=</span> <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;First label&#39;</span><span class="p">]</span>
                <span class="n">first_freq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">series</span><span class="p">[</span><span class="n">series</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">first</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
                <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;First frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_freq</span>

                <span class="n">second</span> <span class="o">=</span> <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Second label&#39;</span><span class="p">]</span>
                <span class="n">second_freq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">series</span><span class="p">[</span><span class="n">series</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">second</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
                <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Second frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">second_freq</span>

                <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lev</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>
                <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">category</span>

                <span class="k">if</span> <span class="n">first_freq</span> <span class="o">&gt;=</span> <span class="n">second_freq</span><span class="p">:</span>
                    <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">second</span>

                <span class="n">category_df</span> <span class="o">=</span> <span class="n">category_df</span><span class="p">[[</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;First label&#39;</span><span class="p">,</span> <span class="s1">&#39;First frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Second label&#39;</span><span class="p">,</span> <span class="s1">&#39;Second frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]]</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">output_df</span><span class="p">,</span> <span class="n">category_df</span><span class="p">])</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output_df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.find_info_close_matches"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.find_info_close_matches">[docs]</a>    <span class="k">def</span> <span class="nf">find_info_close_matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cutoff</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds similar information entries based on text similarity. Returns a pandas.DataFrame.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cutoff : float</span>
<span class="sd">            the maximum levenshtein distance to be included in the result.</span>
<span class="sd">        select_by_category : str </span>
<span class="sd">            specifies an information category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool </span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * iterates through every combination of two information label/category tuples.</span>
<span class="sd">            * ranks based on levenshtein distance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info_levenshteins</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">cutoff</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseItemSet.metadata_levenshteins"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_levenshteins">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_levenshteins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the levenshtein distance between two metadata entries, organised by category. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">categories</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_categories</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">select_by_category</span> <span class="o">=</span> <span class="p">[</span><span class="n">select_by_category</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">select_by_category</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">select_by_category</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">categories</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by_category</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Select_by_category must be a list or sting&#39;</span><span class="p">)</span>


        <span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">categories</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">select_by_category</span><span class="p">]</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;First metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;First frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Second metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Second frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">])</span>
        
        <span class="n">all_metadata_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>

            <span class="n">metadata_df</span> <span class="o">=</span> <span class="n">all_metadata_df</span><span class="p">[</span><span class="n">all_metadata_df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">category</span><span class="p">]</span>
            <span class="n">metadata_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">metadata_df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">])</span>

            <span class="n">category_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">metadata_set</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Second metadata&#39;</span><span class="p">])</span>
            <span class="n">category_df</span><span class="p">[</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">np</span> <span class="o">=</span> <span class="n">category_df</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">np</span><span class="p">:</span>

                <span class="n">series</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_frequencies</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">category</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
                <span class="n">first</span> <span class="o">=</span> <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;First metadata&#39;</span><span class="p">]</span>
                <span class="n">first_freq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">series</span><span class="p">[</span><span class="n">series</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">first</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                
                <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;First frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_freq</span>

                <span class="n">second</span> <span class="o">=</span> <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Second metadata&#39;</span><span class="p">]</span>
                <span class="n">second_freq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">series</span><span class="p">[</span><span class="n">series</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">second</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Second frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">second_freq</span>

                <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lev</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">first</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">second</span><span class="p">))</span>
                <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">category</span>

                <span class="k">if</span> <span class="n">first_freq</span> <span class="o">&gt;</span> <span class="n">second_freq</span><span class="p">:</span>
                    <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first</span>
                <span class="k">if</span>  <span class="n">second_freq</span> <span class="o">&gt;</span> <span class="n">first_freq</span><span class="p">:</span>
                    <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">second</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">category_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Equally frequent&#39;</span>

                <span class="n">category_df</span> <span class="o">=</span> <span class="n">category_df</span><span class="p">[[</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;First metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;First frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Second metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Second frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]]</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">output_df</span><span class="p">,</span> <span class="n">category_df</span><span class="p">])</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output_df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.find_metadata_close_matches"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.find_metadata_close_matches">[docs]</a>    <span class="k">def</span> <span class="nf">find_metadata_close_matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cutoff</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">select_by_category</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds similar metadata entries based on text similarity. Returns a pandas.DataFrame.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cutoff : float</span>
<span class="sd">            the maximum levenshtein distance to be included in the result.</span>
<span class="sd">        select_by_category : str</span>
<span class="sd">            specifies a metadata category to return. Defaults to None: metadata from all categories are returned.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to return empty/None metadata entries. Defaults to True: empty/None entries are not returned.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * iterates through every combination of two metadata value/category tuples.</span>
<span class="sd">            * ranks based on levenshtein distance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_levenshteins</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">select_by_category</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">cutoff</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">df</span></div>

<div class="viewcode-block" id="CaseItemSet.keyword_levenshteins"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.keyword_levenshteins">[docs]</a>    <span class="k">def</span> <span class="nf">keyword_levenshteins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude_numbers</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">exclude_dates</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">600</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the levenshtein distance between all combinations of two keywords. Returns a pandas.DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">word_freqs_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_word_frequencies</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">limit</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">word_freqs_df</span> <span class="o">=</span> <span class="n">word_freqs_df</span><span class="p">[:</span><span class="n">limit</span><span class="p">]</span>
            
        <span class="n">word_set</span> <span class="o">=</span> <span class="n">word_freqs_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">word_set</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;First word&#39;</span><span class="p">,</span> <span class="s1">&#39;Second word&#39;</span><span class="p">])</span>
        <span class="n">output_df</span><span class="p">[</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">output_df</span><span class="p">[</span><span class="s1">&#39;First frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">output_df</span><span class="p">[</span><span class="s1">&#39;Second frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">output_df</span><span class="p">[</span><span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">np</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">to_drop</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">np</span><span class="p">:</span>

                    <span class="n">first</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;First word&#39;</span><span class="p">]</span>
                    <span class="n">first_freq</span> <span class="o">=</span> <span class="n">word_freqs_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">first</span><span class="p">,</span> <span class="s1">&#39;frequency&#39;</span><span class="p">]</span>
                    <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;First frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_freq</span>

                    <span class="n">second</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Second word&#39;</span><span class="p">]</span>
                    <span class="n">second_freq</span> <span class="o">=</span> <span class="n">word_freqs_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">second</span><span class="p">,</span> <span class="s1">&#39;frequency&#39;</span><span class="p">]</span>
                    <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Second frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">second_freq</span>

                    <span class="k">if</span> <span class="n">exclude_numbers</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">is_int</span><span class="p">(</span><span class="n">first</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">is_int</span><span class="p">(</span><span class="n">second</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                            <span class="n">to_drop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">continue</span>
                    
                    <span class="k">if</span> <span class="n">exclude_dates</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span>
                            <span class="p">((</span><span class="n">is_date</span><span class="p">(</span><span class="n">first</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
                            <span class="ow">or</span> <span class="p">(</span><span class="n">is_time</span><span class="p">(</span><span class="n">first</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
                            <span class="ow">or</span> <span class="p">(</span><span class="n">is_datetime</span><span class="p">(</span><span class="n">first</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">))</span>
                            <span class="ow">and</span> <span class="p">((</span><span class="n">is_date</span><span class="p">(</span><span class="n">second</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
                            <span class="ow">or</span> <span class="p">(</span><span class="n">is_time</span><span class="p">(</span><span class="n">second</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span>
                            <span class="ow">or</span> <span class="p">(</span><span class="n">is_datetime</span><span class="p">(</span><span class="n">second</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">))</span>
                        <span class="p">):</span>
                            
                            <span class="n">to_drop</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">continue</span>

                    <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lev</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">first_freq</span> <span class="o">&gt;</span> <span class="n">second_freq</span><span class="p">:</span>
                        <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span>  <span class="n">second_freq</span> <span class="o">&gt;</span> <span class="n">first_freq</span><span class="p">:</span>
                            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">second</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Equally frequent&#39;</span>

                    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">to_drop</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="p">[[</span><span class="s1">&#39;First word&#39;</span><span class="p">,</span> <span class="s1">&#39;First frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Second word&#39;</span><span class="p">,</span> <span class="s1">&#39;Second frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="s1">&#39;Most frequent&#39;</span><span class="p">]]</span>
        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output_df</span></div>

<div class="viewcode-block" id="CaseItemSet.find_keywords_close_matches"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.find_keywords_close_matches">[docs]</a>    <span class="k">def</span> <span class="nf">find_keywords_close_matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cutoff</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">exclude_numbers</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">600</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds similar keywords entries based on text similarity. Returns a pandas.DataFrame.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cutoff : float</span>
<span class="sd">            the maximum levenshtein distance to be included in the result.</span>
<span class="sd">        exclude_numbers : bool</span>
<span class="sd">            whether to ignore strings which may be integers or floats.</span>
<span class="sd">        limit : int</span>
<span class="sd">            the maximum number of comparisons to calculate. Used to prevent excessive runtime. Defaults to 600.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * iterates through every combination of two keywords.</span>
<span class="sd">            * ranks based on levenshtein distance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keyword_levenshteins</span><span class="p">(</span><span class="n">exclude_numbers</span> <span class="o">=</span> <span class="n">exclude_numbers</span><span class="p">,</span> <span class="n">limit</span> <span class="o">=</span> <span class="n">limit</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Levenshtein distance&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">cutoff</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">df</span></div>
    
    

    <span class="c1"># Methods for comparing multiple items</span>
    
<div class="viewcode-block" id="CaseItemSet.multi_items_metadata_union"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_metadata_union">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_metadata_union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the union of multiple items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., all metadata entries in all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item IDs (separate by &quot;,&quot;): &#39;</span><span class="p">)</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">set_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_set</span><span class="p">())</span>
        <span class="n">union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">union</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_metadata_union_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_metadata_union_size">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_metadata_union_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the union of multiple items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of unique metadata entries in all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">multi_items_metadata_union</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_metadata_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_metadata_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_metadata_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of multiple items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the metadata entries shared by all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item IDs (separate by &quot;,&quot;): &#39;</span><span class="p">)</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">set_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_set</span><span class="p">())</span>
        <span class="n">intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">intersect</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_metadata_intersect_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_metadata_intersect_size">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_metadata_intersect_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the intersect of multiple items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of metadata entries shared by all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">multi_items_metadata_intersect</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_metadata_symmetric_differences"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_metadata_symmetric_differences">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_metadata_symmetric_differences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of multiple items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the metadata entries *not* shared by all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item IDs (separate by &quot;,&quot;): &#39;</span><span class="p">)</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="n">diff_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">item_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata_set</span><span class="p">()</span>
            <span class="n">diff_set</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">diff_set</span><span class="p">,</span> <span class="n">item_set</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">diff_set</span></div>


<div class="viewcode-block" id="CaseItemSet.multi_items_metadata_symmetric_differences_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_metadata_symmetric_differences_size">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_metadata_symmetric_differences_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the symmetric difference of multiple items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of metadata entries *not* shared by all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">multi_items_metadata_symmetric_differences</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_metadata_set_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_metadata_set_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_metadata_set_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between multiple items&#39; metadata sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many metadata entries are found in all items versus the total number of metadata entries found.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item IDs (separate by &quot;,&quot;): &#39;</span><span class="p">)</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        
        <span class="n">metadata_union_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_items_metadata_union_size</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">)</span>
        <span class="n">metadata_intersect_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_items_metadata_intersect_size</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">)</span>
        <span class="n">metadata_similarity</span> <span class="o">=</span> <span class="n">metadata_intersect_size</span> <span class="o">/</span> <span class="n">metadata_union_size</span>

        <span class="k">return</span> <span class="n">metadata_similarity</span></div>


<div class="viewcode-block" id="CaseItemSet.multi_items_info_union"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_info_union">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_info_union</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the union of multiple items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., all information entries in all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item IDs (separate by &quot;,&quot;): &#39;</span><span class="p">)</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">set_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">())</span>
        <span class="n">union</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">union</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_info_union_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_info_union_size">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_info_union_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the union of multiple items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of unique information entries in all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">multi_items_info_union</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_info_intersect"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_info_intersect">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_info_intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the intersect of multiple items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the information entries shared by all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item IDs (separate by &quot;,&quot;): &#39;</span><span class="p">)</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="n">set_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">set_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">())</span>
        <span class="n">intersect</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">set_list</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">intersect</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_info_intersect_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_info_intersect_size">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_info_intersect_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the intersect of multiple items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of information entries shared by all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">multi_items_info_intersect</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_info_symmetric_differences"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_info_symmetric_differences">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_info_symmetric_differences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric difference of multiple items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the information entries *not* shared by all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item IDs (separate by &quot;,&quot;): &#39;</span><span class="p">)</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="n">diff_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_list</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">item_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">get_info_set</span><span class="p">()</span>
            <span class="n">diff_set</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">diff_set</span><span class="p">,</span> <span class="n">item_set</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">diff_set</span></div>


<div class="viewcode-block" id="CaseItemSet.multi_items_info_symmetric_differences_size"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_info_symmetric_differences_size">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_info_symmetric_differences_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the size of the symmetric difference of multiple items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., the number of information entries *not* shared by all items given.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">multi_items_info_symmetric_differences</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.multi_items_info_set_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.multi_items_info_set_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">multi_items_info_set_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_list</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Jaccard similarity between multiple items&#39; information sets.</span>
<span class="sd">        </span>
<span class="sd">        i.e., how many information entries are found in all items versus the total number of information entries found.</span>
<span class="sd">          </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_list : list</span>
<span class="sd">            list of item ID&#39;s to retrieve data from. Defaults to requesting user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_list</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item IDs (separate by &quot;,&quot;): &#39;</span><span class="p">)</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        
        <span class="n">info_union_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_items_info_union_size</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">)</span>
        <span class="n">info_intersect_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_items_info_intersect_size</span><span class="p">(</span><span class="n">item_list</span> <span class="o">=</span> <span class="n">item_list</span><span class="p">)</span>
        <span class="n">info_similarity</span> <span class="o">=</span> <span class="n">info_intersect_size</span> <span class="o">/</span> <span class="n">info_union_size</span>

        <span class="k">return</span> <span class="n">info_similarity</span></div>

    <span class="c1"># Methods for parsing and cleaning data</span>
    
<div class="viewcode-block" id="CaseItemSet.parse_rawdata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.parse_rawdata">[docs]</a>    <span class="k">def</span> <span class="nf">parse_rawdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses raw data entries for all inputted items. Defaults to all. </span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_id : str</span>
<span class="sd">            one or more item ID&#39;s to parse.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.Series</span>
<span class="sd">            a Pandas series of parsed data dictionaries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Item ID must be a string&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_id</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="o">!=</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">parse_rawdata</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">extract_links_from_html</span><span class="p">(</span><span class="n">append_to_item</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">()[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.extract_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.extract_links">[docs]</a>    <span class="k">def</span> <span class="nf">extract_links</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts links from all inputted items&#39; raw data. Defaults to &#39;all&#39;. </span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_id : str</span>
<span class="sd">            one or more item ID&#39;s to parse.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Item ID must be a string&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_id</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="o">!=</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">extract_links_from_html</span><span class="p">(</span><span class="n">append_to_item</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>

        
    <span class="c1"># Methods for comparing items&#39; time metadata</span>
    
<div class="viewcode-block" id="CaseItemSet.created_time_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.created_time_difference">[docs]</a>    <span class="k">def</span> <span class="nf">created_time_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the time difference between items&#39; created time metadata entries.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        time_difference : datetime.timedelta</span>
<span class="sd">            the time difference between items&#39; created time metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
            
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have a created date-time&#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have a created date-time entry&#39;</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">time_difference</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dt1</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">dt2</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.last_changed_time_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.last_changed_time_difference">[docs]</a>    <span class="k">def</span> <span class="nf">last_changed_time_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the time difference between items&#39; last changed time metadata entries.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        time_difference : datetime.timedelta</span>
<span class="sd">            the time difference between items&#39; last changed time metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;last_changed_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have a last edited date-time entry&#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;last_changed_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have a last edited date-time entry&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">time_difference</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dt1</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">dt2</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.upload_time_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.upload_time_difference">[docs]</a>    <span class="k">def</span> <span class="nf">upload_time_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the time difference between items&#39; uploaded time metadata entries.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        time_difference : datetime.timedelta</span>
<span class="sd">            the time difference between items&#39; uploaded time metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;uploaded_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have an uploaded date-time entry&#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;uploaded_at&#39;</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have an uploaded date-time entry&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">time_difference</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dt1</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">dt2</span><span class="p">))</span></div>

<div class="viewcode-block" id="CaseItemSet.get_created_times"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_created_times">[docs]</a>    <span class="k">def</span> <span class="nf">get_created_times</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns created time metadata for all items as a pandas.DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">,</span> <span class="s1">&#39;Created at&#39;</span><span class="p">])</span>

        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>

            <span class="n">series</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">dt</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dt</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_id</span><span class="p">,</span> <span class="n">dt</span><span class="p">]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Created at&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">NaT</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>
    
    

<div class="viewcode-block" id="CaseItemSet.get_uploaded_times"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_uploaded_times">[docs]</a>    <span class="k">def</span> <span class="nf">get_uploaded_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns uploaded time metadata for all items as a pandas.DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">,</span> <span class="s1">&#39;Uploaded at&#39;</span><span class="p">])</span>

        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>

                <span class="n">series</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;uploaded_at&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">dt</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dt</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_id</span><span class="p">,</span> <span class="n">dt</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Uploaded at&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">NaT</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseItemSet.get_last_changed_times"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_last_changed_times">[docs]</a>    <span class="k">def</span> <span class="nf">get_last_changed_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns last changed time metadata for all items as a pandas.DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">,</span> <span class="s1">&#39;Last changed at&#39;</span><span class="p">])</span>

        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>

            <span class="n">series</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="s1">&#39;last_changed_at&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">dt</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dt</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_id</span><span class="p">,</span> <span class="n">dt</span><span class="p">]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Last changed at&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">NaT</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseItemSet.get_all_time_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.get_all_time_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_time_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all time metadata as a pandas.DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">created_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_created_times</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Item&#39;</span><span class="p">)</span>
        <span class="n">uploaded_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_uploaded_times</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Item&#39;</span><span class="p">)</span>
        <span class="n">changed_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_last_changed_times</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Item&#39;</span><span class="p">)</span>
        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">created_df</span><span class="p">,</span> <span class="n">uploaded_df</span><span class="p">,</span> <span class="n">changed_df</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Created at&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output_df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.created_time_range"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.created_time_range">[docs]</a>    <span class="k">def</span> <span class="nf">created_time_range</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the difference between the first and last created time metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_created_times</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No created times found&#39;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseItemSet.uploaded_time_range"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.uploaded_time_range">[docs]</a>    <span class="k">def</span> <span class="nf">uploaded_time_range</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the difference between the first and last uploaded time metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_uploaded_times</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No uploaded times found&#39;</span><span class="p">)</span></div>

            
<div class="viewcode-block" id="CaseItemSet.last_changed_time_range"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.last_changed_time_range">[docs]</a>    <span class="k">def</span> <span class="nf">last_changed_time_range</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the difference between the oldest and most recent last changed time metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_last_changed_times</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No last changed times found&#39;</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.timeline"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.timeline">[docs]</a>    <span class="k">def</span> <span class="nf">timeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;months&#39;</span><span class="p">,</span> <span class="n">intervals</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">date_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots a timeline of items&#39; time metadata. User can select which metadata to plot and the units to use. Defaults to &#39;created_at&#39;.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        plot : str</span>
<span class="sd">            which time metadata variable to plot. Defaults to &#39;created_at&#39;.</span>
<span class="sd">        units : str</span>
<span class="sd">            time units to use for plot. Defaults to &#39;months&#39;.</span>
<span class="sd">        intervals : int</span>
<span class="sd">            time intervals to use for plot. Defaults to 4.</span>
<span class="sd">        date_format : str</span>
<span class="sd">            date format to use for plot. Defaults to &#39;%d.%m.%Y&#39;.</span>
<span class="sd">        colour : str</span>
<span class="sd">            colour to use for plot. Defaults to &#39;blue&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">plot</span> <span class="o">==</span> <span class="s1">&#39;created_at&#39;</span><span class="p">:</span>
            <span class="n">dates_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_created_times</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">dates</span> <span class="o">=</span> <span class="n">dates_res</span><span class="p">[</span><span class="s1">&#39;Created at&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">plot</span> <span class="o">==</span> <span class="s1">&#39;uploaded_at&#39;</span><span class="p">:</span>
            <span class="n">dates_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_uploaded_times</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">dates</span> <span class="o">=</span> <span class="n">dates_res</span><span class="p">[</span><span class="s1">&#39;Uploaded at&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">plot</span> <span class="o">==</span> <span class="s1">&#39;last_changed&#39;</span><span class="p">:</span>
            <span class="n">dates_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_last_changed_times</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
            <span class="n">dates</span> <span class="o">=</span> <span class="n">dates_res</span><span class="p">[</span><span class="s1">&#39;Last changed at&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">names</span> <span class="o">=</span> <span class="n">dates_res</span><span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        
        <span class="n">plot_timeline</span><span class="p">(</span><span class="n">dates</span> <span class="o">=</span> <span class="n">dates</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="n">names</span><span class="p">,</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">plot</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">,</span> <span class="n">intervals</span> <span class="o">=</span> <span class="n">intervals</span><span class="p">,</span> <span class="n">date_format</span> <span class="o">=</span> <span class="n">date_format</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">colour</span><span class="p">)</span></div>
        
        
<div class="viewcode-block" id="CaseItemSet.metadata_time_ranges"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.metadata_time_ranges">[docs]</a>    <span class="k">def</span> <span class="nf">metadata_time_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the time difference between created and last changed metadata for all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_time_metadata</span><span class="p">()</span>

        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Created at&#39;</span><span class="p">]</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Last changed at&#39;</span><span class="p">]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="s1">&#39;start&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;start&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;start&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;end&#39;</span><span class="p">]</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.plot_metadata_time_ranges"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.plot_metadata_time_ranges">[docs]</a>    <span class="k">def</span> <span class="nf">plot_metadata_time_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots a timeline of items&#39; edit histories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_time_ranges</span><span class="p">()</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">plot_date_range_timeline</span><span class="p">(</span><span class="n">source</span> <span class="o">=</span> <span class="n">df</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span><span class="p">)</span></div>
    
    

<div class="viewcode-block" id="CaseItemSet.normalised_time_metadata_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.normalised_time_metadata_difference">[docs]</a>    <span class="k">def</span> <span class="nf">normalised_time_metadata_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">time_metadata</span> <span class="o">=</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;years&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the normalised time difference for two items&#39; time metadata.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        first_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        second_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        time_metadata : str</span>
<span class="sd">            name of time metadata category to use. Defaults to &#39;created_at&#39;.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit of time for results. Defaults to &#39;years&#39;.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : float</span>
<span class="sd">            a value between 0 and 1, where 0 is 0 distance and 1 is infinity.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * Normalisation function: map_inf_to_1()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
    
        <span class="n">df1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_time_metadata</span><span class="p">()</span>
        <span class="n">df2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_time_metadata</span><span class="p">()</span>
        
        <span class="n">first_datetime</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">df1</span><span class="p">[</span><span class="n">df1</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">time_metadata</span><span class="p">][</span><span class="s1">&#39;Metadata&#39;</span><span class="p">][</span><span class="n">time_metadata</span><span class="p">])</span>
        <span class="n">second_datetime</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="n">df2</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">time_metadata</span><span class="p">][</span><span class="s1">&#39;Metadata&#39;</span><span class="p">][</span><span class="n">time_metadata</span><span class="p">])</span>
    
        <span class="k">return</span> <span class="n">normalised_time_difference</span><span class="p">(</span><span class="n">first_datetime</span> <span class="o">=</span> <span class="n">first_datetime</span><span class="p">,</span> <span class="n">second_datetime</span> <span class="o">=</span> <span class="n">first_datetime</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.normalised_time_metadata_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.normalised_time_metadata_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">normalised_time_metadata_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">time_metadata</span> <span class="o">=</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;years&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the normalised time similarity for two items&#39; time metadata.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        first_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        second_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        time_metadata : str</span>
<span class="sd">            name of time metadata category to use. Defaults to &#39;created_at&#39;.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit of time for results. Defaults to &#39;years&#39;.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : float</span>
<span class="sd">            a value between 0 and 1, where 0 is 0 distance and 1 is infinity.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * Normalisation function: map_inf_to_0()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
    
        <span class="n">df1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_time_metadata</span><span class="p">()</span>
        <span class="n">df2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">get_time_metadata</span><span class="p">()</span>
        
        <span class="n">first_datetime</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">df1</span><span class="p">[</span><span class="n">df1</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">time_metadata</span><span class="p">][</span><span class="s1">&#39;Metadata&#39;</span><span class="p">][</span><span class="n">time_metadata</span><span class="p">])</span>
        <span class="n">second_datetime</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="n">df2</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">time_metadata</span><span class="p">][</span><span class="s1">&#39;Metadata&#39;</span><span class="p">][</span><span class="n">time_metadata</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">normalised_time_difference_inverse</span><span class="p">(</span><span class="n">first_datetime</span> <span class="o">=</span> <span class="n">first_datetime</span><span class="p">,</span> <span class="n">second_datetime</span> <span class="o">=</span> <span class="n">second_datetime</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>

    

<div class="viewcode-block" id="CaseItemSet.time_diff_from_date"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.time_diff_from_date">[docs]</a>    <span class="k">def</span> <span class="nf">time_diff_from_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by</span> <span class="o">=</span> <span class="s1">&#39;created_at&#39;</span><span class="p">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">within</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;days&#39;</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns all items which have time metadata within a specified range from a given date. </span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by : str</span>
<span class="sd">            name of time metadata category to use. Defaults to &#39;created_at&#39;.</span>
<span class="sd">        date : str</span>
<span class="sd">            date or datetime to compare items with. Defaults to requesting user input.</span>
<span class="sd">        within : int</span>
<span class="sd">            maximum time range.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit of time for results. Defaults to &#39;years&#39;.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether or not to ignore time metadata values which equal None or &#39;&#39;. Defaults to True.</span>
<span class="sd">        </span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            a pandas.DataFrame containing details for items which lie in the time range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">date</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">date</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Find dates close to: &#39;</span><span class="p">)</span>

        <span class="n">ref_dt</span> <span class="o">=</span> <span class="n">str_to_datetime</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">,</span> <span class="s1">&#39;Time difference&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>

        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>

            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">created_at</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">select_by</span><span class="p">,</span> <span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">dt</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">time_delta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ref_dt</span> <span class="o">-</span> <span class="n">dt</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time_delta</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">time_delta</span><span class="p">]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;days&#39;</span><span class="p">:</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">within</span><span class="p">)</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="p">[</span><span class="n">output_df</span><span class="p">[</span><span class="s1">&#39;Time difference&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">limit</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">output_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Time difference&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

    

    <span class="c1"># Methods for comparing items&#39; geolocation metadata</span>
    
<div class="viewcode-block" id="CaseItemSet.coordinates_distance"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.coordinates_distance">[docs]</a>    <span class="k">def</span> <span class="nf">coordinates_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the geographic distance between two items using their coordinates metadata.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        first_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        second_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit for measurement.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        coordinates_distance : int</span>
<span class="sd">            distance in unit specified by user; defaults to &#39;kilometers&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
            
        <span class="n">first_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">first_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>
        
        <span class="n">second_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">second_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">coordinates_distance</span><span class="p">(</span><span class="n">first_coordinates</span><span class="p">,</span> <span class="n">second_coordinates</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.locations_distance"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.locations_distance">[docs]</a>    <span class="k">def</span> <span class="nf">locations_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the geographic distance between two items using their locations metadata.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        first_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        second_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit for measurement.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        locations_distance : int</span>
<span class="sd">            distance in unit specified by user; defaults to &#39;kilometers&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
        
        <span class="n">first_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">first_location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>
        
        <span class="n">second_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">second_location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>

        <span class="n">first_coordinates</span> <span class="o">=</span> <span class="n">get_location_coordinates</span><span class="p">(</span><span class="n">first_location</span><span class="p">)</span>
        <span class="n">second_coordinates</span> <span class="o">=</span> <span class="n">get_location_coordinates</span><span class="p">(</span><span class="n">second_location</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">coordinates_distance</span><span class="p">(</span><span class="n">first_coordinates</span> <span class="o">=</span> <span class="n">first_coordinates</span><span class="p">,</span> <span class="n">second_coordinates</span> <span class="o">=</span> <span class="n">second_coordinates</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseItemSet.normalised_coordinates_metadata_diffference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.normalised_coordinates_metadata_diffference">[docs]</a>    <span class="k">def</span> <span class="nf">normalised_coordinates_metadata_diffference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the normalised distance between two items&#39; coordinates, using units provided by user.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        first_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        second_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit for measurement.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : float</span>
<span class="sd">            a value between 0 and 1, where 0 is 0 distance and 1 is infinite distance.</span>
<span class="sd">        </span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * Normalisation function: map_inf_to_1()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
            
        <span class="n">first_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">first_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>
        
        <span class="n">second_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">second_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">normalised_coordinates_distance</span><span class="p">(</span><span class="n">first_coordinates</span> <span class="o">=</span> <span class="n">first_coordinates</span><span class="p">,</span> <span class="n">second_coordinates</span> <span class="o">=</span> <span class="n">second_coordinates</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.normalised_coordinates_metadata_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.normalised_coordinates_metadata_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">normalised_coordinates_metadata_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the inverse of the normalised distance between two items&#39; coordinates, using units provided by user.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        first_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        second_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit for measurement.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : float</span>
<span class="sd">            a value between 0 and 1, where 0 is infinite distance and 0 is infinite distance.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * Normalisation function: map_inf_to_0()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
            
        <span class="n">first_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">first_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>
        
        <span class="n">second_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">second_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have coordinates metadata&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">normalised_coordinates_distance_inverse</span><span class="p">(</span><span class="n">first_coordinates</span> <span class="o">=</span> <span class="n">first_coordinates</span><span class="p">,</span> <span class="n">second_coordinates</span> <span class="o">=</span> <span class="n">second_coordinates</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.normalised_location_metadata_difference"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.normalised_location_metadata_difference">[docs]</a>    <span class="k">def</span> <span class="nf">normalised_location_metadata_difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the normalised distance between two items&#39; location metadata entries, using units provided by user.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        first_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        second_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit for measurement.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : float</span>
<span class="sd">            a value between 0 and 1, where 0 is 0 distance and 1 is infinite distance.</span>
<span class="sd">        </span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * Normalisation function: map_inf_to_1()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
        
        <span class="n">first_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">first_location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>
        
        <span class="n">second_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">second_location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">normalised_locations_distance</span><span class="p">(</span><span class="n">first_location</span> <span class="o">=</span> <span class="n">first_location</span><span class="p">,</span> <span class="n">second_location</span> <span class="o">=</span> <span class="n">second_location</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.normalised_location_metadata_similarity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.normalised_location_metadata_similarity">[docs]</a>    <span class="k">def</span> <span class="nf">normalised_location_metadata_similarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">second_item</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the inverse of the normalised distance between two items&#39; location metadata entries, using units provided by user.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        first_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        second_item : str</span>
<span class="sd">            item ID of first item for comparison. Defaults to requesting user input.</span>
<span class="sd">        units : str</span>
<span class="sd">            unit for measurement.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : float</span>
<span class="sd">            a value between 0 and 1, where 0 is infinite distance and 0 is infinite distance.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">            * Normalisation function: map_inf_to_0()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">first_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">second_item</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">second_item</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>
        
        <span class="n">first_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">first_item</span><span class="p">)</span><span class="o">.</span><span class="n">location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">first_location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">first_item</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>
        
        <span class="n">second_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span><span class="o">.</span><span class="n">location_metadata</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">second_location</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">second_item</span><span class="si">}</span><span class="s1"> does not have location metadata&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">normalised_locations_distance_inverse</span><span class="p">(</span><span class="n">first_location</span> <span class="o">=</span> <span class="n">first_location</span><span class="p">,</span> <span class="n">second_location</span> <span class="o">=</span> <span class="n">second_location</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span></div>

    

    <span class="c1"># Methods for checking if items and data are included in the item set</span>
    
<div class="viewcode-block" id="CaseItemSet.check_for_item_id"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.check_for_item_id">[docs]</a>    <span class="k">def</span> <span class="nf">check_for_item_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if an item ID is in the item set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>
    
        <span class="k">if</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">else</span><span class="p">:</span> 
            <span class="k">return</span> <span class="kc">False</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.check_for_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.check_for_info">[docs]</a>    <span class="k">def</span> <span class="nf">check_for_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a string matches any of the item set&#39;s information entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Information label: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_info</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">category</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">else</span><span class="p">:</span> 
            <span class="k">return</span> <span class="kc">False</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.check_for_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.check_for_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">check_for_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a string matches any of the item set&#39;s metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">metadata</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Metadata label: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">(</span><span class="n">select_by_category</span> <span class="o">=</span> <span class="n">category</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">else</span><span class="p">:</span> 
            <span class="k">return</span> <span class="kc">False</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.check_for_link"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.check_for_link">[docs]</a>    <span class="k">def</span> <span class="nf">check_for_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a string matches any of the item set&#39;s link entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">link</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Link: &#39;</span><span class="p">)</span>
        
        <span class="n">links_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_links_set</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links_set</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        
        <span class="k">else</span><span class="p">:</span> 
            <span class="k">return</span> <span class="kc">False</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.check_for_address"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.check_for_address">[docs]</a>    <span class="k">def</span> <span class="nf">check_for_address</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a string matches any of the item set&#39;s address metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Address: &#39;</span><span class="p">)</span>
        
        <span class="n">addresses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_addresses</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">addresses</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        
        <span class="k">else</span><span class="p">:</span> 
            <span class="k">return</span> <span class="kc">False</span></div>
    
    

<div class="viewcode-block" id="CaseItemSet.check_link_between"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.check_link_between">[docs]</a>    <span class="k">def</span> <span class="nf">check_link_between</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_id2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if an item contains a link to another item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_id2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>

        <span class="n">item_2_address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id2</span><span class="p">)</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">item_2_address</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">item_1_links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id1</span><span class="p">)</span><span class="o">.</span><span class="n">links</span>
        <span class="k">if</span> <span class="n">item_1_links</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">item_2_address</span> <span class="ow">in</span> <span class="n">item_1_links</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="CaseItemSet.check_ref_between"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.check_ref_between">[docs]</a>    <span class="k">def</span> <span class="nf">check_ref_between</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id1</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">item_id2</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if an item contains a reference to another item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id1</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id1</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;First item ID: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_id2</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id2</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Second item ID: &#39;</span><span class="p">)</span>

        <span class="n">item_1_refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id1</span><span class="p">)</span><span class="o">.</span><span class="n">references</span>
        <span class="k">if</span> <span class="n">item_1_refs</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">item_2_refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id2</span><span class="p">)</span><span class="o">.</span><span class="n">references</span>
        <span class="k">if</span> <span class="n">item_2_refs</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">item_2_refs</span> <span class="ow">in</span> <span class="n">item_1_refs</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="k">return</span> <span class="kc">False</span></div>
        

    <span class="c1"># Methods for indexing items by their data</span>
    
<div class="viewcode-block" id="CaseItemSet.index_by_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_info">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by_labels</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">by_categories</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by information each item contains. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">all_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_info</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">all_info</span><span class="p">[[</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">by_labels</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">by_categories</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
            
            <span class="n">info</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">category</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">found_series</span> <span class="o">=</span> <span class="n">all_info</span><span class="p">[</span>
                                    <span class="p">(</span><span class="n">all_info</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">label</span><span class="p">)</span> 
                                    <span class="o">&amp;</span> <span class="p">(</span><span class="n">all_info</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">category</span><span class="p">)</span>
                                    <span class="p">][</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span>
                
                <span class="n">found_in</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_freqs</span> <span class="o">=</span> <span class="n">found_series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_in</span><span class="p">)</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_freqs</span>
            
            <span class="n">info</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">])</span>
        
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">by_labels</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;Label&#39;</span>

            
            <span class="k">if</span> <span class="n">by_categories</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;Category&#39;</span>
        
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">info</span><span class="p">[</span><span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">mask_term</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">found_series</span> <span class="o">=</span> <span class="n">all_info</span><span class="p">[</span><span class="n">all_info</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">==</span> <span class="n">mask_term</span><span class="p">][</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span>
                <span class="n">found_in</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_freqs</span> <span class="o">=</span> <span class="n">found_series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_in</span><span class="p">)</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span>
                <span class="n">info</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_freqs</span>
            
            <span class="k">if</span> <span class="s1">&#39;Label&#39;</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">])</span>
            
            <span class="k">if</span> <span class="s1">&#39;Category&#39;</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">])</span>
            
        <span class="k">return</span> <span class="n">info</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.index_by_info_label"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_info_label">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_info_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by information labels they contain. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_by_info</span><span class="p">(</span><span class="n">by_categories</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.index_by_info_category"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_info_category">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_info_category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by information categories they contain. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_by_info</span><span class="p">(</span><span class="n">by_labels</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.index_by_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by_entries</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">by_categories</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by each item&#39;s metadata. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">all_metadata</span><span class="p">[[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">by_entries</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">by_categories</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
            
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">category</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">found_series</span> <span class="o">=</span> <span class="n">all_metadata</span><span class="p">[</span>
                                    <span class="p">(</span><span class="n">all_metadata</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entry</span><span class="p">)</span> 
                                    <span class="o">&amp;</span> <span class="p">(</span><span class="n">all_metadata</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">category</span><span class="p">)</span>
                                    <span class="p">][</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span>
                
                <span class="n">found_in</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_freqs</span> <span class="o">=</span> <span class="n">found_series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_in</span><span class="p">)</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_freqs</span>
            
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">])</span>
        
        <span class="k">else</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">by_entries</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;Metadata&#39;</span>

            
            <span class="k">if</span> <span class="n">by_categories</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;Category&#39;</span>

            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">mask_term</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">found_series</span> <span class="o">=</span> <span class="n">all_metadata</span><span class="p">[</span><span class="n">all_metadata</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">==</span> <span class="n">mask_term</span><span class="p">][</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span>
                <span class="n">found_in</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_freqs</span> <span class="o">=</span> <span class="n">found_series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_in</span><span class="p">)</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_freqs</span>
            
            <span class="k">if</span> <span class="s1">&#39;Metadata&#39;</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">])</span>
            
            <span class="k">if</span> <span class="s1">&#39;Category&#39;</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">])</span>
        
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">metadata</span></div>
    
<div class="viewcode-block" id="CaseItemSet.index_by_metadata_entry"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_metadata_entry">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_metadata_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by each item&#39;s metadata entries. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_by_metadata</span><span class="p">(</span><span class="n">by_categories</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.index_by_metadata_category"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_metadata_category">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_metadata_category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by each item&#39;s categories. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_by_metadata</span><span class="p">(</span><span class="n">by_entries</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="CaseItemSet.index_by_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_words">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word_limit</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by the words they contain. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>
        <span class="n">words</span> <span class="o">=</span> <span class="n">all_words</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        
        
        <span class="n">words</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">words</span><span class="p">[</span><span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">words</span><span class="p">[</span><span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">words</span><span class="p">[</span><span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">words</span><span class="p">[</span><span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="k">if</span> <span class="n">word_limit</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">=</span> <span class="n">words</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span><span class="n">word_limit</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">words</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="n">words</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">found_series</span> <span class="o">=</span> <span class="n">all_words</span><span class="p">[</span><span class="n">all_words</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entry</span><span class="p">][</span><span class="s1">&#39;found_in&#39;</span><span class="p">]</span>
                <span class="n">found_in</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_freqs</span> <span class="o">=</span> <span class="n">found_series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="n">words</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>
                <span class="n">words</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_in</span><span class="p">)</span>
                <span class="n">words</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span>
                <span class="n">words</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span>
                <span class="n">words</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_freqs</span>
        
        <span class="n">words</span><span class="p">[</span><span class="s1">&#39;Word&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">words</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span>
        <span class="n">words</span> <span class="o">=</span> <span class="n">words</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">words</span> <span class="o">=</span> <span class="n">words</span><span class="p">[[</span><span class="s1">&#39;Word&#39;</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]]</span>
        
        <span class="k">return</span> <span class="n">words</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Word&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>
        
    
    
<div class="viewcode-block" id="CaseItemSet.index_by_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_links">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by their links. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">all_links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_links</span><span class="p">()</span>
        <span class="n">links</span> <span class="o">=</span> <span class="n">all_links</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        
        <span class="n">links</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">links</span><span class="p">[</span><span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">links</span><span class="p">[</span><span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">links</span><span class="p">[</span><span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">links</span><span class="p">[</span><span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">links</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="n">links</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">found_series</span> <span class="o">=</span> <span class="n">all_links</span><span class="p">[</span><span class="n">all_links</span><span class="p">[</span><span class="s1">&#39;Link&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entry</span><span class="p">][</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span>
                <span class="n">found_in</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_freqs</span> <span class="o">=</span> <span class="n">found_series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="n">links</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>
                <span class="n">links</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_in</span><span class="p">)</span>
                <span class="n">links</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span>
                <span class="n">links</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span>
                <span class="n">links</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_freqs</span>
        
        <span class="k">return</span> <span class="n">links</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Link&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseItemSet.index_by_refs"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_refs">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by their references. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_refs</span><span class="p">()</span>
        <span class="n">refs</span> <span class="o">=</span> <span class="n">all_refs</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        
        <span class="n">refs</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">refs</span><span class="p">[</span><span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">refs</span><span class="p">[</span><span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">refs</span><span class="p">[</span><span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">refs</span><span class="p">[</span><span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">refs</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="n">refs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">found_series</span> <span class="o">=</span> <span class="n">all_refs</span><span class="p">[</span><span class="n">all_refs</span><span class="p">[</span><span class="s1">&#39;Reference&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entry</span><span class="p">][</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span>
                <span class="n">found_in</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_freqs</span> <span class="o">=</span> <span class="n">found_series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="n">refs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>
                <span class="n">refs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_in</span><span class="p">)</span>
                <span class="n">refs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span>
                <span class="n">refs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span>
                <span class="n">refs</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_freqs</span>
        
        <span class="k">return</span> <span class="n">refs</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Reference&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseItemSet.index_by_contents"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.index_by_contents">[docs]</a>    <span class="k">def</span> <span class="nf">index_by_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indexes items by their contents. Returns a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">all_contents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_contents</span><span class="p">()</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">all_contents</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        
        <span class="n">contents</span><span class="p">[</span><span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">contents</span><span class="p">[</span><span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">contents</span><span class="p">[</span><span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">contents</span><span class="p">[</span><span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">contents</span><span class="p">[</span><span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">contents</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="n">contents</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">found_series</span> <span class="o">=</span> <span class="n">all_contents</span><span class="p">[</span><span class="n">all_contents</span><span class="p">[</span><span class="s1">&#39;Content&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">entry</span><span class="p">][</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span>
                <span class="n">found_in</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_series</span><span class="p">)</span>
                <span class="n">found_in_freqs</span> <span class="o">=</span> <span class="n">found_series</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="n">contents</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Items&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in</span>
                <span class="n">contents</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_in</span><span class="p">)</span>
                <span class="n">contents</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span>
                <span class="n">contents</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Mean frequency&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_items</span><span class="p">()</span>
                <span class="n">contents</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;Breakdown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">found_in_freqs</span>
        
        <span class="k">return</span> <span class="n">contents</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Content&#39;</span><span class="p">,</span> <span class="s1">&#39;Item count&#39;</span><span class="p">,</span> <span class="s1">&#39;Total frequency&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>
    
    

    <span class="c1"># Methods for searching indexed items</span>

<div class="viewcode-block" id="CaseItemSet.search_items"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_items">[docs]</a>    <span class="k">def</span> <span class="nf">search_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for an item ID. If found, returns that item&#39;s contents.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">query</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">items</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">)</span>
        <span class="n">search_result</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)]</span>
        <span class="n">amount_found</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">search_result</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">amount_found</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Item not found&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span> 
        
        <span class="k">if</span> <span class="n">amount_found</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">item_id</span> <span class="o">=</span> <span class="n">search_result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;Result: &#39;</span> <span class="o">+</span> <span class="n">item_id</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>

            <span class="k">except</span><span class="p">:</span> 
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Item not found&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span> 
        
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;Results: &#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">search_result</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.search_info"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_info">[docs]</a>    <span class="k">def</span> <span class="nf">search_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">search_in</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches item set&#39;s information for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_in</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search term must be a string&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">search_in</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;labels&#39;</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="k">if</span> <span class="n">search_in</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;categories&#39;</span><span class="p">:</span>
            <span class="n">categories</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">categories</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="k">if</span> <span class="n">search_in</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">categories</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">info_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_info</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">labels</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">label_res</span> <span class="o">=</span> <span class="n">info_df</span><span class="p">[</span><span class="n">info_df</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">label_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">info_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">categories</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">category_res</span> <span class="o">=</span> <span class="n">info_df</span><span class="p">[</span><span class="n">info_df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">category_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">info_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">label_res</span><span class="p">,</span> <span class="n">category_res</span><span class="p">])</span></div>
    
     
<div class="viewcode-block" id="CaseItemSet.search_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">search_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">search_in</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches items&#39; metadata for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_in</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search term must be a string&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">search_in</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;entries&#39;</span><span class="p">:</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="k">if</span> <span class="n">search_in</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;categories&#39;</span><span class="p">:</span>
            <span class="n">categories</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">categories</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="k">if</span> <span class="n">search_in</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">categories</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">metadata_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">entries</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">metadata_res</span> <span class="o">=</span> <span class="n">metadata_df</span><span class="p">[</span><span class="n">metadata_df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">metadata_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">metadata_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">categories</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">category_res</span> <span class="o">=</span> <span class="n">metadata_df</span><span class="p">[</span><span class="n">metadata_df</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">category_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">metadata_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">metadata_res</span><span class="p">,</span> <span class="n">category_res</span><span class="p">])</span></div>

    
<div class="viewcode-block" id="CaseItemSet.search_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_links">[docs]</a>    <span class="k">def</span> <span class="nf">search_links</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches items&#39; links for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="n">links_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_links</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="n">links_df</span><span class="p">[</span><span class="n">links_df</span><span class="p">[</span><span class="s1">&#39;Link&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)]</span></div>
    
<div class="viewcode-block" id="CaseItemSet.search_refs"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_refs">[docs]</a>    <span class="k">def</span> <span class="nf">search_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches items&#39; references for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="n">refs_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_refs</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="n">refs_df</span><span class="p">[</span><span class="n">refs_df</span><span class="p">[</span><span class="s1">&#39;Reference&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)]</span></div>
    
<div class="viewcode-block" id="CaseItemSet.search_contents"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_contents">[docs]</a>    <span class="k">def</span> <span class="nf">search_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches items&#39; contents for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="n">contents_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_contents</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="n">contents_df</span><span class="p">[</span><span class="n">contents_df</span><span class="p">[</span><span class="s1">&#39;Content&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)]</span></div>
    
<div class="viewcode-block" id="CaseItemSet.search_addresses"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_addresses">[docs]</a>    <span class="k">def</span> <span class="nf">search_addresses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches items&#39; address metadata for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
        
        <span class="n">addresses_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_addresses</span><span class="p">()</span>
        <span class="n">result_df</span> <span class="o">=</span> <span class="n">addresses_df</span><span class="p">[</span><span class="n">addresses_df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">query</span><span class="p">)][[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]]</span>
        <span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">result_df</span> <span class="o">=</span> <span class="n">result_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[[</span><span class="s1">&#39;Address&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">result_df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.search_data"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_data">[docs]</a>    <span class="k">def</span> <span class="nf">search_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches items&#39; data entries for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
            
        <span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">dict_to_str</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        
        <span class="n">datatypes_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        <span class="n">formats_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        <span class="n">rawdata_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        <span class="n">parsed_result</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">datatypes_result</span><span class="p">,</span> <span class="n">formats_result</span><span class="p">,</span> <span class="n">rawdata_result</span><span class="p">,</span> <span class="n">parsed_result</span><span class="p">])</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">result</span></div>
    
<div class="viewcode-block" id="CaseItemSet.search_words"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search_words">[docs]</a>    <span class="k">def</span> <span class="nf">search_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches items&#39; words for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
            
        <span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">)]</span>
        
        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">)</span></div>
    
    

<div class="viewcode-block" id="CaseItemSet.search"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.search">[docs]</a>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches items for a query string. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">search_query</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">search_query</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search query must be a string&#39;</span><span class="p">)</span>
            
        <span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="n">metadata_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_metadata</span><span class="p">(</span><span class="n">query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span>
        <span class="n">metadata_res</span> <span class="o">=</span> <span class="n">metadata_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;metadata&#39;</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">info_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_info</span><span class="p">(</span><span class="n">query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span>
        <span class="n">info_res</span> <span class="o">=</span> <span class="n">info_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;information&#39;</span>
        <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">data_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_data</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Raw data: &#39;</span> <span class="o">+</span>   <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, Parsed data: &#39;</span> <span class="o">+</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span>   
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; (format: &#39;</span> <span class="o">+</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
        <span class="n">data_res</span> <span class="o">=</span> <span class="n">data_res</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Datatype&#39;</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">words_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_words</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span>
        <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">words_res</span> <span class="o">=</span> <span class="n">words_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;word&#39;</span>
        <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;found_in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">words_res</span> <span class="o">=</span> <span class="n">words_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;found_in&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="n">links_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_links</span><span class="p">(</span><span class="n">query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Link&#39;</span><span class="p">]</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">links_res</span> <span class="o">=</span> <span class="n">links_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Link&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;link&#39;</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">refs_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_refs</span><span class="p">(</span><span class="n">query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Reference&#39;</span><span class="p">]</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">refs_res</span> <span class="o">=</span> <span class="n">refs_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Reference&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reference&#39;</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">contents_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_contents</span><span class="p">(</span><span class="n">query</span> <span class="o">=</span> <span class="n">search_query</span><span class="p">)</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Content&#39;</span><span class="p">]</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">contents_res</span> <span class="o">=</span> <span class="n">contents_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Content&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;content&#39;</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">metadata_res</span><span class="p">,</span> <span class="n">data_res</span><span class="p">,</span> <span class="n">words_res</span><span class="p">,</span> <span class="n">info_res</span><span class="p">,</span> <span class="n">links_res</span><span class="p">,</span> <span class="n">refs_res</span><span class="p">,</span> <span class="n">contents_res</span><span class="p">])</span>
        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[[</span><span class="s1">&#39;Result&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Attribute&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]]</span>
        
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseItemSet.return_all"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.return_all">[docs]</a>    <span class="k">def</span> <span class="nf">return_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a pandas.DataFrame containing all item contents from all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">metadata_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metadata</span><span class="p">()</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span>
        <span class="n">metadata_res</span> <span class="o">=</span> <span class="n">metadata_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Metadata&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;metadata&#39;</span>
        <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">info_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_info</span><span class="p">()</span>
        <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span>
        <span class="n">info_res</span> <span class="o">=</span> <span class="n">info_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;information&#39;</span>
        <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">data_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_data</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">dict_to_str</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Raw data: &#39;</span> <span class="o">+</span>   <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Raw data&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;, Parsed data: &#39;</span> <span class="o">+</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Parsed data&#39;</span><span class="p">]</span>   
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Datatype&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; (format: &#39;</span> <span class="o">+</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Format&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
        <span class="n">data_res</span> <span class="o">=</span> <span class="n">data_res</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Datatype&#39;</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span><span class="p">,</span> <span class="s1">&#39;Stored as&#39;</span><span class="p">,</span> <span class="s1">&#39;Size (bytes)&#39;</span><span class="p">,</span> <span class="s1">&#39;Raw data&#39;</span><span class="p">,</span> <span class="s1">&#39;Parsed data&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>
        <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">words_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_words</span><span class="p">()</span>
        <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span>
        <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">words_res</span> <span class="o">=</span> <span class="n">words_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;word&#39;</span>
        <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">words_res</span><span class="p">[</span><span class="s1">&#39;found_in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">words_res</span> <span class="o">=</span> <span class="n">words_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;found_in&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="n">links_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_links</span><span class="p">()</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Link&#39;</span><span class="p">]</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">links_res</span> <span class="o">=</span> <span class="n">links_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Link&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;link&#39;</span>
        <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">links_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">refs_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_refs</span><span class="p">()</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Reference&#39;</span><span class="p">]</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">refs_res</span> <span class="o">=</span> <span class="n">refs_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Reference&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;reference&#39;</span>
        <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">refs_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">contents_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_contents</span><span class="p">()</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Content&#39;</span><span class="p">]</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">contents_res</span> <span class="o">=</span> <span class="n">contents_res</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Content&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;content&#39;</span>
        <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">contents_res</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">metadata_res</span><span class="p">,</span> <span class="n">data_res</span><span class="p">,</span> <span class="n">words_res</span><span class="p">,</span> <span class="n">info_res</span><span class="p">,</span> <span class="n">links_res</span><span class="p">,</span> <span class="n">refs_res</span><span class="p">,</span> <span class="n">contents_res</span><span class="p">])</span>
        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;Found in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">[[</span><span class="s1">&#39;Result&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Attribute&#39;</span><span class="p">,</span> <span class="s1">&#39;Found in&#39;</span><span class="p">]]</span>
        
        <span class="k">return</span> <span class="n">result</span></div>
        
    
<div class="viewcode-block" id="CaseItemSet.advanced_search"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.advanced_search">[docs]</a>    <span class="k">def</span> <span class="nf">advanced_search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">any_kwds</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">all_kwds</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">no_kwds</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">search_in</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        An advanced search function. Searches items using a series of keyword commands. If found, returns a dataframe of all items containing the string.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        any_kwds : list</span>
<span class="sd">            results must contain any of these strings. Defaults to requesting user input.</span>
<span class="sd">        all_kwds : list</span>
<span class="sd">            results must contain all of these strings. Defaults to requesting user input.</span>
<span class="sd">        no_kwds : list</span>
<span class="sd">            results not must contain any of these strings. Defaults to requesting user input.</span>
<span class="sd">        search_in : list</span>
<span class="sd">            list of item attributes to search. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">any_kwds</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">any_kwds</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Containing any of the following (press RETURN to ignore): &#39;</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">any_kwds</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">any_kwds</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">any_kwds</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">any_kwds</span> <span class="o">=</span> <span class="n">any_kwds</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        
        
        <span class="k">if</span> <span class="n">all_kwds</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">all_kwds</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Containing all of the following (press RETURN to ignore): &#39;</span><span class="p">)</span>
            <span class="n">all_kwds</span> <span class="o">=</span> <span class="n">all_kwds</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">all_kwds</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">all_kwds</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">all_kwds</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">all_kwds</span> <span class="o">=</span> <span class="n">all_kwds</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">all_kwds</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">all_kwds</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;&quot;all_kwds&quot; must be a list or string&#39;</span><span class="p">)</span>

        
        <span class="k">if</span> <span class="n">no_kwds</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">no_kwds</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Containing none of the following (press RETURN to ignore): &#39;</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">no_kwds</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">no_kwds</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">no_kwds</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">no_kwds</span> <span class="o">=</span> <span class="n">no_kwds</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">no_kwds</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">no_kwds</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;&quot;no_kwds&quot; must be a list or string&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">any_kwds</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
            
            <span class="n">result_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">any_kwds</span><span class="p">:</span>
                <span class="n">result_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">search_query</span> <span class="o">=</span> <span class="n">i</span><span class="p">),</span> <span class="n">result_df</span><span class="p">])</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_all</span><span class="p">()</span>
            
        <span class="k">if</span> <span class="n">all_kwds</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">all_kwds</span><span class="p">:</span>
                <span class="n">result_df</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[(</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">no_kwds</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">no_kwds</span><span class="p">:</span>
                <span class="n">result_df</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[(</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Result&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">search_in</span> <span class="o">!=</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_in</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">search_in</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_in</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">search_in</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;&quot;search_in&quot; must be a list or string&#39;</span><span class="p">)</span>

            <span class="n">out_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">search_in</span><span class="p">:</span>
                <span class="n">masked_df</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[(</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Attribute&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">)]</span>
                <span class="n">out_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">masked_df</span><span class="p">,</span> <span class="n">out_df</span><span class="p">])</span>

            <span class="n">result_df</span> <span class="o">=</span> <span class="n">out_df</span>

        <span class="n">result_df</span> <span class="o">=</span> <span class="n">result_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">all_kwds</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">all_kwds</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]):</span>
            <span class="n">all_kwds</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">no_kwds</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">no_kwds</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]):</span>
            <span class="n">no_kwds</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">search_term</span> <span class="o">=</span> <span class="s1">&#39;Items including ANY OF &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">any_kwds</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; AND ALL OF &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">all_kwds</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; AND NONE OF&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">no_kwds</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Search: &#39;</span> <span class="o">+</span> <span class="n">search_term</span> <span class="p">)</span>

        <span class="k">return</span> <span class="n">result_df</span></div>
    
    

    <span class="c1"># Methods for filtering items in the item set based on their data</span>
    
<div class="viewcode-block" id="CaseItemSet.filter_by_distance"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.filter_by_distance">[docs]</a>    <span class="k">def</span> <span class="nf">filter_by_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by</span> <span class="o">=</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">,</span> <span class="n">close_to</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">within</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects items whose geolocation metadata falls within a distance of a given location. Returns a pandas.DataFrame.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by : str</span>
<span class="sd">            category of geolocation metadata to use.</span>
<span class="sd">        close_to : str</span>
<span class="sd">            location or coordinates to measure from.</span>
<span class="sd">        within : int</span>
<span class="sd">            maximum distance from given location. </span>
<span class="sd">        units : str</span>
<span class="sd">            units for distance.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether to ignore items without geolocation metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">close_to</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">close_to</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Find items close to: &#39;</span><span class="p">)</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Item ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Item location&#39;</span><span class="p">,</span> <span class="s1">&#39;Item coordinates&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Distance from </span><span class="si">{</span><span class="n">close_to</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;Units&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">close_to</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="n">select_by</span> <span class="o">=</span> <span class="s1">&#39;items&#39;</span>
            <span class="n">ref_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">close_to</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">ref_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">output_df</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ref_coordinates</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">ref_coordinates</span> <span class="o">=</span> <span class="n">ref_coordinates</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">select_by</span> <span class="o">==</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">close_to</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">ref_coordinates</span> <span class="o">=</span> <span class="n">close_to</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">close_to</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">ref_coordinates</span> <span class="o">=</span> <span class="n">close_to</span>

            <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">close_to</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">close_to</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Coordinates must be either a string or list&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">select_by</span> <span class="o">==</span> <span class="s1">&#39;location&#39;</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">select_by</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Location must be a string&#39;</span><span class="p">)</span>

            <span class="n">ref_coordinates</span> <span class="o">=</span> <span class="n">get_location_coordinates</span><span class="p">(</span><span class="n">close_to</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">select_by</span> <span class="o">!=</span> <span class="s1">&#39;location&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">select_by</span> <span class="o">!=</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">select_by</span> <span class="o">!=</span> <span class="s1">&#39;items&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;&quot;select_by&quot; only accepts &quot;coordinates&quot; or &quot;location&quot;&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ref_coordinates</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">output_df</span>

        <span class="n">ref_latitude</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ref_coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">ref_longitude</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ref_coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>



        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="n">close_to</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">item_coordinates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>
            <span class="n">item_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">location_metadata</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">item_coordinates</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">distance</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">continue</span>


            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_coordinates</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">item_coordinates</span> <span class="o">=</span> <span class="n">item_coordinates</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">item_latitude</span> <span class="o">=</span> <span class="n">item_coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">item_longitude</span> <span class="o">=</span> <span class="n">item_coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">item_latitude</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item_latitude</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">item_longitude</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item_longitude</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

            <span class="n">distance</span> <span class="o">=</span> <span class="n">coordinates_distance</span><span class="p">(</span><span class="n">first_coordinates</span> <span class="o">=</span> <span class="n">ref_coordinates</span><span class="p">,</span> <span class="n">second_coordinates</span> <span class="o">=</span> <span class="n">item_coordinates</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">)</span>
            <span class="n">units</span> <span class="o">=</span> <span class="n">distance</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="n">distance</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Item ID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Item location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_location</span>
            <span class="n">output_df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Item coordinates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_coordinates</span>
            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Distance from </span><span class="si">{</span><span class="n">close_to</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span>
            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;Units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">units</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>


        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Distance from </span><span class="si">{</span><span class="n">close_to</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="p">[</span><span class="n">output_df</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Distance from </span><span class="si">{</span><span class="n">close_to</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">within</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">output_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Distance from </span><span class="si">{</span><span class="n">close_to</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseItemSet.triangulate_by_distance"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.triangulate_by_distance">[docs]</a>    <span class="k">def</span> <span class="nf">triangulate_by_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locations</span><span class="p">,</span> <span class="n">select_by</span> <span class="o">=</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">,</span> <span class="n">within</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;kilometers&#39;</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects items whose geolocation metadata falls within a distance of multiple given locations. Returns a pandas.DataFrame.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        locations : list</span>
<span class="sd">            a list of locations or coordinates to triangulate from.</span>
<span class="sd">        select_by : str</span>
<span class="sd">            category of geolocation metadata to use.</span>
<span class="sd">        within : int</span>
<span class="sd">            maximum distance from given location. </span>
<span class="sd">        units : str</span>
<span class="sd">            units for distance.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether to ignore items without geolocation metadata entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Locations must be inputted at a list&#39;</span><span class="p">)</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Item location&#39;</span><span class="p">,</span> <span class="s1">&#39;Item coordinates&#39;</span><span class="p">])</span>

        <span class="n">location_dfs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">index_sets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">:</span>
            <span class="n">output_df</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Distance from </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_by_distance</span><span class="p">(</span><span class="n">select_by</span> <span class="o">=</span> <span class="n">select_by</span><span class="p">,</span> <span class="n">close_to</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">within</span> <span class="o">=</span> <span class="n">within</span><span class="p">,</span> <span class="n">units</span> <span class="o">=</span> <span class="n">units</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="n">ignore_nones</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Item ID&#39;</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="n">index_sets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="n">location_dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="n">ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">index_sets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="n">index_sets</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;Item location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">location_metadata</span><span class="p">()</span>
            <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;Item coordinates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">coordinates_metadata</span><span class="p">()</span>

            <span class="n">distances</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">location_dfs</span><span class="p">:</span>
                <span class="n">col</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span>
                <span class="n">distances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">col</span><span class="p">])</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;Mean distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                    <span class="n">output_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;Mean distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">output_df</span><span class="p">[</span><span class="s1">&#39;Units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">units</span>

        <span class="k">return</span> <span class="n">output_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Mean distance&#39;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseItemSet.filter_by_dates"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.filter_by_dates">[docs]</a>    <span class="k">def</span> <span class="nf">filter_by_dates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">select_by</span> <span class="o">=</span> <span class="s1">&#39;Created at&#39;</span><span class="p">,</span> <span class="n">from_date</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">to_date</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">ignore_nones</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects items whose time metadata falls within two datetimes. Returns a pandas.DataFrame.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        select_by : str</span>
<span class="sd">            category of time metadata to use. Defaults to &#39;Created at&#39;</span>
<span class="sd">        from_date : str</span>
<span class="sd">            date or time to measure from. Defaults to requesting from user input.</span>
<span class="sd">        to_date : str</span>
<span class="sd">            date or time to measure to. Defaults to requesting from user input.</span>
<span class="sd">        ignore_nones : bool</span>
<span class="sd">            whether to ignore items without geolocation metadata entries. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">from_date</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">from_date</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;From: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">to_date</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">to_date</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;To: &#39;</span><span class="p">)</span>

        <span class="n">from_date</span> <span class="o">=</span> <span class="n">str_to_datetime</span><span class="p">(</span><span class="n">from_date</span><span class="p">)</span>
        <span class="n">to_date</span> <span class="o">=</span> <span class="n">str_to_datetime</span><span class="p">(</span><span class="n">to_date</span><span class="p">)</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_time_metadata</span><span class="p">()[</span><span class="n">select_by</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">ignore_nones</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="p">[(</span><span class="n">output_df</span><span class="p">[</span><span class="n">select_by</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">from_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">output_df</span><span class="p">[</span><span class="n">select_by</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">to_date</span><span class="p">)]</span>

        <span class="k">return</span> <span class="n">output_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">select_by</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span></div>
    
    

    <span class="c1"># Methods for looking up items&#39; internet metadata</span>
    
<div class="viewcode-block" id="CaseItemSet.lookup_item_domain"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.lookup_item_domain">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_item_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs a WhoIs lookup on an item&#39;s domain metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">lookup_domain</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.lookup_all_item_domains"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.lookup_all_item_domains">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_all_item_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs WhoIs lookups on all items&#39; domain metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">whois_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_item_domain</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
                    <span class="n">whois</span> <span class="o">=</span> <span class="n">whois_res</span><span class="o">.</span><span class="n">all_results</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">whois</span> <span class="o">=</span> <span class="n">whois</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;domain&#39;</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">whois</span> <span class="o">=</span> <span class="n">whois</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;domain_name&#39;</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">pass</span>
                            
                    <span class="n">whois</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">whois</span><span class="p">[</span><span class="s1">&#39;item_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
                    
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">whois</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;item_id&#39;</span><span class="p">,</span> <span class="s1">&#39;domain&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>
                    <span class="n">whois</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
                    <span class="n">whois</span><span class="p">[</span><span class="s1">&#39;item_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
                    <span class="n">whois</span> <span class="o">=</span> <span class="n">whois</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;domain&#39;</span><span class="p">)</span>
                
                <span class="n">whois</span> <span class="o">=</span> <span class="n">whois</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
                <span class="n">whois</span> <span class="o">=</span> <span class="n">whois</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;item_id&#39;</span><span class="p">)</span>
                <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">output_df</span><span class="p">,</span> <span class="n">whois</span><span class="p">])</span>
        
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>
        
        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">output_df</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.lookup_item_ip_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.lookup_item_ip_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_item_ip_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs a WhoIs lookup on an item&#39;s IP address metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">lookup_ip</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CaseItemSet.lookup_all_item_ip_metadata"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.lookup_all_item_ip_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_all_item_ip_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs WhoIs lookups on all items&#39; IP address metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">whois_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_item_ip_metadata</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
                    <span class="n">whois</span> <span class="o">=</span> <span class="n">whois_res</span><span class="o">.</span><span class="n">all_results</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;ip_address&#39;</span><span class="p">)</span>
                    <span class="n">whois</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">whois</span><span class="p">[</span><span class="s1">&#39;item_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
                    
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">whois</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;item_id&#39;</span><span class="p">,</span> <span class="s1">&#39;ip_address&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>
                    <span class="n">whois</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
                    <span class="n">whois</span><span class="p">[</span><span class="s1">&#39;item_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_id</span>
                    <span class="n">whois</span> <span class="o">=</span> <span class="n">whois</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;ip_address&#39;</span><span class="p">)</span>
                
                <span class="n">whois</span> <span class="o">=</span> <span class="n">whois</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
                <span class="n">whois</span> <span class="o">=</span> <span class="n">whois</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;item_id&#39;</span><span class="p">)</span>
                <span class="n">output_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">output_df</span><span class="p">,</span> <span class="n">whois</span><span class="p">])</span>
        
            <span class="k">except</span><span class="p">:</span>
                <span class="k">continue</span>
        
        <span class="n">output_df</span> <span class="o">=</span> <span class="n">output_df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">output_df</span></div>
    
<div class="viewcode-block" id="CaseItemSet.lookup_all_items_whois"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.lookup_all_items_whois">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_all_items_whois</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">append_to_items</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs WhoIs lookups on all items&#39; internet metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">lookup_whois</span><span class="p">(</span><span class="n">append_to_item</span> <span class="o">=</span> <span class="n">append_to_items</span><span class="p">)</span></div>
        
        

<div class="viewcode-block" id="CaseItemSet.open_all_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.open_all_links">[docs]</a>    <span class="k">def</span> <span class="nf">open_all_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens all items&#39; links in the default web browser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_links_set</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
            <span class="n">regex_check_then_open_url</span><span class="p">(</span><span class="n">link</span><span class="p">)</span></div>
            
    
<div class="viewcode-block" id="CaseItemSet.filter_all_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.filter_all_links">[docs]</a>    <span class="k">def</span> <span class="nf">filter_all_links</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                        <span class="n">contains_any_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">contains_all_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">not_containing_any_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">not_containing_all_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Filters items&#39; links based on given criteria. Returns a list.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        contains_any_kwds : list</span>
<span class="sd">            results must contain any of these strings. Defaults to None.</span>
<span class="sd">        contains_all_kwds : list</span>
<span class="sd">            results must contain all of these strings. Defaults to None.</span>
<span class="sd">        not_containing_any_kwds : list</span>
<span class="sd">            results not must contain any of these strings. Defaults to None.</span>
<span class="sd">        not_containing_all_kwds : list</span>
<span class="sd">            results not must contain all of these strings. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">selected_links</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">item_ids</span><span class="p">:</span>
            <span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">filter_links</span><span class="p">(</span><span class="n">contains_any_kwds</span> <span class="o">=</span> <span class="n">contains_any_kwds</span><span class="p">,</span> 
                                        <span class="n">contains_all_kwds</span> <span class="o">=</span> <span class="n">contains_all_kwds</span><span class="p">,</span>
                                        <span class="n">not_containing_any_kwds</span> <span class="o">=</span> <span class="n">not_containing_any_kwds</span><span class="p">,</span>
                                        <span class="n">not_containing_all_kwds</span> <span class="o">=</span> <span class="n">not_containing_all_kwds</span><span class="p">)</span>
            
            <span class="n">selected_links</span> <span class="o">=</span> <span class="n">selected_links</span> <span class="o">+</span> <span class="n">links</span>
        
        <span class="n">selected_links</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">selected_links</span><span class="p">))</span>
        
        <span class="k">return</span> <span class="n">selected_links</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.lookup_filtered_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.lookup_filtered_links">[docs]</a>    <span class="k">def</span> <span class="nf">lookup_filtered_links</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contains_any_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">contains_all_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">not_containing_any_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">not_containing_all_kwds</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects and opens items&#39; links in the default web browser based on given criteria.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        contains_any_kwds : list</span>
<span class="sd">            results must contain any of these strings. Defaults to None.</span>
<span class="sd">        contains_all_kwds : list</span>
<span class="sd">            results must contain all of these strings. Defaults to None.</span>
<span class="sd">        not_containing_any_kwds : list</span>
<span class="sd">            results not must contain any of these strings. Defaults to None.</span>
<span class="sd">        not_containing_all_kwds : list</span>
<span class="sd">            results not must contain all of these strings. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">filtered_links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_all_links</span><span class="p">(</span><span class="n">contains_any_kwds</span> <span class="o">=</span> <span class="n">contains_any_kwds</span><span class="p">,</span> 
                                                <span class="n">contains_all_kwds</span> <span class="o">=</span> <span class="n">contains_all_kwds</span><span class="p">,</span>
                                                <span class="n">not_containing_any_kwds</span> <span class="o">=</span> <span class="n">not_containing_any_kwds</span><span class="p">,</span>
                                                <span class="n">not_containing_all_kwds</span> <span class="o">=</span> <span class="n">not_containing_all_kwds</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">filtered_links</span><span class="p">:</span>
            <span class="n">regex_check_then_open_url</span><span class="p">(</span><span class="n">link</span><span class="p">)</span></div>
        
        
    <span class="c1"># Methods for creating item from PDF imports</span>
    
<div class="viewcode-block" id="CaseItemSet.item_from_pdf"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.item_from_pdf">[docs]</a>    <span class="k">def</span> <span class="nf">item_from_pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CaseItem object from a PDF file.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_id : str</span>
<span class="sd">            item ID for new item. Defaults to requesting from user input.</span>
<span class="sd">        file_path : str</span>
<span class="sd">            directory path for PDF file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;New item ID: &#39;</span><span class="p">)</span>
        
        <span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">read_pdf</span><span class="p">(</span><span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">parsed_pdf_to_item</span><span class="p">(</span><span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">add_blank_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">metadata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">links</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="CaseItemSet.item_from_pdf_url"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.item_from_pdf_url">[docs]</a>    <span class="k">def</span> <span class="nf">item_from_pdf_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">url</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CaseItem object from a PDF hosted at a URL.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        item_id : str</span>
<span class="sd">            item ID for new item. Defaults to requesting from user input.</span>
<span class="sd">        url : str</span>
<span class="sd">            URL for PDF file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;New item ID: &#39;</span><span class="p">)</span>
        
        <span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">read_pdf_url</span><span class="p">(</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">parsed_pdf_to_item</span><span class="p">(</span><span class="n">parsed_pdf</span> <span class="o">=</span> <span class="n">parsed_pdf</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">add_blank_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">metadata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">links</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">links</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span></div>
    

    <span class="c1"># Methods for scraping and crawling from item data</span>
    
<div class="viewcode-block" id="CaseItemSet.scrape_item_urls"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.scrape_item_urls">[docs]</a>    <span class="k">def</span> <span class="nf">scrape_item_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">append_to_items</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Scrapes data from all items&#39; URLs if available. Appends to items if selected.</span>
<span class="sd">        </span>
<span class="sd">        WARNING: this function is very slow due to the speed of the packages it relies on.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        append_to_items : bool</span>
<span class="sd">            whether to append scraper results to items</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">item_ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">fetch_site_contents</span><span class="p">(</span><span class="n">append_to_item</span> <span class="o">=</span> <span class="n">append_to_items</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span></div>
    

<div class="viewcode-block" id="CaseItemSet.crawl_web_from_items"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.crawl_web_from_items">[docs]</a>    <span class="k">def</span> <span class="nf">crawl_web_from_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">crawl_from</span> <span class="o">=</span> <span class="s1">&#39;URL&#39;</span><span class="p">,</span>
                        <span class="n">visit_limit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> 
                        <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                        <span class="n">required_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                        <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                        <span class="n">case_sensitive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="n">ignore_urls</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                        <span class="n">ignore_domains</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                        <span class="n">be_polite</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>                            
                        <span class="n">full</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="n">output_as</span> <span class="o">=</span> <span class="s1">&#39;dataframe&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs web crawl from items&#39; URL metadata.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ---------- </span>
<span class="sd">        crawl_from : str</span>
<span class="sd">            metadata category to retrieve URL data from. Defaults to &#39;URL&#39;.</span>
<span class="sd">        visit_limit : int</span>
<span class="sd">            how many URLs the crawler should visit before it stops.</span>
<span class="sd">        excluded_url_terms : list</span>
<span class="sd">            list of strings; link will be ignored if it contains any string in list.</span>
<span class="sd">        required_keywords : list</span>
<span class="sd">            list of keywords which sites must contain to be crawled.</span>
<span class="sd">        excluded_keywords : list</span>
<span class="sd">            list of keywords which sites must *not* contain to be crawled.</span>
<span class="sd">        case_sensitive : bool</span>
<span class="sd">            whether or not to ignore string characters&#39; case.</span>
<span class="sd">        ignore_urls : list</span>
<span class="sd">            list of URLs to ignore.</span>
<span class="sd">        ignore_domains : list</span>
<span class="sd">            list of domains to ignore.</span>
<span class="sd">        be_polite : bool</span>
<span class="sd">            whether respect websites&#39; permissions for crawlers.</span>
<span class="sd">        full : bool</span>
<span class="sd">            whether to run a full scrape on each site. This takes longer.</span>
<span class="sd">        output_as : str</span>
<span class="sd">            the format to output results in. Defaults to a pandas.DataFrame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : object</span>
<span class="sd">            an object containing the results of a crawl.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">crawl_from</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">crawl_from</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Metadata entry to crawl from: &#39;</span><span class="p">)</span>
        
        <span class="n">seed_urls</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">crawl_from</span><span class="p">)[</span><span class="s1">&#39;Metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
            <span class="n">seed_urls</span> <span class="o">=</span> <span class="n">seed_urls</span> <span class="o">+</span> <span class="n">urls</span>
        <span class="n">seed_urls</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">seed_urls</span><span class="p">))</span>
        
        <span class="n">output</span> <span class="o">=</span> <span class="n">crawl_web</span><span class="p">(</span>
                            <span class="n">seed_urls</span> <span class="o">=</span> <span class="n">seed_urls</span><span class="p">,</span>
                            <span class="n">visit_limit</span> <span class="o">=</span> <span class="n">visit_limit</span><span class="p">,</span> 
                            <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="n">excluded_url_terms</span><span class="p">,</span>
                            <span class="n">required_keywords</span> <span class="o">=</span> <span class="n">required_keywords</span><span class="p">,</span> 
                            <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="n">excluded_keywords</span><span class="p">,</span> 
                            <span class="n">case_sensitive</span> <span class="o">=</span> <span class="n">case_sensitive</span><span class="p">,</span>
                            <span class="n">ignore_urls</span> <span class="o">=</span> <span class="n">ignore_urls</span><span class="p">,</span> 
                            <span class="n">ignore_domains</span> <span class="o">=</span> <span class="n">ignore_domains</span><span class="p">,</span>
                            <span class="n">be_polite</span> <span class="o">=</span> <span class="n">be_polite</span><span class="p">,</span>
                            <span class="n">full</span> <span class="o">=</span> <span class="n">full</span><span class="p">,</span>
                            <span class="n">output_as</span> <span class="o">=</span> <span class="n">output_as</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">output</span></div>
    
    
<div class="viewcode-block" id="CaseItemSet.crawl_all_web_links"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.crawl_all_web_links">[docs]</a>    <span class="k">def</span> <span class="nf">crawl_all_web_links</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">visit_limit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> 
                        <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                        <span class="n">required_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                        <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                        <span class="n">case_sensitive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="n">ignore_urls</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                        <span class="n">ignore_domains</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
                        <span class="n">be_polite</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="n">full</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="n">output_as</span> <span class="o">=</span> <span class="s1">&#39;dataframe&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs web crawl from items&#39; links.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ---------- </span>
<span class="sd">        visit_limit : int</span>
<span class="sd">            how many URLs the crawler should visit before it stops.</span>
<span class="sd">        excluded_url_terms : list</span>
<span class="sd">            list of strings; link will be ignored if it contains any string in list.</span>
<span class="sd">        required_keywords : list</span>
<span class="sd">            list of keywords which sites must contain to be crawled.</span>
<span class="sd">        excluded_keywords : list</span>
<span class="sd">            list of keywords which sites must *not* contain to be crawled.</span>
<span class="sd">        case_sensitive : bool</span>
<span class="sd">            whether or not to ignore string characters&#39; case.</span>
<span class="sd">        ignore_urls : list</span>
<span class="sd">            list of URLs to ignore.</span>
<span class="sd">        ignore_domains : list</span>
<span class="sd">            list of domains to ignore.</span>
<span class="sd">        be_polite : bool</span>
<span class="sd">            whether respect websites&#39; permissions for crawlers.</span>
<span class="sd">        full : bool</span>
<span class="sd">            whether to run a full scrape on each site. This takes longer.</span>
<span class="sd">        output_as : str</span>
<span class="sd">            the format to output results in. Defaults to a pandas.DataFrame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : object</span>
<span class="sd">            an object containing the results of a crawl.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">seed_urls</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
            <span class="n">urls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">links</span>
            
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">urls</span> <span class="o">=</span> <span class="n">urls</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">urls</span> <span class="o">=</span> <span class="n">urls</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            
            <span class="n">seed_urls</span> <span class="o">=</span> <span class="n">seed_urls</span> <span class="o">+</span> <span class="n">urls</span>
            
        <span class="n">seed_urls</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">seed_urls</span><span class="p">))</span>
        
        <span class="n">output</span> <span class="o">=</span> <span class="n">crawl_web</span><span class="p">(</span>
                            <span class="n">seed_urls</span> <span class="o">=</span> <span class="n">seed_urls</span><span class="p">,</span>
                            <span class="n">visit_limit</span> <span class="o">=</span> <span class="n">visit_limit</span><span class="p">,</span> 
                            <span class="n">excluded_url_terms</span> <span class="o">=</span> <span class="n">excluded_url_terms</span><span class="p">,</span>
                            <span class="n">required_keywords</span> <span class="o">=</span> <span class="n">required_keywords</span><span class="p">,</span> 
                            <span class="n">excluded_keywords</span> <span class="o">=</span> <span class="n">excluded_keywords</span><span class="p">,</span> 
                            <span class="n">case_sensitive</span> <span class="o">=</span> <span class="n">case_sensitive</span><span class="p">,</span>
                            <span class="n">ignore_urls</span> <span class="o">=</span> <span class="n">ignore_urls</span><span class="p">,</span> 
                            <span class="n">ignore_domains</span> <span class="o">=</span> <span class="n">ignore_domains</span><span class="p">,</span>
                            <span class="n">be_polite</span> <span class="o">=</span> <span class="n">be_polite</span><span class="p">,</span>
                            <span class="n">full</span> <span class="o">=</span> <span class="n">full</span><span class="p">,</span>
                            <span class="n">output_as</span> <span class="o">=</span> <span class="n">output_as</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">output</span></div>
    
    

    <span class="c1"># Methods for exporting items to external files</span>
    
    
    
<div class="viewcode-block" id="CaseItemSet.export_txt"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.export_txt">[docs]</a>    <span class="k">def</span> <span class="nf">export_txt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_file</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports item set to a .txt file.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        new_file : bool</span>
<span class="sd">            whether to create a new file. Defaults to True.</span>
<span class="sd">        file_name : str</span>
<span class="sd">            name for file. Defaults to requesting from user input.</span>
<span class="sd">        file_address : str</span>
<span class="sd">            directory address to save to. Defaults to requesting from user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">new_file</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">file_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File name: &#39;</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File address: &#39;</span><span class="p">)</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">file_name</span>
            
        <span class="k">if</span> <span class="n">new_file</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">file_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">file_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File path: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="s1">&#39;.caseitems&#39;</span> <span class="o">!=</span> <span class="n">file_address</span><span class="p">[</span><span class="o">-</span><span class="mi">11</span><span class="p">:]:</span>
            <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span> <span class="o">+</span> <span class="s1">&#39;.case_items&#39;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_address</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> </div>
    
    
<div class="viewcode-block" id="CaseItemSet.export_excel_folder"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.export_excel_folder">[docs]</a>    <span class="k">def</span> <span class="nf">export_excel_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">folder_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">            </span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Exports item set to a folder of Excel (.xlsx) files.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            folder_address : str</span>
<span class="sd">                directory address to save to. Defaults to requesting from user input.</span>
<span class="sd">            folder_name : str</span>
<span class="sd">                name for new folder.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            
            <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder address: &#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">folder_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">folder_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder name: &#39;</span><span class="p">)</span>

            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_address</span><span class="p">,</span> <span class="n">folder_name</span><span class="p">)</span> 

            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> 
            
            <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="n">item_id</span>
                <span class="n">file_path</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">file_name</span>
                
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">export_excel</span><span class="p">(</span><span class="n">new_file</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_path</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">continue</span></div>
        
<div class="viewcode-block" id="CaseItemSet.export_csv_folders"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.export_csv_folders">[docs]</a>    <span class="k">def</span> <span class="nf">export_csv_folders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">folder_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">            </span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Exports item set&#39;s dataframes to a folder of CSVs.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            folder_address : str</span>
<span class="sd">                directory address to save to. Defaults to requesting from user input.</span>
<span class="sd">            folder_name : str</span>
<span class="sd">                name for new folder.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            
            <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder address: &#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">folder_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">folder_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder name: &#39;</span><span class="p">)</span>

            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_address</span><span class="p">,</span> <span class="n">folder_name</span><span class="p">)</span> 

            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> 
            
            <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
                
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">export_csv_folder</span><span class="p">(</span><span class="n">folder_address</span> <span class="o">=</span> <span class="n">path</span><span class="p">,</span> <span class="n">folder_name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">continue</span></div>
        
        
<div class="viewcode-block" id="CaseItemSet.save_as"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.CaseItemSet.save_as">[docs]</a>    <span class="k">def</span> <span class="nf">save_as</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports item set as a type selected by user.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        file_name : str</span>
<span class="sd">            name for file. Defaults to requesting from user input.</span>
<span class="sd">        file_address : str</span>
<span class="sd">            directory address to save to. Defaults to requesting from user input.</span>
<span class="sd">        file_type : str</span>
<span class="sd">            type of files to save to. Defaults to requesting from user input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">file_type</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File type: &#39;</span><span class="p">)</span>
        
        <span class="n">file_type</span> <span class="o">=</span> <span class="n">file_type</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        
        <span class="k">if</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;case&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;txt&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;pickle&#39;</span><span class="p">):</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">export_txt</span><span class="p">(</span><span class="n">new_file</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span><span class="p">)</span>
        
        
        <span class="k">if</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;excel&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;xlsx&#39;</span><span class="p">):</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">export_excel</span><span class="p">(</span><span class="n">new_file</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">file_address</span> <span class="o">=</span> <span class="n">file_address</span><span class="p">)</span>
        
        
        <span class="k">if</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;csv&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">file_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;csvs&#39;</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">export_csv_folder</span><span class="p">(</span><span class="n">folder_address</span> <span class="o">=</span> <span class="n">file_address</span><span class="p">,</span> <span class="n">folder_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="p">)</span></div></div>
            

<span class="c1">## Functions to create/edit caseitem objects and their attributes</span>

<div class="viewcode-block" id="url_to_item_id"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.url_to_item_id">[docs]</a><span class="k">def</span> <span class="nf">url_to_item_id</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a URL a format whic is valid to use as an item ID. Returns a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">item_id</span> <span class="o">=</span> <span class="n">url_to_valid_attr_name</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">:</span>
        <span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">[:</span><span class="mi">30</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;___&#39;</span>
    
    <span class="k">return</span> <span class="n">item_id</span></div>


<div class="viewcode-block" id="new_blank_item"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.items.new_blank_item">[docs]</a><span class="k">def</span> <span class="nf">new_blank_item</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CaseItem</span><span class="p">:</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new, blank CaseItem. </span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        item ID for new CaseItem. Defaults to requesting from user input.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item name: &#39;</span><span class="p">)</span>
    
    <span class="nb">globals</span><span class="p">()[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">CaseItem</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">name</span><span class="p">]</span>            </div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Jamie Hancock.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>