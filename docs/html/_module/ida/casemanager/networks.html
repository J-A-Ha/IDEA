<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ida.casemanager.networks &mdash; IDA 0.01 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            IDA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">ida</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">IDA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">ida.casemanager.networks</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for ida.casemanager.networks</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">..exporters.network_exporters</span> <span class="kn">import</span> <span class="n">export_network_to_kumu</span><span class="p">,</span> <span class="n">export_network</span>
<span class="kn">from</span> <span class="nn">.obj_properties</span> <span class="kn">import</span> <span class="n">CaseObjectProperties</span>
<span class="kn">from</span> <span class="nn">.obj_superclasses</span> <span class="kn">import</span> <span class="n">CaseObjectSet</span>
<span class="kn">from</span> <span class="nn">.relationships</span> <span class="kn">import</span> <span class="n">CaseRelation</span><span class="p">,</span> <span class="n">SourceFileOf</span><span class="p">,</span> <span class="n">CaseRelationSet</span>
<span class="kn">from</span> <span class="nn">.files</span> <span class="kn">import</span> <span class="n">stat_result</span><span class="p">,</span> <span class="n">CaseFile</span><span class="p">,</span> <span class="n">CaseFileSet</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">igraph</span> <span class="k">as</span> <span class="nn">ig</span>
<span class="kn">from</span> <span class="nn">igraph</span> <span class="kn">import</span> <span class="n">Graph</span>
<span class="kn">from</span> <span class="nn">networkx.classes</span> <span class="kn">import</span> <span class="n">Graph</span> <span class="k">as</span> <span class="n">NetworkX_Undir</span><span class="p">,</span> <span class="n">DiGraph</span> <span class="k">as</span> <span class="n">NetworkX_Dir</span><span class="p">,</span> <span class="n">MultiGraph</span> <span class="k">as</span> <span class="n">NetworkX_Multi</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<div class="viewcode-block" id="CaseNetwork"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork">[docs]</a><span class="k">class</span> <span class="nc">CaseNetwork</span><span class="p">(</span><span class="n">Graph</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a modified igraph.Graph object. It provides additional analytics methods and functionality for case management.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    graph : igraph.Graph or NetworkX object </span>
<span class="sd">        An existing network object to be used.</span>
<span class="sd">    n : int</span>
<span class="sd">        The number of vertices. Can be omitted, the default is</span>
<span class="sd">        zero. Note that if the edge list contains vertices with indexes</span>
<span class="sd">        larger than or equal to M{m}, then the number of vertices will</span>
<span class="sd">        be adjusted accordingly.</span>
<span class="sd">    edges : edgelist</span>
<span class="sd">        The edge list where every list item is a pair of</span>
<span class="sd">        integers. If any of the integers is larger than M{n-1}, the number</span>
<span class="sd">        of vertices is adjusted accordingly. C{None} means no edges.</span>
<span class="sd">    directed : bool</span>
<span class="sd">        Whether the graph should be directed</span>
<span class="sd">    graph_attrs : dict</span>
<span class="sd">        The attributes of the graph as a dictionary.</span>
<span class="sd">    vertex_attrs : dict</span>
<span class="sd">        The attributes of the vertices as a dictionary.</span>
<span class="sd">        The keys of the dictionary must be the names of the attributes; the</span>
<span class="sd">        values must be iterables with exactly M{n} items where M{n} is the</span>
<span class="sd">        number of vertices.</span>
<span class="sd">    edge_attrs : dict</span>
<span class="sd">        The attributes of the edges as a dictionary. The</span>
<span class="sd">        keys of the dictionary must be the names of the attributes; the values</span>
<span class="sd">        must be iterables with exactly M{m} items where M{m} is the number of</span>
<span class="sd">        edges.</span>
<span class="sd">    &quot;&quot;&quot;</span>
        
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">directed</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">graph_attrs</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">vertex_attrs</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">edge_attrs</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">obj_name</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises a CaseNetwork. Converts igraph and NetworkX objects if provided.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        graph : igraph.Graph or NetworkX object </span>
<span class="sd">            An existing network object to be used.</span>
<span class="sd">        n : int</span>
<span class="sd">            The number of vertices. Can be omitted, the default is</span>
<span class="sd">            zero. Note that if the edge list contains vertices with indexes</span>
<span class="sd">            larger than or equal to M{m}, then the number of vertices will</span>
<span class="sd">            be adjusted accordingly.</span>
<span class="sd">        edges : edgelist</span>
<span class="sd">            The edge list where every list item is a pair of</span>
<span class="sd">            integers. If any of the integers is larger than M{n-1}, the number</span>
<span class="sd">            of vertices is adjusted accordingly. C{None} means no edges.</span>
<span class="sd">        directed : bool</span>
<span class="sd">            Whether the graph should be directed</span>
<span class="sd">        graph_attrs : dict</span>
<span class="sd">            The attributes of the graph as a dictionary.</span>
<span class="sd">        vertex_attrs : dict</span>
<span class="sd">            The attributes of the vertices as a dictionary.</span>
<span class="sd">            The keys of the dictionary must be the names of the attributes; the</span>
<span class="sd">            values must be iterables with exactly M{n} items where M{n} is the</span>
<span class="sd">            number of vertices.</span>
<span class="sd">        edge_attrs : dict</span>
<span class="sd">            The attributes of the edges as a dictionary. The</span>
<span class="sd">            keys of the dictionary must be the names of the attributes; the values</span>
<span class="sd">            must be iterables with exactly M{m} items where M{m} is the number of</span>
<span class="sd">            edges.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="p">(</span>
            <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span> <span class="o">==</span> <span class="n">NetworkX_Undir</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span> <span class="o">==</span> <span class="n">NetworkX_Dir</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span> <span class="o">==</span> <span class="n">NetworkX_Multi</span><span class="p">)</span>
        <span class="p">):</span>
             <span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="o">.</span><span class="n">from_networkx</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">graph</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            
            <span class="n">directed</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">vs</span><span class="p">)</span>
            <span class="n">vs_attrs</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">attributes</span><span class="p">()</span>
            <span class="n">edges</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">to_tuple_list</span><span class="p">()</span>
            <span class="n">es_attrs</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">es</span><span class="o">.</span><span class="n">attributes</span><span class="p">()</span>
            <span class="n">g_attrs</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">attributes</span><span class="p">()</span>
            
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">edges</span><span class="p">,</span> <span class="n">directed</span> <span class="o">=</span> <span class="n">directed</span><span class="p">,</span> <span class="n">graph_attrs</span> <span class="o">=</span> <span class="n">graph_attrs</span><span class="p">,</span> <span class="n">vertex_attrs</span> <span class="o">=</span> <span class="n">vertex_attrs</span><span class="p">,</span> <span class="n">edge_attrs</span> <span class="o">=</span> <span class="n">edge_attrs</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">graph</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">g_attrs</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span>
            
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">vs_attrs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span>
            
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">es_attrs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="n">CaseObjectProperties</span><span class="p">(</span><span class="n">obj_name</span> <span class="o">=</span> <span class="n">obj_name</span><span class="p">,</span> <span class="n">obj_type</span> <span class="o">=</span> <span class="s1">&#39;CaseNetwork&#39;</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="n">parent_obj_path</span><span class="p">)</span>
    
<div class="viewcode-block" id="CaseNetwork.degrees_dataframe"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.degrees_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">degrees_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the network&#39;s degree distribution as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">degrees_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;degree&#39;</span><span class="p">])</span>
        <span class="n">degrees</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">degree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>

        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">degrees_dataframe</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">degrees</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">degrees_dataframe</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">degrees_dataframe</span> <span class="o">=</span> <span class="n">degrees_dataframe</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">degrees_dataframe</span></div>

    
<div class="viewcode-block" id="CaseNetwork.degree_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.degree_stats">[docs]</a>    <span class="k">def</span> <span class="nf">degree_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for the network&#39;s degree distribution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees_dataframe</span><span class="p">(</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseNetwork.betweenness_dataframe"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.betweenness_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">betweenness_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the network&#39;s betweenness centrality distribution as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;betweenness&#39;</span><span class="p">])</span>

        <span class="n">betweenness</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">betweenness</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">betweenness</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;betweenness&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>

<div class="viewcode-block" id="CaseNetwork.betweenness_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.betweenness_stats">[docs]</a>    <span class="k">def</span> <span class="nf">betweenness_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for vertex betweenness centralities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">betweenness_dataframe</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;betweenness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseNetwork.eigencentralities_dataframe"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.eigencentralities_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">eigencentralities_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the network&#39;s eigenvector centrality distribution as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        
        <span class="k">else</span><span class="p">:</span>

            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;eigencentrality&#39;</span><span class="p">])</span>

            <span class="n">eigencentrality</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">eigenvector_centrality</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">eigencentrality</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            
            <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;eigencentrality&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetwork.eigencentralities_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.eigencentralities_stats">[docs]</a>    <span class="k">def</span> <span class="nf">eigencentralities_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for vertex eigenvector centralities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigencentralities_dataframe</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;eigencentrality&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseNetwork.authority_scores_dataframe"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.authority_scores_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">authority_scores_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the network&#39;s authority scores distribution as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;authority_score&#39;</span><span class="p">])</span>

        <span class="n">authority_scores</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">authority_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">authority_scores</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;authority_score&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetwork.authority_scores_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.authority_scores_stats">[docs]</a>    <span class="k">def</span> <span class="nf">authority_scores_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for vertex authority scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority_scores_dataframe</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;authority_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CaseNetwork.hub_scores_dataframe"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.hub_scores_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">hub_scores_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the network&#39;s hub scores distribution as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;hub_score&#39;</span><span class="p">])</span>

        <span class="n">hub_scores</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">hub_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">hub_scores</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;hub_score&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetwork.hub_scores_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.hub_scores_stats">[docs]</a>    <span class="k">def</span> <span class="nf">hub_scores_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for vertex hub scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hub_scores_dataframe</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hub_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseNetwork.coreness_dataframe"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.coreness_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">coreness_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the network&#39;s coreness scores distribution as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;coreness&#39;</span><span class="p">])</span>

        <span class="n">coreness</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">coreness</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">coreness</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;coreness&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetwork.coreness_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.coreness_stats">[docs]</a>    <span class="k">def</span> <span class="nf">coreness_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for coreness hub scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coreness_dataframe</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;coreness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    

<div class="viewcode-block" id="CaseNetwork.community_detection"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.community_detection">[docs]</a>    <span class="k">def</span> <span class="nf">community_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;fastgreedy&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Identifies communities in the network. Gives the option of using different algorithms.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">algorithm</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="n">algorithm</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Algorithm must be specified. Options: 1. betweenness, 2. fastgreedy, 3. eigenvector, 4. spinglass, 5. walktrap.:&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;betweenness&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">community_edge_betweenness</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;fastgreedy&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">community_fastgreedy</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;eigenvector&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">community_leading_eigenvector</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;spinglass&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">community_spinglass</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;walktrap&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">community_walktrap</span><span class="p">()</span></div>


    
<div class="viewcode-block" id="CaseNetwork.weighted_density"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.weighted_density">[docs]</a>    <span class="k">def</span> <span class="nf">weighted_density</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the weighted density for network.&quot;&quot;&quot;</span>
        
        <span class="c1"># Checks if network is weighted</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_weighted</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">density</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Gets the weighted edge count</span>

            <span class="n">weighted_edge_count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">es</span><span class="p">:</span>
                <span class="n">weighted_edge_count</span> <span class="o">+=</span> <span class="n">edge</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>


            <span class="c1"># Calculating the sum of the possible maximally weighted edges.</span>
            <span class="c1"># Comparison network varies depending on the network inputted.</span>

            <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="kc">None</span>
                
            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;coinciding_words&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">coinciding_words</span><span class="p">):</span>
                <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_words_network</span><span class="o">.</span><span class="n">ecount</span><span class="p">()</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;coinciding_information&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">coinciding_information</span><span class="p">):</span>
                <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_info_network</span><span class="o">.</span><span class="n">ecount</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;items_information_shared&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">items_information_shared</span><span class="p">):</span>
                <span class="n">all_comparisons</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;all_information_comparisons&#39;</span><span class="p">]</span>
                <span class="n">all_unions</span> <span class="o">=</span> <span class="n">all_comparisons</span><span class="p">[</span><span class="s1">&#39;Intersect size&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">all_comparisons</span><span class="p">[</span><span class="s1">&#39;Difference size&#39;</span><span class="p">]</span>
                <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="n">all_unions</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;items_metadata_shared&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">items_metadata_shared</span><span class="p">):</span>
                <span class="n">all_comparisons</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;all_metadata_comparisons&#39;</span><span class="p">]</span>
                <span class="n">all_unions</span> <span class="o">=</span> <span class="n">all_comparisons</span><span class="p">[</span><span class="s1">&#39;Intersect size&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">all_comparisons</span><span class="p">[</span><span class="s1">&#39;Difference size&#39;</span><span class="p">]</span>
                <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="n">all_unions</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>


            <span class="c1"># For networks where weight is a number =&lt;1, assumes that the maximum weight is 1. </span>
            <span class="c1"># The maximum weighted count is therefore the number of edges.</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">complete_edge_count</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_items_network</span><span class="o">.</span><span class="n">ecount</span><span class="p">())</span><span class="o">*</span><span class="mi">2</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">complete_edge_count</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_items_network</span><span class="o">.</span><span class="n">ecount</span><span class="p">()</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span>

            <span class="c1"># Calculates the weighted density</span>
            <span class="k">if</span> <span class="n">complete_edge_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">weighted_density</span> <span class="o">=</span> <span class="n">weighted_edge_count</span> <span class="o">/</span> <span class="n">complete_edge_count</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">weighted_density</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

            <span class="k">return</span> <span class="n">weighted_density</span></div>

    
<div class="viewcode-block" id="CaseNetwork.weighted_degrees_dataframe"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.weighted_degrees_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">weighted_degrees_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the network&#39;s weighted degrees distribution as a dataframe.&quot;&quot;&quot;</span>
        
        
        <span class="c1"># Checks if network is weighted</span>

        <span class="k">if</span> <span class="s1">&#39;weight&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">es</span><span class="o">.</span><span class="n">attributes</span><span class="p">():</span>
            <span class="n">degrees_dataframe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees_dataframe</span><span class="p">(</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>
            <span class="n">degrees_dataframe</span><span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">degrees_dataframe</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span>
            <span class="n">degrees_dataframe</span> <span class="o">=</span> <span class="n">degrees_dataframe</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">degrees_dataframe</span>
            

        <span class="k">else</span><span class="p">:</span>

            <span class="n">degrees_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;weighted_degree&#39;</span><span class="p">])</span>

            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="p">:</span>
                <span class="n">weighted_degree</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">incident_edges</span> <span class="o">=</span> <span class="p">(</span><span class="n">CaseNetwork</span><span class="o">.</span><span class="n">incident</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertex</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">incident_edges</span><span class="p">:</span>
                    <span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">edge</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                    <span class="n">weighted_degree</span> <span class="o">+=</span> <span class="n">weight</span>
                <span class="n">degrees_dataframe</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">vertex</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">weighted_degree</span><span class="p">]</span>            
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">degrees_dataframe</span> <span class="o">=</span> <span class="n">degrees_dataframe</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">degrees_dataframe</span></div>

        
<div class="viewcode-block" id="CaseNetwork.weighted_degrees_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.weighted_degrees_stats">[docs]</a>    <span class="k">def</span> <span class="nf">weighted_degrees_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for the weighted degree distribution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_degrees_dataframe</span><span class="p">(</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="CaseNetwork.degrees_dist"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.degrees_dist">[docs]</a>    <span class="k">def</span> <span class="nf">degrees_dist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weighted</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns either the weighted or unweighted degrees distribution as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">weighted</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">degrees_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_degrees_dataframe</span><span class="p">(</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>
            <span class="n">freq_table</span> <span class="o">=</span> <span class="n">degrees_frame</span><span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
            <span class="n">dist_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">:</span><span class="n">freq_table</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;counts&#39;</span><span class="p">:</span><span class="n">freq_table</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>

            <span class="k">return</span> <span class="n">dist_frame</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">degrees_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees_dataframe</span><span class="p">(</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>
            <span class="n">freq_table</span> <span class="o">=</span> <span class="n">degrees_frame</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
            <span class="n">dist_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;degree&#39;</span><span class="p">:</span><span class="n">freq_table</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;counts&#39;</span><span class="p">:</span><span class="n">freq_table</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>

            <span class="k">return</span> <span class="n">dist_frame</span></div>
            
    

<div class="viewcode-block" id="CaseNetwork.all_centralities"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.all_centralities">[docs]</a>    <span class="k">def</span> <span class="nf">all_centralities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sort_by</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">,</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="s1">&#39;betweenness&#39;</span><span class="p">,</span><span class="s1">&#39;eigencentrality&#39;</span><span class="p">,</span><span class="s1">&#39;authority_score&#39;</span><span class="p">,</span><span class="s1">&#39;hub_score&#39;</span><span class="p">]):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates all centrality measures for network. Returns as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">is_directed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">degrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">degrees</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">degrees</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">weighted_degrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_degrees_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">weighted_degrees</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">weighted_degrees</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">eigencents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigencentralities_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">eigencents</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">eigencents</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">betweenness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">betweenness_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">betweenness</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">betweenness</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">auths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority_scores_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">auths</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">auths</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">hubs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hub_scores_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">hubs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">hubs</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="n">combined</span> <span class="o">=</span> <span class="n">weighted_degrees</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">degrees</span>
                                        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">betweenness</span>
                                        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">eigencents</span>
                                        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">auths</span>
                                        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">hubs</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">is_directed</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">sort_by</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">,</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="s1">&#39;betweenness&#39;</span><span class="p">,</span><span class="s1">&#39;authority_score&#39;</span><span class="p">,</span><span class="s1">&#39;hub_score&#39;</span><span class="p">]</span>
            
        <span class="k">return</span> <span class="n">combined</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">sort_by</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseNetwork.get_neighbours"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.get_neighbours">[docs]</a>    <span class="k">def</span> <span class="nf">get_neighbours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns vertex neighbours as a dataframe.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="c1"># Get vertex</span>
        <span class="n">vertex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span>

        <span class="c1"># Get vertex neighbours in a dataframe</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex_id&#39;</span><span class="p">,</span> <span class="s1">&#39;vertex_name&#39;</span><span class="p">])</span>

        <span class="n">neighbours</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">neighbors</span><span class="p">()</span>
        
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">neighbour</span> <span class="ow">in</span> <span class="n">neighbours</span><span class="p">:</span>
            <span class="n">neighbour_id</span> <span class="o">=</span> <span class="n">neighbour</span><span class="o">.</span><span class="n">index</span>
            <span class="n">neighbour_name</span> <span class="o">=</span> <span class="n">neighbour</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">neighbour_id</span><span class="p">,</span> <span class="n">neighbour_name</span><span class="p">]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex_id&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetwork.get_degree"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.get_degree">[docs]</a>    <span class="k">def</span> <span class="nf">get_degree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the number of other vertices a vertex is tied to. I.e., the size, or len(), of neighbours().&quot;&quot;&quot;</span>
        
        
        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">degree</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span><span class="o">.</span><span class="n">neighbors</span><span class="p">())</span>
        <span class="n">degree</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">degree</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">degree</span></div>


<div class="viewcode-block" id="CaseNetwork.get_weighted_degree"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.get_weighted_degree">[docs]</a>    <span class="k">def</span> <span class="nf">get_weighted_degree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the number of other vertices a vertex is tied to. I.e., the size, or len(), of neighbours().&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_degrees_dataframe</span><span class="p">(</span><span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>
        <span class="n">masked</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">vertex_name</span><span class="p">]</span>
        <span class="n">degree</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">masked</span><span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">degree</span></div>

    
<div class="viewcode-block" id="CaseNetwork.get_betweenness"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.get_betweenness">[docs]</a>    <span class="k">def</span> <span class="nf">get_betweenness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a vertex&#39;s betweenness centrality score.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">betweenness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span><span class="o">.</span><span class="n">betweenness</span><span class="p">()</span>
        <span class="n">betweenness</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">betweenness</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">betweenness</span></div>

    
<div class="viewcode-block" id="CaseNetwork.colinks"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.colinks">[docs]</a>    <span class="k">def</span> <span class="nf">colinks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;out&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs a colink analysis on the network. Returns a dataframe.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        direction : str </span>
<span class="sd">            The direction for colink analysis.</span>
<span class="sd">            -&gt; &#39;in&#39;: counts instances where to vertices connect to the same vertex.</span>
<span class="sd">            -&gt; &#39;out&#39;: counts number of times a given pair of vertices are both connected to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;out&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">colinks_out</span><span class="p">(</span><span class="n">links_network</span> <span class="o">=</span> <span class="bp">self</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;in&#39;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">colinks_in</span><span class="p">(</span><span class="n">links_network</span> <span class="o">=</span> <span class="bp">self</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">res</span></div>
    
<div class="viewcode-block" id="CaseNetwork.visualise"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.visualise">[docs]</a>    <span class="k">def</span> <span class="nf">visualise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertex_names</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">edge_weights</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">weight_by</span> <span class="o">=</span> <span class="s1">&#39;weight&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots a network visualisation.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        vertex_names : bool</span>
<span class="sd">            whether to show vertex names.</span>
<span class="sd">        edge_weights : bool</span>
<span class="sd">            whether to show edge weights.</span>
<span class="sd">        weight_by : str</span>
<span class="sd">            edge attribute to use as weight. Defaults to &#39;weight&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">network_obj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="c1">#     if network == &#39;corroboration&#39;:</span>
    <span class="c1">#         edge_weights = True</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">edge_weights</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">vertex_names</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> 
                    <span class="n">target</span><span class="o">=</span><span class="n">ax</span>
                   <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">edge_weights</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">vertex_names</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> 
                    <span class="n">target</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                    <span class="n">vertex_label</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                   <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">edge_weights</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">vertex_names</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> 
                    <span class="n">target</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                    <span class="n">vertex_label</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="n">edge_label</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">weight_by</span><span class="p">]</span>
                   <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
             <span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> 
                    <span class="n">target</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                    <span class="n">edge_label</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">weight_by</span><span class="p">]</span>
                   <span class="p">)</span></div>

    <span class="c1"># Methods for exporting network to external files</span>
    
<div class="viewcode-block" id="CaseNetwork.export_network_to_kumu"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.export_network_to_kumu">[docs]</a>    <span class="k">def</span> <span class="nf">export_network_to_kumu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports network to a Kumu blue-print formatted .JSON file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Save to: &#39;</span><span class="p">)</span>
        
        <span class="n">export_network_to_kumu</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="n">folder_address</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseNetwork.export_network"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetwork.export_network">[docs]</a>    <span class="k">def</span> <span class="nf">export_network</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports network to one of a variety of graph file types. Defaults to .graphML.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder address: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">file_type</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File type (&quot;graphML&quot;, &quot;kumu&quot;, GML&quot;, &quot;LEDA&quot;, &quot;lgl&quot;, &quot;ncol&quot;, or &quot;pajek&quot;): &#39;</span><span class="p">)</span>

        <span class="n">export_network</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="n">folder_address</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="n">file_type</span><span class="p">)</span></div></div>


<span class="c1"># from ..core.globaltools import *</span>
<span class="c1"># from ..core.basics import *</span>
<span class="c1"># from ..core.cleaners import *</span>
<span class="c1"># from ..visualisation.visualise import *</span>
<span class="c1"># from ..text.textanalysis import *</span>
<span class="c1"># from ..location.geolocation import *</span>
<span class="c1"># from ..location.chronolocation import *</span>
<span class="c1"># from ..internet.webanalysis import *</span>
<span class="c1"># from ..internet.parsers import *</span>
<span class="c1"># from ..internet.scrapers import *</span>
<span class="c1"># from ..internet.crawlers import *</span>
<span class="c1"># from ..importers.pdf import *</span>
<span class="c1"># from ..exporters.general_exporters import *</span>
<span class="c1"># from ..exporters.network_exporters import *</span>

<span class="c1"># from .obj_properties import CaseObjectProperties</span>

<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">igraph</span> <span class="k">as</span> <span class="nn">ig</span>
<span class="kn">from</span> <span class="nn">igraph</span> <span class="kn">import</span> <span class="n">Graph</span> <span class="k">as</span> <span class="n">Graph</span>


<div class="viewcode-block" id="CaseNetworkSet"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet">[docs]</a><span class="k">class</span> <span class="nc">CaseNetworkSet</span><span class="p">(</span><span class="n">CaseObjectSet</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This is a collection of CaseNetworks.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    obj_name : str</span>
<span class="sd">        ID used for network set.</span>
<span class="sd">    parent_obj_path : str</span>
<span class="sd">        if network set is an attribute, object path of object is attribute of. Defaults to None.</span>
<span class="sd">        </span>
<span class="sd">    </span>
<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">        * Subclass of CaseObjectSet class.</span>
<span class="sd">        * Intended to assigned to all Case objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_name</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises CaseNetworkSet instance.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj_name : str</span>
<span class="sd">            ID used for network set.</span>
<span class="sd">        parent_obj_path : str</span>
<span class="sd">            if network set is an attribute, object path of object is attribute of. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Inheriting methods and attributes from CaseObjectSet class</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj_name</span> <span class="o">=</span> <span class="n">obj_name</span><span class="p">,</span> <span class="n">obj_type</span> <span class="o">=</span> <span class="s1">&#39;CaseNetworkSet&#39;</span><span class="p">,</span> <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="n">parent_obj_path</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="n">CaseObjectProperties</span><span class="p">(</span>
                                            <span class="n">obj_name</span> <span class="o">=</span> <span class="n">obj_name</span><span class="p">,</span> 
                                            <span class="n">obj_type</span> <span class="o">=</span> <span class="s1">&#39;CaseNetworkSet&#39;</span><span class="p">,</span> 
                                            <span class="n">parent_obj_path</span> <span class="o">=</span> <span class="n">parent_obj_path</span><span class="p">,</span> 
                                            <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span>
                                            <span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_properties</span><span class="p">()</span>
    
    
    <span class="c1"># Methods for editing and retrieving network set properties</span>
    
<div class="viewcode-block" id="CaseNetworkSet.update_properties"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.update_properties">[docs]</a>    <span class="k">def</span> <span class="nf">update_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates CaseNetworkSet object&#39;s properties.</span>
<span class="sd">        </span>
<span class="sd">        Updates</span>
<span class="sd">        -------</span>
<span class="sd">            * obj_id</span>
<span class="sd">            * obj_size</span>
<span class="sd">            * networks</span>
<span class="sd">            * networks_count</span>
<span class="sd">            * last_changed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">obj_size</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sizeof__</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39; bytes&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">networks_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">networks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">update_last_changed</span><span class="p">()</span></div>
<span class="c1">#         self.properties.hash = self.__hash__()</span>
    
    
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines how CaseNetworkSet objects are represented in string form.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">string_repr</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Networks: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1">- - - - - - - - - - - -</span><span class="se">\n\n</span><span class="s1">&#39;</span>
        <span class="n">network_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">network_names</span><span class="p">:</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">vs</span><span class="p">)</span>
            <span class="n">edges</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">es</span><span class="p">)</span>
            <span class="n">string_repr</span> <span class="o">=</span> <span class="n">string_repr</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">vertices</span><span class="si">}</span><span class="s1"> vertices, </span><span class="si">{</span><span class="n">edges</span><span class="si">}</span><span class="s1"> edges</span><span class="se">\n\n</span><span class="s1">&#39;</span> 
        
        <span class="k">return</span> <span class="n">string_repr</span>
    
    
    <span class="c1"># Methods for retreiving networks</span>
    
<div class="viewcode-block" id="CaseNetworkSet.get_network"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_network">[docs]</a>    <span class="k">def</span> <span class="nf">get_network</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a network if given its name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">network</span><span class="p">]</span></div>
    
    
    <span class="c1"># Methods for deleting networks</span>
    
<div class="viewcode-block" id="CaseNetworkSet.delete_all"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.delete_all">[docs]</a>    <span class="k">def</span> <span class="nf">delete_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes all networks in collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">networks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span>
        
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">networks</span><span class="p">:</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span></div>
    
    
    <span class="c1"># Methods for creating network visualisations</span>
            
<div class="viewcode-block" id="CaseNetworkSet.visualise"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.visualise">[docs]</a>    <span class="k">def</span> <span class="nf">visualise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_names</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">edge_weights</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">weight_by</span> <span class="o">=</span> <span class="s1">&#39;weight&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots a network visualisation.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to visualise.</span>
<span class="sd">        vertex_names : bool</span>
<span class="sd">            whether to show vertex names.</span>
<span class="sd">        edge_weights : bool</span>
<span class="sd">            whether to show edge weights.</span>
<span class="sd">        weight_by : str</span>
<span class="sd">            edge attribute to use as weight. Defaults to &#39;weight&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="c1">#     if network == &#39;corroboration&#39;:</span>
    <span class="c1">#         edge_weights = True</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">edge_weights</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">vertex_names</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> 
                    <span class="n">target</span><span class="o">=</span><span class="n">ax</span>
                   <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">edge_weights</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">vertex_names</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> 
                    <span class="n">target</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                    <span class="n">vertex_label</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                   <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">edge_weights</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">vertex_names</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
            <span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> 
                    <span class="n">target</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                    <span class="n">vertex_label</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="n">edge_label</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">weight_by</span><span class="p">]</span>
                   <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
             <span class="n">ig</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> 
                    <span class="n">target</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                    <span class="n">edge_label</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">weight_by</span><span class="p">]</span>
                   <span class="p">)</span></div>
    
    
    <span class="c1"># Methods for calculating network analytics</span>
    
<div class="viewcode-block" id="CaseNetworkSet.average_path_length"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.average_path_length">[docs]</a>    <span class="k">def</span> <span class="nf">average_path_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">directed</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">unconn</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the average path length in a network.</span>
<span class="sd">       </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            Name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        directed : bool</span>
<span class="sd">            Whether to consider directed paths in case of a</span>
<span class="sd">            directed graph. Ignored for undirected graphs.</span>
<span class="sd">            unconn: what to do when the graph is unconnected. If C{True},</span>
<span class="sd">            the average of the geodesic lengths in the components is</span>
<span class="sd">            calculated. Otherwise for all unconnected vertex pairs,</span>
<span class="sd">            a path length equal to the number of vertices is used.</span>
<span class="sd">            weights : list, set, tuple, or str edge weights to be used. Can be a sequence or iterable or</span>
<span class="sd">            even an edge attribute name.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : int</span>
<span class="sd">            The average path length in the graph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">average_path_length</span><span class="p">(</span><span class="n">directed</span> <span class="o">=</span> <span class="n">directed</span><span class="p">,</span> <span class="n">unconn</span> <span class="o">=</span> <span class="n">unconn</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">weights</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseNetworkSet.diameter"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.diameter">[docs]</a>    <span class="k">def</span> <span class="nf">diameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">unconn</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the diameter of the graph.</span>
<span class="sd">       </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        directed : bool</span>
<span class="sd">            whether to consider directed paths.</span>
<span class="sd">        unconn : bool</span>
<span class="sd">            if C{True} and the graph is unconnected, the</span>
<span class="sd">            longest geodesic within a component will be returned. If</span>
<span class="sd">            C{False} and the graph is unconnected, the result is the</span>
<span class="sd">            number of vertices if there are no weights or infinity</span>
<span class="sd">            if there are weights.</span>
<span class="sd">        weights : list, set, tuple, or str edge</span>
<span class="sd">            weights to be used. Can be a sequence or iterable or</span>
<span class="sd">            even an edge attribute name.</span>
<span class="sd">      </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result</span>
<span class="sd">            the diameter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">diameter</span><span class="p">(</span><span class="n">unconn</span> <span class="o">=</span> <span class="n">unconn</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="n">weights</span><span class="p">)</span></div>

<div class="viewcode-block" id="CaseNetworkSet.density"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.density">[docs]</a>    <span class="k">def</span> <span class="nf">density</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">loops</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the density of the graph.</span>
<span class="sd">       </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        loops : bool</span>
<span class="sd">            whether to take loops into consideration. If C{True},</span>
<span class="sd">            the algorithm assumes that there might be some loops in the graph</span>
<span class="sd">            and calculates the density accordingly. If C{False}, the algorithm</span>
<span class="sd">            assumes that there can&#39;t be any loops.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result</span>
<span class="sd">            the density of the graph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">density</span><span class="p">(</span><span class="n">loops</span> <span class="o">=</span> <span class="n">loops</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.reciprocity"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.reciprocity">[docs]</a>    <span class="k">def</span> <span class="nf">reciprocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">ignore_loops</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reciprocity defines the proportion of mutual connections in a</span>
<span class="sd">        directed graph. It is most commonly defined as the probability</span>
<span class="sd">        that the opposite counterpart of a directed edge is also included</span>
<span class="sd">        in the graph. This measure is calculated if C{mode} is C{&quot;default&quot;}.</span>

<span class="sd">        Prior to igraph 0.6, another measure was implemented, defined as</span>
<span class="sd">        the probability of mutual connection between a vertex pair if we</span>
<span class="sd">        know that there is a (possibly non-mutual) connection between them.</span>
<span class="sd">        In other words, (unordered) vertex pairs are classified into three</span>
<span class="sd">        groups: (1) disconnected, (2) non-reciprocally connected and (3)</span>
<span class="sd">        reciprocally connected. The result is the size of group (3), divided</span>
<span class="sd">        by the sum of sizes of groups (2) and (3). This measure is calculated</span>
<span class="sd">        if C{mode} is C{&quot;ratio&quot;}.</span>
<span class="sd">            </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        ignore_loops : bool</span>
<span class="sd">            whether loop edges should be ignored.</span>
<span class="sd">        mode : str</span>
<span class="sd">            the algorithm to use to calculate the reciprocity; see</span>
<span class="sd">            above for more details.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result</span>
<span class="sd">            the reciprocity of the graph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">reciprocity</span><span class="p">(</span><span class="n">ignore_loops</span><span class="o">=</span><span class="n">ignore_loops</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span></div>


<div class="viewcode-block" id="CaseNetworkSet.degrees_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.degrees_df">[docs]</a>    <span class="k">def</span> <span class="nf">degrees_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the degree distribution of the network. Returns a dataframe.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        direction : str</span>
<span class="sd">            which  edge directions to analyse.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            a dataframe containing the degree distribution of the graph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        <span class="n">degrees_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;degree&#39;</span><span class="p">])</span>
        <span class="n">degrees</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">degree</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>

        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">degrees_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">degrees</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">degrees_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">degrees_df</span> <span class="o">=</span> <span class="n">degrees_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">degrees_df</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.degrees_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.degrees_stats">[docs]</a>    <span class="k">def</span> <span class="nf">degrees_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates frequency statistics for the degree distribution of the network.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        direction : str</span>
<span class="sd">            which  edge directions to analyse.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            a dataframe of frequency statistics for the degree distribution of the</span>
<span class="sd">            graph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseNetworkSet.betweenness_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.betweenness_df">[docs]</a>    <span class="k">def</span> <span class="nf">betweenness_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">directed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sources</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Calculates or estimates the betweenness of vertices in a network. Returns a dataframe.</span>

<span class="sd">            Also supports calculating betweenness with shortest path length cutoffs or</span>
<span class="sd">            considering shortest paths only from certain source vertices or to certain</span>
<span class="sd">            target vertices.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            network : str</span>
<span class="sd">                name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">            vertices</span>
<span class="sd">                the vertices for which the betweennesses must be returned.</span>
<span class="sd">                If C{None}, assumes all of the vertices in the graph.</span>
<span class="sd">            directed : bool</span>
<span class="sd">                whether to consider directed paths.</span>
<span class="sd">            cutoff : float</span>
<span class="sd">                if it is an integer, only paths less than or equal to this</span>
<span class="sd">                length are considered, effectively resulting in an estimation of the</span>
<span class="sd">                betweenness for the given vertices. If C{None}, the exact betweenness is</span>
<span class="sd">                returned.</span>
<span class="sd">            weights : list, set, tuple, or str</span>
<span class="sd">                edge weights to be used. Can be a sequence or iterable or</span>
<span class="sd">                 even an edge attribute name.</span>
<span class="sd">            sources</span>
<span class="sd">                the set of source vertices to consider when calculating</span>
<span class="sd">                shortest paths.</span>
<span class="sd">            targets</span>
<span class="sd">                the set of target vertices to consider when calculating</span>
<span class="sd">                shortest paths.</span>
<span class="sd">         </span>
<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            result : pandas.DataFrame</span>
<span class="sd">                the (possibly cutoff-limited) betweenness of the given vertices in a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;betweenness&#39;</span><span class="p">])</span>

        <span class="n">betweenness</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">betweenness</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">,</span> <span class="n">directed</span><span class="o">=</span><span class="n">directed</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="n">cutoff</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">sources</span><span class="o">=</span><span class="n">sources</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="n">targets</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">betweenness</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;betweenness&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetworkSet.betweenness_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.betweenness_stats">[docs]</a>    <span class="k">def</span> <span class="nf">betweenness_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">directed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sources</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns frequency statistics for the betweenness of vertices in a network. Returns a dataframe.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            network : str</span>
<span class="sd">                name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">            vertices</span>
<span class="sd">                the vertices for which the betweennesses must be returned.</span>
<span class="sd">                If C{None}, assumes all of the vertices in the graph.</span>
<span class="sd">            directed : bool</span>
<span class="sd">                whether to consider directed paths.</span>
<span class="sd">            cutoff : float</span>
<span class="sd">                if it is an integer, only paths less than or equal to this</span>
<span class="sd">                 length are considered, effectively resulting in an estimation of the</span>
<span class="sd">                 betweenness for the given vertices. If C{None}, the exact betweenness is</span>
<span class="sd">                 returned.</span>
<span class="sd">            weights : list, set, tuple, or str</span>
<span class="sd">                edge weights to be used. Can be a sequence or iterable or</span>
<span class="sd">                even an edge attribute name.</span>
<span class="sd">            sources</span>
<span class="sd">                the set of source vertices to consider when calculating</span>
<span class="sd">                shortest paths.</span>
<span class="sd">            targets</span>
<span class="sd">                the set of target vertices to consider when calculating</span>
<span class="sd">                shortest paths.</span>
<span class="sd">         </span>
<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            result : pandas.DataFrame</span>
<span class="sd">                frequency statistics for betweenness of the given vertices in a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">betweenness_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">,</span> <span class="n">directed</span><span class="o">=</span><span class="n">directed</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="n">cutoff</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">sources</span><span class="o">=</span><span class="n">sources</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="n">targets</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;betweenness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
    
<div class="viewcode-block" id="CaseNetworkSet.eigencentralities_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.eigencentralities_df">[docs]</a>    <span class="k">def</span> <span class="nf">eigencentralities_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the eigenvector centralities of the vertices in a graph. Returns a dataframe.</span>
<span class="sd">       </span>
<span class="sd">        Eigenvector centrality is a measure of the importance of a node in a</span>
<span class="sd">        network. It assigns relative scores to all nodes in the network based</span>
<span class="sd">        on the principle that connections from high-scoring nodes contribute</span>
<span class="sd">        more to the score of the node in question than equal connections from</span>
<span class="sd">        low-scoring nodes. In practice, the centralities are determined by calculating</span>
<span class="sd">        eigenvector corresponding to the largest positive eigenvalue of the</span>
<span class="sd">        adjacency matrix. In the undirected case, this function considers</span>
<span class="sd">        the diagonal entries of the adjacency matrix to be twice the number of</span>
<span class="sd">        self-loops on the corresponding vertex.</span>
<span class="sd">       </span>
<span class="sd">        In the directed case, the left eigenvector of the adjacency matrix is</span>
<span class="sd">        calculated. In other words, the centrality of a vertex is proportional</span>
<span class="sd">        to the sum of centralities of vertices pointing to it.</span>
<span class="sd">       </span>
<span class="sd">        Eigenvector centrality is meaningful only for connected graphs.</span>
<span class="sd">        Graphs that are not connected should be decomposed into connected</span>
<span class="sd">        components, and the eigenvector centrality calculated for each separately.</span>
<span class="sd">       </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        directed : bool</span>
<span class="sd">            whether to consider edge directions in a directed</span>
<span class="sd">            graph. Ignored for undirected graphs.</span>
<span class="sd">        scale : bool</span>
<span class="sd">            whether to normalize the centralities so the largest</span>
<span class="sd">            one will always be 1.</span>
<span class="sd">        weights : list, set, tuple, or str</span>
<span class="sd">            edge weights given as a list or an edge attribute. If</span>
<span class="sd">            C{None}, all edges have equal weight.</span>
<span class="sd">        return_eigenvalue : bool</span>
<span class="sd">            whether to return the actual largest</span>
<span class="sd">            eigenvalue along with the centralities</span>
<span class="sd">        arpack_options : ARPACKOptions</span>
<span class="sd">            an L{ARPACKOptions} object that can be used</span>
<span class="sd">            to fine-tune the calculation. If it is omitted, the module-level</span>
<span class="sd">            variable called C{arpack_options} is used.</span>
<span class="sd">         </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            the eigenvector centralities in a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        
        <span class="k">else</span><span class="p">:</span>

            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;eigencentrality&#39;</span><span class="p">])</span>

            <span class="n">eigencentrality</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">eigenvector_centrality</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="n">return_eigenvalue</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="n">arpack_options</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
                <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">eigencentrality</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            
            <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;eigencentrality&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetworkSet.eigencentralities_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.eigencentralities_stats">[docs]</a>    <span class="k">def</span> <span class="nf">eigencentralities_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for the eigenvector centralities of the vertices in a graph.</span>
<span class="sd">       </span>
<span class="sd">        Eigenvector centrality is a measure of the importance of a node in a</span>
<span class="sd">        network. It assigns relative scores to all nodes in the network based</span>
<span class="sd">        on the principle that connections from high-scoring nodes contribute</span>
<span class="sd">        more to the score of the node in question than equal connections from</span>
<span class="sd">        low-scoring nodes. In practice, the centralities are determined by calculating</span>
<span class="sd">        eigenvector corresponding to the largest positive eigenvalue of the</span>
<span class="sd">        adjacency matrix. In the undirected case, this function considers</span>
<span class="sd">        the diagonal entries of the adjacency matrix to be twice the number of</span>
<span class="sd">        self-loops on the corresponding vertex.</span>
<span class="sd">       </span>
<span class="sd">        In the directed case, the left eigenvector of the adjacency matrix is</span>
<span class="sd">        calculated. In other words, the centrality of a vertex is proportional</span>
<span class="sd">        to the sum of centralities of vertices pointing to it.</span>
<span class="sd">       </span>
<span class="sd">        Eigenvector centrality is meaningful only for connected graphs.</span>
<span class="sd">        Graphs that are not connected should be decomposed into connected</span>
<span class="sd">        components, and the eigenvector centrality calculated for each separately.</span>
<span class="sd">       </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        directed : bool</span>
<span class="sd">            whether to consider edge directions in a directed</span>
<span class="sd">            graph. Ignored for undirected graphs.</span>
<span class="sd">        scale : bool</span>
<span class="sd">            whether to normalize the centralities so the largest</span>
<span class="sd">            one will always be 1.</span>
<span class="sd">        weights : list, set, tuple, or str</span>
<span class="sd">            edge weights given as a list or an edge attribute. If</span>
<span class="sd">            C{None}, all edges have equal weight.</span>
<span class="sd">        return_eigenvalue : bool</span>
<span class="sd">            whether to return the actual largest</span>
<span class="sd">            eigenvalue along with the centralities</span>
<span class="sd">        arpack_options : ARPACKOptions</span>
<span class="sd">            an L{ARPACKOptions} object that can be used</span>
<span class="sd">            to fine-tune the calculation. If it is omitted, the module-level</span>
<span class="sd">            variable called C{arpack_options} is used.</span>
<span class="sd">         </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.Series</span>
<span class="sd">            frequency statistics for eigenvector centralities in a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigencentralities_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;eigencentrality&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseNetworkSet.authority_scores_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.authority_scores_df">[docs]</a>    <span class="k">def</span> <span class="nf">authority_scores_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates Kleinberg&#39;s authority score for the vertices of the network. Returns a dataframe.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        weights : list, set, tuple, or str</span>
<span class="sd">            edge weights to be used. Can be a sequence or iterable or</span>
<span class="sd">            an edge attribute name.</span>
<span class="sd">        scale : bool</span>
<span class="sd">            whether to normalize the scores so that the largest one is 1.</span>
<span class="sd">        arpack_options : ARPACKOptions</span>
<span class="sd">            an L{ARPACKOptions} object used to fine-tune</span>
<span class="sd">            the ARPACK eigenvector calculation. If omitted, the module-level</span>
<span class="sd">            variable called C{arpack_options} is used.</span>
<span class="sd">        return_eigenvalue : bool</span>
<span class="sd">            whether to return the largest eigenvalue.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            the authority scores as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;authority_score&#39;</span><span class="p">])</span>

        <span class="n">authority_scores</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">authority_score</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="n">arpack_options</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="n">return_eigenvalue</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">authority_scores</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;authority_score&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetworkSet.authority_scores_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.authority_scores_stats">[docs]</a>    <span class="k">def</span> <span class="nf">authority_scores_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for Kleinberg&#39;s authority score for the vertices of the network. Returns a dataframe.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        weights : list, set, tuple, or str</span>
<span class="sd">            edge weights to be used. Can be a sequence or iterable or</span>
<span class="sd">            an edge attribute name.</span>
<span class="sd">        scale : bool</span>
<span class="sd">            whether to normalize the scores so that the largest one is 1.</span>
<span class="sd">        arpack_options : ARPACKOptions</span>
<span class="sd">            an L{ARPACKOptions} object used to fine-tune</span>
<span class="sd">            the ARPACK eigenvector calculation. If omitted, the module-level</span>
<span class="sd">            variable called C{arpack_options} is used.</span>
<span class="sd">        return_eigenvalue : bool</span>
<span class="sd">            whether to return the largest eigenvalue.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            frequency statistics for authority scores as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority_scores_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="n">arpack_options</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="n">return_eigenvalue</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;authority_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CaseNetworkSet.hub_scores_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.hub_scores_df">[docs]</a>    <span class="k">def</span> <span class="nf">hub_scores_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates Kleinberg&#39;s hub score for the vertices of the graph. Returns a dataframe.</span>
<span class="sd">       </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        weights : list, set, tuple, or str</span>
<span class="sd">            edge weights to be used. Can be a sequence or iterable or</span>
<span class="sd">            an edge attribute name.</span>
<span class="sd">        scale : bool </span>
<span class="sd">            whether to normalize the scores so that the largest one is 1.</span>
<span class="sd">        arpack_options : ARPACKOptions</span>
<span class="sd">            an L{ARPACKOptions} object used to fine-tune</span>
<span class="sd">            the ARPACK eigenvector calculation. If omitted, the module-level</span>
<span class="sd">            variable called C{arpack_options} is used.</span>
<span class="sd">        return_eigenvalue : bool</span>
<span class="sd">            whether to return the largest eigenvalue.</span>
<span class="sd">       </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            the hub scores as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;hub_score&#39;</span><span class="p">])</span>

        <span class="n">hub_scores</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">hub_score</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="n">arpack_options</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="n">return_eigenvalue</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">hub_scores</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;hub_score&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetworkSet.hub_scores_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.hub_scores_stats">[docs]</a>    <span class="k">def</span> <span class="nf">hub_scores_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistisc for Kleinberg&#39;s hub score for the vertices of the graph. Returns a dataframe.</span>
<span class="sd">       </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        weights : list, set, tuple, or str</span>
<span class="sd">            edge weights to be used. Can be a sequence or iterable or</span>
<span class="sd">            an edge attribute name.</span>
<span class="sd">        scale : bool</span>
<span class="sd">            whether to normalize the scores so that the largest one</span>
<span class="sd">            is 1.</span>
<span class="sd">        arpack_options : ARPACKOptions</span>
<span class="sd">            an L{ARPACKOptions} object used to fine-tune</span>
<span class="sd">            the ARPACK eigenvector calculation. If omitted, the module-level</span>
<span class="sd">            variable called C{arpack_options} is used.</span>
<span class="sd">        return_eigenvalue : bool </span>
<span class="sd">            whether to return the largest eigenvalue.</span>
<span class="sd">       </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : pandas.DataFrame</span>
<span class="sd">            frequency statistics for hub scores as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hub_scores_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="n">arpack_options</span><span class="o">=</span><span class="n">arpack_options</span><span class="p">,</span> <span class="n">return_eigenvalue</span><span class="o">=</span><span class="n">return_eigenvalue</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hub_score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="CaseNetworkSet.coreness_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.coreness_df">[docs]</a>    <span class="k">def</span> <span class="nf">coreness_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Finds the coreness (shell index) of the vertices of the network. Returns a dataframe.</span>
<span class="sd">       </span>
<span class="sd">            The M{k}-core of a graph is a maximal subgraph in which each vertex</span>
<span class="sd">            has at least degree k. (Degree here means the degree in the</span>
<span class="sd">            subgraph of course). The coreness of a vertex is M{k} if it</span>
<span class="sd">            is a member of the M{k}-core but not a member of the M{k+1}-core.</span>
<span class="sd">       </span>
<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            network : str</span>
<span class="sd">                name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">            mode : str</span>
<span class="sd">                whether to compute the in-corenesses (C{&quot;in&quot;}), the</span>
<span class="sd">                out-corenesses (C{&quot;out&quot;}) or the undirected corenesses (C{&quot;all&quot;}).</span>
<span class="sd">                Ignored and assumed to be C{&quot;all&quot;} for undirected graphs.</span>
<span class="sd">            </span>
<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            result : pandas.DataFrame</span>
<span class="sd">                the corenesses for each vertex.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;coreness&#39;</span><span class="p">])</span>

        <span class="n">coreness</span> <span class="o">=</span> <span class="n">CaseNetwork</span><span class="o">.</span><span class="n">coreness</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">,</span> <span class="n">coreness</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex_id&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;coreness&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetworkSet.coreness_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.coreness_stats">[docs]</a>    <span class="k">def</span> <span class="nf">coreness_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns frequency statistics for the coreness (shell index) values of the vertices of the network.</span>
<span class="sd">       </span>
<span class="sd">            The M{k}-core of a graph is a maximal subgraph in which each vertex</span>
<span class="sd">            has at least degree k. (Degree here means the degree in the</span>
<span class="sd">            subgraph of course). The coreness of a vertex is M{k} if it</span>
<span class="sd">            is a member of the M{k}-core but not a member of the M{k+1}-core.</span>
<span class="sd">       </span>
<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            network : str</span>
<span class="sd">                name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">            mode : str</span>
<span class="sd">                whether to compute the in-corenesses (C{&quot;in&quot;}), the</span>
<span class="sd">                out-corenesses (C{&quot;out&quot;}) or the undirected corenesses (C{&quot;all&quot;}).</span>
<span class="sd">                Ignored and assumed to be C{&quot;all&quot;} for undirected graphs.</span>
<span class="sd">            </span>
<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            result : pandas.Series</span>
<span class="sd">                frequency statistics for corenesses values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coreness_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;coreness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    

<div class="viewcode-block" id="CaseNetworkSet.community_detection"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.community_detection">[docs]</a>    <span class="k">def</span> <span class="nf">community_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;fastgreedy&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies network communities. Gives the option of using different algorithms.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        algorithm : str</span>
<span class="sd">            the community detection algorithm to use.</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        &#39;algorithm&#39; options:</span>
<span class="sd">            * betweenness</span>
<span class="sd">            * fastgreedy</span>
<span class="sd">            * eigenvector</span>
<span class="sd">            * spinglass</span>
<span class="sd">            * spinglass</span>
<span class="sd">            * walktrap</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">algorithm</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="n">algorithm</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Algorithm must be specified. Options: 1. betweenness, 2. fastgreedy, 3. eigenvector, 4. spinglass, 5. walktrap.:&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;betweenness&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">community_edge_betweenness</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;fastgreedy&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">community_fastgreedy</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;eigenvector&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">community_leading_eigenvector</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;spinglass&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">community_spinglass</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;walktrap&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">community_walktrap</span><span class="p">()</span></div>


<div class="viewcode-block" id="CaseNetworkSet.components"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.components">[docs]</a>    <span class="k">def</span> <span class="nf">components</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;strong&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the (strong or weak) connected components for</span>
<span class="sd">        a given graph.</span>
<span class="sd">       </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        network : str</span>
<span class="sd">            name of network to analyse. Defaults to requesting from user input.</span>
<span class="sd">        mode : str</span>
<span class="sd">            must be either C{&quot;strong&quot;} or C{&quot;weak&quot;}, depending on the</span>
<span class="sd">            connected components being sought. Optional, defaults to C{&quot;strong&quot;}.</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result : VertexClustering</span>
<span class="sd">            a L{VertexClustering} object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">components</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span></div>


<div class="viewcode-block" id="CaseNetworkSet.decompose"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.decompose">[docs]</a>    <span class="k">def</span> <span class="nf">decompose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;strong&#39;</span><span class="p">,</span> <span class="n">maxcompno</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minelements</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Decomposes the graph into subgraphs.</span>
<span class="sd">       </span>
<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            mode : str</span>
<span class="sd">                must be either C{&quot;strong&quot;} or C{&quot;weak&quot;}, depending on</span>
<span class="sd">                the clusters being sought. Optional, defaults to C{&quot;strong&quot;}.</span>
<span class="sd">            maxcompno : int</span>
<span class="sd">                maximum number of components to return.</span>
<span class="sd">                C{None} means all possible components.</span>
<span class="sd">            minelements : int</span>
<span class="sd">                minimum number of vertices in a component.</span>
<span class="sd">                By setting this to 2, isolated vertices are not returned</span>
<span class="sd">                as separate components.</span>
<span class="sd">         </span>
<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            result : list</span>
<span class="sd">                a list of the subgraphs. Every returned subgraph is a</span>
<span class="sd">                copy of the original.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">decompose</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">maxcompno</span><span class="o">=</span><span class="n">maxcompno</span><span class="p">,</span> <span class="n">minelements</span><span class="o">=</span><span class="n">minelements</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="CaseNetworkSet.weighted_density"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.weighted_density">[docs]</a>    <span class="k">def</span> <span class="nf">weighted_density</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculates weighted density for network&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="c1"># Checks if network is weighted</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;weight&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">es</span><span class="o">.</span><span class="n">attributes</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">density</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Gets the weighted edge count</span>

            <span class="n">weighted_edge_count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">es</span><span class="p">:</span>
                <span class="n">weighted_edge_count</span> <span class="o">+=</span> <span class="n">edge</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>


            <span class="c1"># Calculating the sum of the possible maximally weighted edges.</span>
            <span class="c1"># Comparison network varies depending on the network inputted.</span>

            <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="kc">None</span>
                
            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;coinciding_words&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="n">network_obj</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">coinciding_words</span><span class="p">):</span>
                <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_words_network</span><span class="o">.</span><span class="n">ecount</span><span class="p">()</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;coinciding_information&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="n">network_obj</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">coinciding_information</span><span class="p">):</span>
                <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_info_network</span><span class="o">.</span><span class="n">ecount</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;items_information_shared&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="n">network_obj</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">items_information_shared</span><span class="p">):</span>
                <span class="n">all_comparisons</span> <span class="o">=</span> <span class="n">network_obj</span><span class="p">[</span><span class="s1">&#39;all_information_comparisons&#39;</span><span class="p">]</span>
                <span class="n">all_unions</span> <span class="o">=</span> <span class="n">all_comparisons</span><span class="p">[</span><span class="s1">&#39;Intersect size&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">all_comparisons</span><span class="p">[</span><span class="s1">&#39;Difference size&#39;</span><span class="p">]</span>
                <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="n">all_unions</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;items_metadata_shared&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="n">network_obj</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">items_metadata_shared</span><span class="p">):</span>
                <span class="n">all_comparisons</span> <span class="o">=</span> <span class="n">network_obj</span><span class="p">[</span><span class="s1">&#39;all_metadata_comparisons&#39;</span><span class="p">]</span>
                <span class="n">all_unions</span> <span class="o">=</span> <span class="n">all_comparisons</span><span class="p">[</span><span class="s1">&#39;Intersect size&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">all_comparisons</span><span class="p">[</span><span class="s1">&#39;Difference size&#39;</span><span class="p">]</span>
                <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="n">all_unions</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>


            <span class="c1"># For networks where weight is a number =&lt;1, assumes that the maximum weight is 1. </span>
            <span class="c1"># The maximum weighted count is therefore the number of edges.</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">complete_edge_count</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">network_obj</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_items_network</span><span class="o">.</span><span class="n">ecount</span><span class="p">())</span><span class="o">*</span><span class="mi">2</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">complete_edge_count</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">network_obj</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">complete_edge_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_items_network</span><span class="o">.</span><span class="n">ecount</span><span class="p">()</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span>

            <span class="c1"># Calculates the weighted density</span>
            <span class="k">if</span> <span class="n">complete_edge_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">weighted_density</span> <span class="o">=</span> <span class="n">weighted_edge_count</span> <span class="o">/</span> <span class="n">complete_edge_count</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">weighted_density</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

            <span class="k">return</span> <span class="n">weighted_density</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.weighted_degrees_df"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.weighted_degrees_df">[docs]</a>    <span class="k">def</span> <span class="nf">weighted_degrees_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculates a network&#39;s weighted degrees and returns a dataframe.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="c1"># Checks if network is weighted</span>

        <span class="k">if</span> <span class="s1">&#39;weight&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">es</span><span class="o">.</span><span class="n">attributes</span><span class="p">():</span>
            <span class="n">degrees_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>
            <span class="n">degrees_df</span><span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">degrees_df</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span>
            <span class="n">degrees_df</span> <span class="o">=</span> <span class="n">degrees_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">degrees_df</span>
            

        <span class="k">else</span><span class="p">:</span>

            <span class="n">degrees_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="s1">&#39;weighted_degree&#39;</span><span class="p">])</span>

            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="p">:</span>
                <span class="n">weighted_degree</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">incident_edges</span> <span class="o">=</span> <span class="p">(</span><span class="n">CaseNetwork</span><span class="o">.</span><span class="n">incident</span><span class="p">(</span><span class="n">network_obj</span><span class="p">,</span> <span class="n">vertex</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">incident_edges</span><span class="p">:</span>
                    <span class="n">weight</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">es</span><span class="p">[</span><span class="n">edge</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                    <span class="n">weighted_degree</span> <span class="o">+=</span> <span class="n">weight</span>
                <span class="n">degrees_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">vertex</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">weighted_degree</span><span class="p">]</span>            
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">degrees_df</span> <span class="o">=</span> <span class="n">degrees_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">degrees_df</span></div>

        
<div class="viewcode-block" id="CaseNetworkSet.weighted_degrees_stats"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.weighted_degrees_stats">[docs]</a>    <span class="k">def</span> <span class="nf">weighted_degrees_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency statistics for the network&#39;s weighted degree distribution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_degrees_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="CaseNetworkSet.degree_distribution"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.degree_distribution">[docs]</a>    <span class="k">def</span> <span class="nf">degree_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">weighted</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the network&#39;s weighted or unweighted degree distribution as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">weighted</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">degrees_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_degrees_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>
            <span class="n">freq_table</span> <span class="o">=</span> <span class="n">degrees_frame</span><span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
            <span class="n">dist_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">:</span><span class="n">freq_table</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;counts&#39;</span><span class="p">:</span><span class="n">freq_table</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>

            <span class="k">return</span> <span class="n">dist_frame</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">degrees_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>
            <span class="n">freq_table</span> <span class="o">=</span> <span class="n">degrees_frame</span><span class="p">[</span><span class="s1">&#39;degree&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
            <span class="n">dist_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;degree&#39;</span><span class="p">:</span><span class="n">freq_table</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="s1">&#39;counts&#39;</span><span class="p">:</span><span class="n">freq_table</span><span class="o">.</span><span class="n">values</span><span class="p">})</span>

            <span class="k">return</span> <span class="n">dist_frame</span></div>
            
    

<div class="viewcode-block" id="CaseNetworkSet.all_centralities"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.all_centralities">[docs]</a>    <span class="k">def</span> <span class="nf">all_centralities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">sort_by</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">,</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="s1">&#39;betweenness&#39;</span><span class="p">,</span><span class="s1">&#39;eigencentrality&#39;</span><span class="p">,</span><span class="s1">&#39;authority_score&#39;</span><span class="p">,</span><span class="s1">&#39;hub_score&#39;</span><span class="p">]):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates all centrality measures for network. Returns as a dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
                <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>
        
        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        <span class="n">is_directed</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">is_directed</span><span class="p">()</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">degrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">degrees_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">degrees</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">degrees</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">weighted_degrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_degrees_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">weighted_degrees</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">weighted_degrees</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">eigencents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigencentralities_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">eigencents</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">eigencents</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">betweenness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">betweenness_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">betweenness</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">betweenness</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">auths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authority_scores_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">auths</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">auths</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">hubs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hub_scores_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">hubs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
            <span class="n">hubs</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;vertex&#39;</span>
        
        <span class="n">combined</span> <span class="o">=</span> <span class="n">weighted_degrees</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">degrees</span>
                                        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">betweenness</span>
                                        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">eigencents</span>
                                        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">auths</span>
                                        <span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                                            <span class="n">hubs</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">is_directed</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">sort_by</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">,</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="s1">&#39;betweenness&#39;</span><span class="p">,</span><span class="s1">&#39;authority_score&#39;</span><span class="p">,</span><span class="s1">&#39;hub_score&#39;</span><span class="p">]</span>
            
        <span class="k">return</span> <span class="n">combined</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">sort_by</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.get_neighbours"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_neighbours">[docs]</a>    <span class="k">def</span> <span class="nf">get_neighbours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns vertex neighbours as a dataframe&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>

        <span class="c1"># Get vertex</span>
        <span class="n">vertex</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span>

        <span class="c1"># Get vertex neighbours in a dataframe</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;vertex_id&#39;</span><span class="p">,</span> <span class="s1">&#39;vertex_name&#39;</span><span class="p">])</span>

        <span class="n">neighbours</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">neighbors</span><span class="p">()</span>
        
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">neighbour</span> <span class="ow">in</span> <span class="n">neighbours</span><span class="p">:</span>
            <span class="n">neighbour_id</span> <span class="o">=</span> <span class="n">neighbour</span><span class="o">.</span><span class="n">index</span>
            <span class="n">neighbour_name</span> <span class="o">=</span> <span class="n">neighbour</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">neighbour_id</span><span class="p">,</span> <span class="n">neighbour_name</span><span class="p">]</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;vertex_id&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>


<div class="viewcode-block" id="CaseNetworkSet.get_degree"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_degree">[docs]</a>    <span class="k">def</span> <span class="nf">get_degree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the number of other vertices a vertex is tied to. I.e., the size, or len(), of neighbours().&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">degree</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span><span class="o">.</span><span class="n">neighbors</span><span class="p">())</span>
        <span class="n">degree</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">degree</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">degree</span></div>


<div class="viewcode-block" id="CaseNetworkSet.get_weighted_degree"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_weighted_degree">[docs]</a>    <span class="k">def</span> <span class="nf">get_weighted_degree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the number of other vertices a vertex is tied to. I.e., the size, or len(), of neighbours().&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weighted_degrees_df</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">)</span>
        <span class="n">masked</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;vertex&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">vertex_name</span><span class="p">]</span>
        <span class="n">degree</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">masked</span><span class="p">[</span><span class="s1">&#39;weighted_degree&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">degree</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.get_item_all_degrees"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_item_all_degrees">[docs]</a>    <span class="k">def</span> <span class="nf">get_item_all_degrees</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">weighted</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dataframe of degrees for all vertices representing an item. Takes an item ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>

        <span class="n">networks</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s1">&#39;items_words_shared&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_words_similarity&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_information_shared&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_information_similarity&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;items_metadata_shared&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;items_metadata_similarity&#39;</span><span class="p">,</span>
    <span class="c1">#                 &#39;items_links&#39;,</span>
                    <span class="s1">&#39;items_references&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_contents&#39;</span>
                    <span class="p">]</span>

        <span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">networks</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="n">networks</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">weighted</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_weighted_degree</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_degree</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>

            <span class="n">series</span><span class="p">[</span><span class="n">network</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">series</span></div>



<div class="viewcode-block" id="CaseNetworkSet.get_all_items_all_degrees"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_all_items_all_degrees">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_items_all_degrees</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weighted</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dataframe of degrees for all vertices representing all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">disconnected_items_network</span><span class="p">[</span><span class="s1">&#39;item_ids&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_items_network</span><span class="p">[</span><span class="s1">&#39;item_ids&#39;</span><span class="p">]</span>

        <span class="n">networks</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="s1">&#39;words_shared&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;words_similarity&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;information_shared&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;information_similarity&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;metadata_shared&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;metadata_similarity&#39;</span><span class="p">,</span>
        <span class="c1">#                 &#39;links&#39;,</span>
                        <span class="s1">&#39;references&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;contents&#39;</span>
                        <span class="p">]</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">networks</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">item_ids</span><span class="p">:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item_all_degrees</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">,</span> <span class="n">weighted</span> <span class="o">=</span> <span class="n">weighted</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.get_betweenness"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_betweenness">[docs]</a>    <span class="k">def</span> <span class="nf">get_betweenness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a vertex&#39;s betweenness centrality score.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">betweenness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span><span class="o">.</span><span class="n">betweenness</span><span class="p">()</span>
        <span class="n">betweenness</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">betweenness</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">betweenness</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.get_item_all_betweenness"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_item_all_betweenness">[docs]</a>    <span class="k">def</span> <span class="nf">get_item_all_betweenness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns betweenness centrality scores for an item&#39;s vertices in all networks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>

        <span class="n">networks</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s1">&#39;items_words_shared&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_words_similarity&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_information_shared&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_information_similarity&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;items_metadata_shared&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;items_metadata_similarity&#39;</span><span class="p">,</span>
    <span class="c1">#                 &#39;items_links&#39;,</span>
                    <span class="s1">&#39;items_references&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_contents&#39;</span>
                    <span class="p">]</span>

        <span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">networks</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="n">networks</span><span class="p">:</span>
            
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_betweenness</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>
            <span class="n">series</span><span class="p">[</span><span class="n">network</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">series</span></div>



<div class="viewcode-block" id="CaseNetworkSet.get_all_items_all_betweenness"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_all_items_all_betweenness">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_items_all_betweenness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns betweenness centrality scores for all items&#39; vertices in all networks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">disconnected_items_network</span><span class="p">[</span><span class="s1">&#39;item_ids&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_items_network</span><span class="p">[</span><span class="s1">&#39;item_ids&#39;</span><span class="p">]</span>

        <span class="n">networks</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="s1">&#39;words_shared&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;words_similarity&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;information_shared&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;information_similarity&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;metadata_shared&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;metadata_similarity&#39;</span><span class="p">,</span>
        <span class="c1">#                 &#39;links&#39;,</span>
                        <span class="s1">&#39;references&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;contents&#39;</span>
                        <span class="p">]</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">networks</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">item_ids</span><span class="p">:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item_all_betweenness</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>

<div class="viewcode-block" id="CaseNetworkSet.get_eigencentrality"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_eigencentrality">[docs]</a>    <span class="k">def</span> <span class="nf">get_eigencentrality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the eigenvector centrality score for a vertex.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>
        
        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        <span class="n">vertex_id</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
        
        <span class="n">all_eigencentralities</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">eigenvector_centrality</span><span class="p">()</span>
        <span class="n">eigencentrality</span> <span class="o">=</span> <span class="n">all_eigencentralities</span><span class="p">[</span><span class="n">vertex_id</span><span class="p">]</span>
        <span class="n">eigencentrality</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">eigencentrality</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">eigencentrality</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.get_item_all_eigencentralities"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_item_all_eigencentralities">[docs]</a>    <span class="k">def</span> <span class="nf">get_item_all_eigencentralities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the eigenvector centrality scores for all vertices representing an item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>

        <span class="n">networks</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s1">&#39;items_words_shared&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_words_similarity&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_information_shared&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;items_information_similarity&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;items_metadata_shared&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;items_metadata_similarity&#39;</span>
                    <span class="p">]</span>

        <span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">networks</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="n">networks</span><span class="p">:</span>
            
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_eigencentrality</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>
            <span class="n">series</span><span class="p">[</span><span class="n">network</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">series</span></div>



<div class="viewcode-block" id="CaseNetworkSet.get_all_items_all_eigencentralities"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_all_items_all_eigencentralities">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_items_all_eigencentralities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the eigenvector centrality scores for all vertices representing a all items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">disconnected_items_network</span><span class="p">[</span><span class="s1">&#39;item_ids&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">item_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_items_network</span><span class="p">[</span><span class="s1">&#39;item_ids&#39;</span><span class="p">]</span>

        <span class="n">networks</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="s1">&#39;words_shared&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;words_similarity&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;information_shared&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;information_similarity&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;metadata_shared&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;metadata_similarity&#39;</span>
                        <span class="p">]</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">networks</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">object</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">item_id</span> <span class="ow">in</span> <span class="n">item_ids</span><span class="p">:</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">item_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item_all_eigencentralities</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.get_hub_score"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_hub_score">[docs]</a>    <span class="k">def</span> <span class="nf">get_hub_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the hub score for a vertex.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        <span class="n">vertex_id</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
        
        <span class="n">all_scores</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">hub_score</span><span class="p">()</span>
        <span class="n">hub_score</span> <span class="o">=</span> <span class="n">all_scores</span><span class="p">[</span><span class="n">vertex_id</span><span class="p">]</span>
        <span class="n">hub_score</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">hub_score</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">hub_score</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.get_authority_score"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_authority_score">[docs]</a>    <span class="k">def</span> <span class="nf">get_authority_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the authority score for a vertex.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        <span class="n">vertex_id</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
        
        <span class="n">all_scores</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">authority_score</span><span class="p">()</span>
        <span class="n">authority_score</span> <span class="o">=</span> <span class="n">all_scores</span><span class="p">[</span><span class="n">vertex_id</span><span class="p">]</span>
        <span class="n">authority_score</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">authority_score</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">authority_score</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.get_pagerank"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.get_pagerank">[docs]</a>    <span class="k">def</span> <span class="nf">get_pagerank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">vertex_name</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the Pagerank score for a vertex.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vertex_name</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">vertex_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Vertex name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        <span class="n">vertex_id</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">vertex_name</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
        
        <span class="n">all_pageranks</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">pagerank</span><span class="p">()</span>
        <span class="n">pagerank</span> <span class="o">=</span> <span class="n">all_pageranks</span><span class="p">[</span><span class="n">vertex_id</span><span class="p">]</span>
        <span class="n">pagerank</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">pagerank</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">pagerank</span></div>

<div class="viewcode-block" id="CaseNetworkSet.is_linked_by"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.is_linked_by">[docs]</a>    <span class="k">def</span> <span class="nf">is_linked_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of vertices are linked by an item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>

        <span class="c1"># Get vertex</span>
        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items_links</span>
        <span class="n">vertex</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>

        <span class="c1"># Get vertex parents</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">predecessors</span><span class="p">()</span>
        <span class="n">parents_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">parents</span><span class="p">:</span>
            <span class="n">parents_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">parents_list</span></div>

<div class="viewcode-block" id="CaseNetworkSet.is_referred_by"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.is_referred_by">[docs]</a>    <span class="k">def</span> <span class="nf">is_referred_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of vertices are referred to by an item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>

        <span class="c1"># Get vertex</span>
        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items_references</span>
        <span class="n">vertex</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>

        <span class="c1"># Get vertex parents</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">predecessors</span><span class="p">()</span>
        <span class="n">parents_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">parents</span><span class="p">:</span>
            <span class="n">parents_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">parents_list</span></div>

<div class="viewcode-block" id="CaseNetworkSet.is_contained_by"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.is_contained_by">[docs]</a>    <span class="k">def</span> <span class="nf">is_contained_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the list of vertices are contained by an item.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">item_id</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Item ID: &#39;</span><span class="p">)</span>

        <span class="c1"># Get vertex</span>
        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">items_contents</span>
        <span class="n">vertex</span> <span class="o">=</span> <span class="n">network_obj</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">item_id</span><span class="p">)</span>

        <span class="c1"># Get vertex parents</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">predecessors</span><span class="p">()</span>
        <span class="n">parents_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">parents</span><span class="p">:</span>
            <span class="n">parents_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">parents_list</span></div>
    
    
    <span class="c1"># Methods for exporting networks to external files</span>
    
            
<div class="viewcode-block" id="CaseNetworkSet.export_network_to_kumu"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.export_network_to_kumu">[docs]</a>    <span class="k">def</span> <span class="nf">export_network_to_kumu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports network to a Kumu blue-print formatted .JSON file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Save to: &#39;</span><span class="p">)</span>
        
        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        <span class="n">export_network_to_kumu</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network_obj</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="n">folder_address</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">network</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CaseNetworkSet.export_network"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.export_network">[docs]</a>    <span class="k">def</span> <span class="nf">export_network</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports network to one of a variety of graph file types. Defaults to .graphML.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">network</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">network</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Network name: &#39;</span><span class="p">)</span>

        <span class="n">network_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_network</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder address: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">file_type</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File type (&quot;graphML&quot;, &quot;kumu&quot;, GML&quot;, &quot;LEDA&quot;, &quot;lgl&quot;, &quot;ncol&quot;, or &quot;pajek&quot;): &#39;</span><span class="p">)</span>

        <span class="n">export_network</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network_obj</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="n">folder_address</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="n">file_type</span><span class="p">)</span></div>

                
<div class="viewcode-block" id="CaseNetworkSet.export_all_networks"><a class="viewcode-back" href="../../../ida.casemanager.html#ida.casemanager.networks.CaseNetworkSet.export_all_networks">[docs]</a>    <span class="k">def</span> <span class="nf">export_all_networks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="s1">&#39;request_input&#39;</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports all networks in the collection to one of a variety of graph file types. Defaults to .graphML.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">folder_address</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">folder_address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Folder address: &#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">file_type</span> <span class="o">==</span> <span class="s1">&#39;request_input&#39;</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;File type (Options: &quot;graphML&quot;, &quot;kumu&quot;, &quot;GML&quot;, &quot;LEDA&quot;, &quot;lgl&quot;, &quot;ncol&quot;, or &quot;pajek&quot;): &#39;</span><span class="p">)</span>


        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">folder_address</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Folder address must be a string&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">export_network</span><span class="p">(</span><span class="n">network</span> <span class="o">=</span> <span class="n">network</span><span class="p">,</span> <span class="n">folder_address</span> <span class="o">=</span> <span class="n">folder_address</span><span class="p">,</span> <span class="n">file_type</span> <span class="o">=</span> <span class="n">file_type</span><span class="p">)</span></div></div>


        
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Jamie Hancock.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>